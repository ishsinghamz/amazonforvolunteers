{"ast":null,"code":"import clsx from 'clsx';\nimport React, { useRef, memo, useState } from 'react';\nimport LiveRegion from '../live-region';\nimport InternalBox from '../../../box/internal';\nimport { KeyCode } from '../../keycode';\nimport SeriesMarker from '../chart-series-marker';\nimport styles from './styles.css.js';\nexport default memo(ChartLegend);\n\nfunction ChartLegend(_a) {\n  var series = _a.series,\n      onHighlightChange = _a.onHighlightChange,\n      highlightedSeries = _a.highlightedSeries,\n      legendTitle = _a.legendTitle,\n      ariaLabel = _a.ariaLabel;\n\n  var _b = useState(false),\n      isFocused = _b[0],\n      setIsFocused = _b[1];\n\n  var containerRef = useRef(null);\n\n  var highlightLeft = function () {\n    var currentIndex = findSeriesIndex(series, highlightedSeries) || 0;\n    var nextIndex = currentIndex - 1 >= 0 ? currentIndex - 1 : series.length - 1;\n    onHighlightChange(series[nextIndex].datum);\n  };\n\n  var highlightRight = function () {\n    var currentIndex = findSeriesIndex(series, highlightedSeries) || 0;\n    var nextIndex = currentIndex + 1 < series.length ? currentIndex + 1 : 0;\n    onHighlightChange(series[nextIndex].datum);\n  };\n\n  var handleKeyPress = function (event) {\n    if (event.keyCode === KeyCode.right || event.keyCode === KeyCode.left) {\n      event.preventDefault();\n\n      switch (event.keyCode) {\n        case KeyCode.left:\n          return highlightLeft();\n\n        case KeyCode.right:\n          return highlightRight();\n\n        default:\n          return;\n      }\n    }\n  };\n\n  var handleFocus = function () {\n    setIsFocused(true);\n    onHighlightChange(highlightedSeries || series[0].datum);\n  };\n\n  var handleBlur = function (event) {\n    setIsFocused(false);\n\n    if (event.relatedTarget === null || !(event.relatedTarget instanceof Element) || containerRef.current && !containerRef.current.contains(event.relatedTarget)) {\n      onHighlightChange(null);\n    }\n  };\n\n  var handleMouseOver = function (s) {\n    if (s !== highlightedSeries) {\n      onHighlightChange(s);\n    }\n  };\n\n  var handleMouseLeave = function () {\n    onHighlightChange(null);\n  };\n\n  var highlightedSeriesLabel = findSeriesLabel(series, highlightedSeries);\n  return React.createElement(React.Fragment, null, React.createElement(\"div\", {\n    tabIndex: 0,\n    className: styles.root,\n    ref: containerRef,\n    role: \"application\",\n    \"aria-label\": legendTitle || ariaLabel,\n    onKeyDown: handleKeyPress,\n    onFocus: handleFocus,\n    onBlur: handleBlur\n  }, legendTitle && React.createElement(InternalBox, {\n    fontWeight: \"bold\",\n    className: styles.title\n  }, legendTitle), React.createElement(\"ul\", {\n    className: styles.list\n  }, series.map(function (s, index) {\n    var _a;\n\n    var someHighlighted = highlightedSeries !== null;\n    var isHighlighted = highlightedSeries === s.datum;\n    var isDimmed = someHighlighted && !isHighlighted;\n    return React.createElement(\"li\", {\n      key: index,\n      onMouseOver: handleMouseOver.bind(null, s.datum),\n      onMouseLeave: handleMouseLeave,\n      className: clsx(styles.marker, (_a = {}, _a[styles['marker--dimmed']] = isDimmed, _a[styles['marker--highlighted']] = isHighlighted, _a[styles['marker--focused']] = isHighlighted && isFocused, _a)),\n      \"aria-disabled\": isDimmed ? true : undefined\n    }, React.createElement(SeriesMarker, {\n      color: s.color,\n      type: s.type\n    }), \" \", s.label);\n  }))), React.createElement(LiveRegion, null, isFocused ? highlightedSeriesLabel : null));\n}\n\nfunction findSeriesIndex(series, targetSeries) {\n  for (var index = 0; index < series.length; index++) {\n    if (series[index].datum === targetSeries) {\n      return index;\n    }\n  }\n\n  return undefined;\n}\n\nfunction findSeriesLabel(series, targetSeries) {\n  for (var _i = 0, series_1 = series; _i < series_1.length; _i++) {\n    var s = series_1[_i];\n\n    if (s.datum === targetSeries) {\n      return s.label;\n    }\n  }\n\n  return null;\n}","map":{"version":3,"sources":["/Users/isingheg/Desktop/projects/amazonforvolunteers-ui/node_modules/@awsui/components-react/internal/components/chart-legend/index.js"],"names":["clsx","React","useRef","memo","useState","LiveRegion","InternalBox","KeyCode","SeriesMarker","styles","ChartLegend","_a","series","onHighlightChange","highlightedSeries","legendTitle","ariaLabel","_b","isFocused","setIsFocused","containerRef","highlightLeft","currentIndex","findSeriesIndex","nextIndex","length","datum","highlightRight","handleKeyPress","event","keyCode","right","left","preventDefault","handleFocus","handleBlur","relatedTarget","Element","current","contains","handleMouseOver","s","handleMouseLeave","highlightedSeriesLabel","findSeriesLabel","createElement","Fragment","tabIndex","className","root","ref","role","onKeyDown","onFocus","onBlur","fontWeight","title","list","map","index","someHighlighted","isHighlighted","isDimmed","key","onMouseOver","bind","onMouseLeave","marker","undefined","color","type","label","targetSeries","_i","series_1"],"mappings":"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","sourcesContent":["import clsx from 'clsx';\nimport React, { useRef, memo, useState } from 'react';\nimport LiveRegion from '../live-region';\nimport InternalBox from '../../../box/internal';\nimport { KeyCode } from '../../keycode';\nimport SeriesMarker from '../chart-series-marker';\nimport styles from './styles.css.js';\nexport default memo(ChartLegend);\nfunction ChartLegend(_a) {\n    var series = _a.series, onHighlightChange = _a.onHighlightChange, highlightedSeries = _a.highlightedSeries, legendTitle = _a.legendTitle, ariaLabel = _a.ariaLabel;\n    var _b = useState(false), isFocused = _b[0], setIsFocused = _b[1];\n    var containerRef = useRef(null);\n    var highlightLeft = function () {\n        var currentIndex = findSeriesIndex(series, highlightedSeries) || 0;\n        var nextIndex = currentIndex - 1 >= 0 ? currentIndex - 1 : series.length - 1;\n        onHighlightChange(series[nextIndex].datum);\n    };\n    var highlightRight = function () {\n        var currentIndex = findSeriesIndex(series, highlightedSeries) || 0;\n        var nextIndex = currentIndex + 1 < series.length ? currentIndex + 1 : 0;\n        onHighlightChange(series[nextIndex].datum);\n    };\n    var handleKeyPress = function (event) {\n        if (event.keyCode === KeyCode.right || event.keyCode === KeyCode.left) {\n            event.preventDefault();\n            switch (event.keyCode) {\n                case KeyCode.left:\n                    return highlightLeft();\n                case KeyCode.right:\n                    return highlightRight();\n                default:\n                    return;\n            }\n        }\n    };\n    var handleFocus = function () {\n        setIsFocused(true);\n        onHighlightChange(highlightedSeries || series[0].datum);\n    };\n    var handleBlur = function (event) {\n        setIsFocused(false);\n        if (event.relatedTarget === null ||\n            !(event.relatedTarget instanceof Element) ||\n            (containerRef.current && !containerRef.current.contains(event.relatedTarget))) {\n            onHighlightChange(null);\n        }\n    };\n    var handleMouseOver = function (s) {\n        if (s !== highlightedSeries) {\n            onHighlightChange(s);\n        }\n    };\n    var handleMouseLeave = function () {\n        onHighlightChange(null);\n    };\n    var highlightedSeriesLabel = findSeriesLabel(series, highlightedSeries);\n    return (React.createElement(React.Fragment, null,\n        React.createElement(\"div\", { tabIndex: 0, className: styles.root, ref: containerRef, role: \"application\", \"aria-label\": legendTitle || ariaLabel, onKeyDown: handleKeyPress, onFocus: handleFocus, onBlur: handleBlur },\n            legendTitle && (React.createElement(InternalBox, { fontWeight: \"bold\", className: styles.title }, legendTitle)),\n            React.createElement(\"ul\", { className: styles.list }, series.map(function (s, index) {\n                var _a;\n                var someHighlighted = highlightedSeries !== null;\n                var isHighlighted = highlightedSeries === s.datum;\n                var isDimmed = someHighlighted && !isHighlighted;\n                return (React.createElement(\"li\", { key: index, onMouseOver: handleMouseOver.bind(null, s.datum), onMouseLeave: handleMouseLeave, className: clsx(styles.marker, (_a = {},\n                        _a[styles['marker--dimmed']] = isDimmed,\n                        _a[styles['marker--highlighted']] = isHighlighted,\n                        _a[styles['marker--focused']] = isHighlighted && isFocused,\n                        _a)), \"aria-disabled\": isDimmed ? true : undefined },\n                    React.createElement(SeriesMarker, { color: s.color, type: s.type }),\n                    \" \",\n                    s.label));\n            }))),\n        React.createElement(LiveRegion, null, isFocused ? highlightedSeriesLabel : null)));\n}\nfunction findSeriesIndex(series, targetSeries) {\n    for (var index = 0; index < series.length; index++) {\n        if (series[index].datum === targetSeries) {\n            return index;\n        }\n    }\n    return undefined;\n}\nfunction findSeriesLabel(series, targetSeries) {\n    for (var _i = 0, series_1 = series; _i < series_1.length; _i++) {\n        var s = series_1[_i];\n        if (s.datum === targetSeries) {\n            return s.label;\n        }\n    }\n    return null;\n}\n"]},"metadata":{},"sourceType":"module"}