{"ast":null,"code":"import { __assign } from \"tslib\";\nimport React, { useRef, useState, useEffect } from 'react';\nimport clsx from 'clsx';\nimport styles from './styles.css.js';\nimport { InternalButton } from '../button/internal';\nimport useFocusVisible from '../internal/hooks/focus-visible';\nimport { useContainerQuery } from '../internal/hooks/container-queries';\nimport { KeyCode } from '../internal/keycode';\nimport { onPaginationClick, hasHorizontalOverflow, hasLeftOverflow, hasRightOverflow, scrollIntoView } from './scroll-utils';\nimport { isPlainLeftClick } from '../internal/events';\nimport { useVisualRefresh } from '../internal/hooks/use-visual-mode';\nexport function TabHeaderBar(_a) {\n  var _b, _c, _d;\n\n  var onChange = _a.onChange,\n      activeTabId = _a.activeTabId,\n      tabs = _a.tabs,\n      variant = _a.variant,\n      idNamespace = _a.idNamespace,\n      ariaLabel = _a.ariaLabel,\n      ariaLabelledby = _a.ariaLabelledby;\n  var focusVisible = useFocusVisible();\n  var headerBarRef = useRef(null);\n  var activeTabHeaderRef = useRef(null);\n  var leftOverflowButton = useRef(null);\n  var isVisualRefresh = useVisualRefresh(headerBarRef);\n\n  var _e = useContainerQuery(function (rect) {\n    return rect.width;\n  }),\n      widthChange = _e[0],\n      containerRef = _e[1];\n\n  var tabRefs = useRef(new Map());\n\n  var _f = useState(false),\n      horizontalOverflow = _f[0],\n      setHorizontalOverflow = _f[1];\n\n  var _g = useState(false),\n      leftOverflow = _g[0],\n      setLeftOverflow = _g[1];\n\n  var _h = useState(false),\n      rightOverflow = _h[0],\n      setRightOverflow = _h[1];\n\n  useEffect(function () {\n    if (headerBarRef.current) {\n      setHorizontalOverflow(hasHorizontalOverflow(headerBarRef.current, leftOverflowButton));\n      setLeftOverflow(hasLeftOverflow(headerBarRef.current));\n      setRightOverflow(hasRightOverflow(headerBarRef.current));\n    }\n  }, [widthChange, tabs]);\n\n  var scrollIntoViewIfPossible = function (smooth) {\n    if (!activeTabId) {\n      return;\n    }\n\n    var activeTabRef = tabRefs.current.get(activeTabId);\n\n    if (activeTabRef && headerBarRef.current) {\n      scrollIntoView(activeTabRef, headerBarRef.current, smooth);\n    }\n  };\n\n  useEffect(function () {\n    scrollIntoViewIfPossible(false);\n  }, [horizontalOverflow, widthChange, tabs.length]);\n  useEffect(function () {\n    scrollIntoViewIfPossible(true);\n  }, [activeTabId]);\n  useEffect(function () {\n    var _a, _b;\n\n    if ((_a = headerBarRef.current) === null || _a === void 0 ? void 0 : _a.contains(document.activeElement)) {\n      if (document.activeElement !== activeTabHeaderRef.current) {\n        (_b = activeTabHeaderRef.current) === null || _b === void 0 ? void 0 : _b.focus({\n          preventScroll: true\n        });\n      }\n    }\n  }, [activeTabId]);\n\n  var onScroll = function () {\n    if (headerBarRef.current) {\n      setLeftOverflow(hasLeftOverflow(headerBarRef.current));\n      setRightOverflow(hasRightOverflow(headerBarRef.current));\n    }\n  };\n\n  var classes = clsx((_b = {}, _b[styles['tabs-header']] = true, _b[styles['tabs-header-with-divider']] = variant === 'default' || isVisualRefresh, _b));\n  var leftButtonClasses = clsx((_c = {}, _c[styles['pagination-button']] = true, _c[styles['pagination-button-left']] = true, _c[styles['pagination-button-left-scrollable']] = leftOverflow, _c));\n  var rightButtonClasses = clsx((_d = {}, _d[styles['pagination-button']] = true, _d[styles['pagination-button-right']] = true, _d[styles['pagination-button-right-scrollable']] = rightOverflow, _d));\n  var paginationButtonAttributes = {\n    'aria-hidden': true,\n    tabIndex: -1\n  };\n  return React.createElement(\"span\", {\n    className: classes,\n    ref: containerRef\n  }, horizontalOverflow && React.createElement(\"span\", {\n    ref: leftOverflowButton,\n    className: leftButtonClasses\n  }, React.createElement(InternalButton, {\n    variant: \"icon\",\n    iconName: \"angle-left\",\n    __nativeAttributes: paginationButtonAttributes,\n    disabled: !leftOverflow,\n    onClick: function () {\n      return onPaginationClick(headerBarRef, -1);\n    }\n  })), React.createElement(\"ul\", {\n    role: \"tablist\",\n    className: styles['tabs-header-list'],\n    \"aria-label\": ariaLabel,\n    \"aria-labelledby\": ariaLabelledby,\n    ref: headerBarRef,\n    onScroll: onScroll\n  }, tabs.map(renderTabHeader)), horizontalOverflow && React.createElement(\"span\", {\n    className: rightButtonClasses\n  }, React.createElement(InternalButton, {\n    variant: \"icon\",\n    iconName: \"angle-right\",\n    __nativeAttributes: paginationButtonAttributes,\n    disabled: !rightOverflow,\n    onClick: function () {\n      return onPaginationClick(headerBarRef, 1);\n    }\n  })));\n\n  function renderTabHeader(tab) {\n    var _a;\n\n    var enabledTabsWithCurrentTab = tabs.filter(function (tab) {\n      return !tab.disabled || tab.id === activeTabId;\n    });\n\n    var highlightTab = function (enabledTabIndex) {\n      var tab = enabledTabsWithCurrentTab[enabledTabIndex];\n\n      if (tab.id === activeTabId) {\n        return;\n      }\n\n      onChange({\n        activeTabId: tab.id,\n        activeTabHref: tab.href\n      });\n    };\n\n    var handleKeyDown = function (event) {\n      var keyCode = event.keyCode;\n      var specialKeys = [KeyCode.right, KeyCode.left, KeyCode.end, KeyCode.home, KeyCode.pageUp, KeyCode.pageDown];\n\n      if (specialKeys.indexOf(keyCode) === -1) {\n        return;\n      }\n\n      event.preventDefault();\n      var activeIndex = enabledTabsWithCurrentTab.indexOf(tab);\n\n      switch (keyCode) {\n        case KeyCode.right:\n          if (activeIndex + 1 === enabledTabsWithCurrentTab.length) {\n            highlightTab(0);\n          } else {\n            highlightTab(activeIndex + 1);\n          }\n\n          return;\n\n        case KeyCode.left:\n          if (activeIndex === 0) {\n            highlightTab(enabledTabsWithCurrentTab.length - 1);\n          } else {\n            highlightTab(activeIndex - 1);\n          }\n\n          return;\n\n        case KeyCode.end:\n          highlightTab(enabledTabsWithCurrentTab.length - 1);\n          return;\n\n        case KeyCode.home:\n          highlightTab(0);\n          return;\n\n        case KeyCode.pageDown:\n          if (rightOverflow) {\n            onPaginationClick(headerBarRef, 1);\n          }\n\n          return;\n\n        case KeyCode.pageUp:\n          if (leftOverflow) {\n            onPaginationClick(headerBarRef, -1);\n          }\n\n          return;\n      }\n    };\n\n    var clickTab = function (event) {\n      if (tab.disabled) {\n        event.preventDefault();\n        return;\n      }\n\n      var specialKey = !isPlainLeftClick(event);\n\n      if (specialKey && tab.href) {\n        return;\n      }\n\n      event.preventDefault();\n\n      if (!tab.href) {\n        var clickedTabRef = tabRefs.current.get(tab.id);\n\n        if (clickedTabRef) {\n          var childElement = clickedTabRef.firstChild;\n\n          if (childElement && childElement !== document.activeElement) {\n            childElement.focus({\n              preventScroll: true\n            });\n          }\n        }\n      }\n\n      if (tab.id === activeTabId) {\n        return;\n      }\n\n      onChange({\n        activeTabId: tab.id,\n        activeTabHref: tab.href\n      });\n    };\n\n    var classes = clsx((_a = {}, _a[styles['tabs-tab-link']] = true, _a[styles['tabs-tab-active']] = activeTabId === tab.id && !tab.disabled, _a[styles['tabs-tab-disabled']] = tab.disabled, _a));\n\n    var commonProps = __assign(__assign({\n      className: classes\n    }, focusVisible), {\n      role: 'tab',\n      'aria-selected': tab.id === activeTabId,\n      'aria-controls': idNamespace + \"-\" + tab.id + \"-panel\",\n      'data-testid': tab.id,\n      children: React.createElement(\"span\", {\n        className: styles['tabs-tab-label']\n      }, tab.label)\n    });\n\n    if (tab.disabled) {\n      commonProps['aria-disabled'] = 'true';\n    } else {\n      commonProps.onClick = clickTab;\n    }\n\n    if (tab.id === activeTabId) {\n      commonProps.ref = activeTabHeaderRef;\n      commonProps.tabIndex = 0;\n\n      commonProps.onKeyDown = function (event) {\n        return handleKeyDown(event);\n      };\n    } else {\n      commonProps.tabIndex = -1;\n    }\n\n    var trigger = null;\n\n    if (tab.href) {\n      var anchorProps = commonProps;\n      anchorProps.href = tab.href;\n      trigger = React.createElement(\"a\", __assign({}, anchorProps));\n    } else {\n      var buttonProps = commonProps;\n      buttonProps.type = 'button';\n\n      if (tab.disabled) {\n        buttonProps.disabled = true;\n      }\n\n      trigger = React.createElement(\"button\", __assign({}, buttonProps));\n    }\n\n    return React.createElement(\"li\", {\n      ref: function (element) {\n        return tabRefs.current.set(tab.id, element);\n      },\n      className: styles['tabs-tab'],\n      role: \"presentation\",\n      key: tab.id\n    }, trigger);\n  }\n}","map":{"version":3,"sources":["/Users/isingheg/Desktop/projects/amazonforvolunteers-ui/node_modules/@awsui/components-react/tabs/tab-header-bar.js"],"names":["__assign","React","useRef","useState","useEffect","clsx","styles","InternalButton","useFocusVisible","useContainerQuery","KeyCode","onPaginationClick","hasHorizontalOverflow","hasLeftOverflow","hasRightOverflow","scrollIntoView","isPlainLeftClick","useVisualRefresh","TabHeaderBar","_a","_b","_c","_d","onChange","activeTabId","tabs","variant","idNamespace","ariaLabel","ariaLabelledby","focusVisible","headerBarRef","activeTabHeaderRef","leftOverflowButton","isVisualRefresh","_e","rect","width","widthChange","containerRef","tabRefs","Map","_f","horizontalOverflow","setHorizontalOverflow","_g","leftOverflow","setLeftOverflow","_h","rightOverflow","setRightOverflow","current","scrollIntoViewIfPossible","smooth","activeTabRef","get","length","contains","document","activeElement","focus","preventScroll","onScroll","classes","leftButtonClasses","rightButtonClasses","paginationButtonAttributes","tabIndex","createElement","className","ref","iconName","__nativeAttributes","disabled","onClick","role","map","renderTabHeader","tab","enabledTabsWithCurrentTab","filter","id","highlightTab","enabledTabIndex","activeTabHref","href","handleKeyDown","event","keyCode","specialKeys","right","left","end","home","pageUp","pageDown","indexOf","preventDefault","activeIndex","clickTab","specialKey","clickedTabRef","childElement","firstChild","commonProps","children","label","onKeyDown","trigger","anchorProps","buttonProps","type","element","set","key"],"mappings":"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","sourcesContent":["import { __assign } from \"tslib\";\nimport React, { useRef, useState, useEffect } from 'react';\nimport clsx from 'clsx';\nimport styles from './styles.css.js';\nimport { InternalButton } from '../button/internal';\nimport useFocusVisible from '../internal/hooks/focus-visible';\nimport { useContainerQuery } from '../internal/hooks/container-queries';\nimport { KeyCode } from '../internal/keycode';\nimport { onPaginationClick, hasHorizontalOverflow, hasLeftOverflow, hasRightOverflow, scrollIntoView, } from './scroll-utils';\nimport { isPlainLeftClick } from '../internal/events';\nimport { useVisualRefresh } from '../internal/hooks/use-visual-mode';\nexport function TabHeaderBar(_a) {\n    var _b, _c, _d;\n    var onChange = _a.onChange, activeTabId = _a.activeTabId, tabs = _a.tabs, variant = _a.variant, idNamespace = _a.idNamespace, ariaLabel = _a.ariaLabel, ariaLabelledby = _a.ariaLabelledby;\n    var focusVisible = useFocusVisible();\n    var headerBarRef = useRef(null);\n    var activeTabHeaderRef = useRef(null);\n    var leftOverflowButton = useRef(null);\n    var isVisualRefresh = useVisualRefresh(headerBarRef);\n    var _e = useContainerQuery(function (rect) { return rect.width; }), widthChange = _e[0], containerRef = _e[1];\n    var tabRefs = useRef(new Map());\n    var _f = useState(false), horizontalOverflow = _f[0], setHorizontalOverflow = _f[1];\n    var _g = useState(false), leftOverflow = _g[0], setLeftOverflow = _g[1];\n    var _h = useState(false), rightOverflow = _h[0], setRightOverflow = _h[1];\n    useEffect(function () {\n        if (headerBarRef.current) {\n            setHorizontalOverflow(hasHorizontalOverflow(headerBarRef.current, leftOverflowButton));\n            setLeftOverflow(hasLeftOverflow(headerBarRef.current));\n            setRightOverflow(hasRightOverflow(headerBarRef.current));\n        }\n    }, [widthChange, tabs]);\n    var scrollIntoViewIfPossible = function (smooth) {\n        if (!activeTabId) {\n            return;\n        }\n        var activeTabRef = tabRefs.current.get(activeTabId);\n        if (activeTabRef && headerBarRef.current) {\n            scrollIntoView(activeTabRef, headerBarRef.current, smooth);\n        }\n    };\n    useEffect(function () {\n        scrollIntoViewIfPossible(false);\n    }, [horizontalOverflow, widthChange, tabs.length]);\n    useEffect(function () {\n        scrollIntoViewIfPossible(true);\n    }, [activeTabId]);\n    useEffect(function () {\n        var _a, _b;\n        if ((_a = headerBarRef.current) === null || _a === void 0 ? void 0 : _a.contains(document.activeElement)) {\n            if (document.activeElement !== activeTabHeaderRef.current) {\n                (_b = activeTabHeaderRef.current) === null || _b === void 0 ? void 0 : _b.focus({ preventScroll: true });\n            }\n        }\n    }, [activeTabId]);\n    var onScroll = function () {\n        if (headerBarRef.current) {\n            setLeftOverflow(hasLeftOverflow(headerBarRef.current));\n            setRightOverflow(hasRightOverflow(headerBarRef.current));\n        }\n    };\n    var classes = clsx((_b = {},\n        _b[styles['tabs-header']] = true,\n        _b[styles['tabs-header-with-divider']] = variant === 'default' || isVisualRefresh,\n        _b));\n    var leftButtonClasses = clsx((_c = {},\n        _c[styles['pagination-button']] = true,\n        _c[styles['pagination-button-left']] = true,\n        _c[styles['pagination-button-left-scrollable']] = leftOverflow,\n        _c));\n    var rightButtonClasses = clsx((_d = {},\n        _d[styles['pagination-button']] = true,\n        _d[styles['pagination-button-right']] = true,\n        _d[styles['pagination-button-right-scrollable']] = rightOverflow,\n        _d));\n    var paginationButtonAttributes = {\n        'aria-hidden': true,\n        tabIndex: -1\n    };\n    return (React.createElement(\"span\", { className: classes, ref: containerRef },\n        horizontalOverflow && (React.createElement(\"span\", { ref: leftOverflowButton, className: leftButtonClasses },\n            React.createElement(InternalButton, { variant: \"icon\", iconName: \"angle-left\", __nativeAttributes: paginationButtonAttributes, disabled: !leftOverflow, onClick: function () { return onPaginationClick(headerBarRef, -1); } }))),\n        React.createElement(\"ul\", { role: \"tablist\", className: styles['tabs-header-list'], \"aria-label\": ariaLabel, \"aria-labelledby\": ariaLabelledby, ref: headerBarRef, onScroll: onScroll }, tabs.map(renderTabHeader)),\n        horizontalOverflow && (React.createElement(\"span\", { className: rightButtonClasses },\n            React.createElement(InternalButton, { variant: \"icon\", iconName: \"angle-right\", __nativeAttributes: paginationButtonAttributes, disabled: !rightOverflow, onClick: function () { return onPaginationClick(headerBarRef, 1); } })))));\n    function renderTabHeader(tab) {\n        var _a;\n        var enabledTabsWithCurrentTab = tabs.filter(function (tab) { return !tab.disabled || tab.id === activeTabId; });\n        var highlightTab = function (enabledTabIndex) {\n            var tab = enabledTabsWithCurrentTab[enabledTabIndex];\n            if (tab.id === activeTabId) {\n                return;\n            }\n            onChange({ activeTabId: tab.id, activeTabHref: tab.href });\n        };\n        var handleKeyDown = function (event) {\n            var keyCode = event.keyCode;\n            var specialKeys = [KeyCode.right, KeyCode.left, KeyCode.end, KeyCode.home, KeyCode.pageUp, KeyCode.pageDown];\n            if (specialKeys.indexOf(keyCode) === -1) {\n                return;\n            }\n            event.preventDefault();\n            var activeIndex = enabledTabsWithCurrentTab.indexOf(tab);\n            switch (keyCode) {\n                case KeyCode.right:\n                    if (activeIndex + 1 === enabledTabsWithCurrentTab.length) {\n                        highlightTab(0);\n                    }\n                    else {\n                        highlightTab(activeIndex + 1);\n                    }\n                    return;\n                case KeyCode.left:\n                    if (activeIndex === 0) {\n                        highlightTab(enabledTabsWithCurrentTab.length - 1);\n                    }\n                    else {\n                        highlightTab(activeIndex - 1);\n                    }\n                    return;\n                case KeyCode.end:\n                    highlightTab(enabledTabsWithCurrentTab.length - 1);\n                    return;\n                case KeyCode.home:\n                    highlightTab(0);\n                    return;\n                case KeyCode.pageDown:\n                    if (rightOverflow) {\n                        onPaginationClick(headerBarRef, 1);\n                    }\n                    return;\n                case KeyCode.pageUp:\n                    if (leftOverflow) {\n                        onPaginationClick(headerBarRef, -1);\n                    }\n                    return;\n            }\n        };\n        var clickTab = function (event) {\n            if (tab.disabled) {\n                event.preventDefault();\n                return;\n            }\n            var specialKey = !isPlainLeftClick(event);\n            if (specialKey && tab.href) {\n                return;\n            }\n            event.preventDefault();\n            if (!tab.href) {\n                var clickedTabRef = tabRefs.current.get(tab.id);\n                if (clickedTabRef) {\n                    var childElement = clickedTabRef.firstChild;\n                    if (childElement && childElement !== document.activeElement) {\n                        childElement.focus({ preventScroll: true });\n                    }\n                }\n            }\n            if (tab.id === activeTabId) {\n                return;\n            }\n            onChange({ activeTabId: tab.id, activeTabHref: tab.href });\n        };\n        var classes = clsx((_a = {},\n            _a[styles['tabs-tab-link']] = true,\n            _a[styles['tabs-tab-active']] = activeTabId === tab.id && !tab.disabled,\n            _a[styles['tabs-tab-disabled']] = tab.disabled,\n            _a));\n        var commonProps = __assign(__assign({ className: classes }, focusVisible), { role: 'tab', 'aria-selected': tab.id === activeTabId, 'aria-controls': idNamespace + \"-\" + tab.id + \"-panel\", 'data-testid': tab.id, children: React.createElement(\"span\", { className: styles['tabs-tab-label'] }, tab.label) });\n        if (tab.disabled) {\n            commonProps['aria-disabled'] = 'true';\n        }\n        else {\n            commonProps.onClick = clickTab;\n        }\n        if (tab.id === activeTabId) {\n            commonProps.ref = activeTabHeaderRef;\n            commonProps.tabIndex = 0;\n            commonProps.onKeyDown = function (event) { return handleKeyDown(event); };\n        }\n        else {\n            commonProps.tabIndex = -1;\n        }\n        var trigger = null;\n        if (tab.href) {\n            var anchorProps = commonProps;\n            anchorProps.href = tab.href;\n            trigger = React.createElement(\"a\", __assign({}, anchorProps));\n        }\n        else {\n            var buttonProps = commonProps;\n            buttonProps.type = 'button';\n            if (tab.disabled) {\n                buttonProps.disabled = true;\n            }\n            trigger = React.createElement(\"button\", __assign({}, buttonProps));\n        }\n        return (React.createElement(\"li\", { ref: function (element) { return tabRefs.current.set(tab.id, element); }, className: styles['tabs-tab'], role: \"presentation\", key: tab.id }, trigger));\n    }\n}\n"]},"metadata":{},"sourceType":"module"}