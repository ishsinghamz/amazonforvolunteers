{"ast":null,"code":"import { __assign, __rest } from \"tslib\";\nimport React, { useState, useRef, useEffect } from 'react';\nimport clsx from 'clsx';\nimport styles from './styles.css.js';\nimport Dropdown from '../internal/components/dropdown';\nimport { useDropdownStatus } from '../internal/components/dropdown-status';\nimport Filter from './parts/filter';\nimport Trigger from './parts/trigger';\nimport LiveRegion from '../internal/components/live-region';\nimport { getBaseProps } from '../internal/base-component';\nimport { prepareOptions } from '../internal/components/option/utils/prepare-options';\nimport { useSelect } from './utils/use-select';\nimport { checkOptionValueField } from './utils/check-option-value-field';\nimport { useNativeSearch } from './utils/use-native-search';\nimport { fireNonCancelableEvent } from '../internal/events';\nimport { useLoadItems } from './utils/use-load-items';\nimport { useAnnouncement } from './utils/use-announcement';\nimport { useFormFieldContext } from '../internal/context/form-field-context';\nimport PlainList from './parts/plain-list';\nimport VirtualList from './parts/virtual-list';\nimport DropdownFooter from '../internal/components/dropdown-footer';\nimport checkControlled from '../internal/hooks/check-controlled';\nimport mergeRefs from 'react-merge-refs';\nvar InternalSelect = React.forwardRef(function (_a, externalRef) {\n  var _b = _a.options,\n      options = _b === void 0 ? [] : _b,\n      _c = _a.filteringType,\n      filteringType = _c === void 0 ? 'none' : _c,\n      filteringPlaceholder = _a.filteringPlaceholder,\n      filteringAriaLabel = _a.filteringAriaLabel,\n      ariaRequired = _a.ariaRequired,\n      placeholder = _a.placeholder,\n      disabled = _a.disabled,\n      ariaLabel = _a.ariaLabel,\n      _d = _a.statusType,\n      statusType = _d === void 0 ? 'finished' : _d,\n      empty = _a.empty,\n      loadingText = _a.loadingText,\n      finishedText = _a.finishedText,\n      errorText = _a.errorText,\n      recoveryText = _a.recoveryText,\n      noMatch = _a.noMatch,\n      _e = _a.triggerVariant,\n      triggerVariant = _e === void 0 ? 'label' : _e,\n      selectedAriaLabel = _a.selectedAriaLabel,\n      renderHighlightedAriaLive = _a.renderHighlightedAriaLive,\n      selectedOption = _a.selectedOption,\n      onBlur = _a.onBlur,\n      onFocus = _a.onFocus,\n      onLoadItems = _a.onLoadItems,\n      onChange = _a.onChange,\n      virtualScroll = _a.virtualScroll,\n      expandToViewport = _a.expandToViewport,\n      __inFilteringToken = _a.__inFilteringToken,\n      _f = _a.__internalRootRef,\n      __internalRootRef = _f === void 0 ? null : _f,\n      restProps = __rest(_a, [\"options\", \"filteringType\", \"filteringPlaceholder\", \"filteringAriaLabel\", \"ariaRequired\", \"placeholder\", \"disabled\", \"ariaLabel\", \"statusType\", \"empty\", \"loadingText\", \"finishedText\", \"errorText\", \"recoveryText\", \"noMatch\", \"triggerVariant\", \"selectedAriaLabel\", \"renderHighlightedAriaLive\", \"selectedOption\", \"onBlur\", \"onFocus\", \"onLoadItems\", \"onChange\", \"virtualScroll\", \"expandToViewport\", \"__inFilteringToken\", \"__internalRootRef\"]);\n\n  var baseProps = getBaseProps(restProps);\n  var formFieldContext = useFormFieldContext(restProps);\n\n  var _g = useLoadItems({\n    onLoadItems: onLoadItems,\n    options: options,\n    statusType: statusType\n  }),\n      handleLoadMore = _g.handleLoadMore,\n      handleRecoveryClick = _g.handleRecoveryClick,\n      fireLoadItems = _g.fireLoadItems;\n\n  checkControlled('Select', 'selectedOption', selectedOption, 'onChange', onChange);\n  checkOptionValueField('Select', 'options', options);\n\n  var _h = useState(''),\n      filteringValue = _h[0],\n      setFilteringValue = _h[1];\n\n  var _j = prepareOptions(options, filteringType, filteringValue),\n      filteredOptions = _j.filteredOptions,\n      parentMap = _j.parentMap;\n\n  var rootRef = useRef(null);\n  var triggerRef = useRef(null);\n  var scrollToIndex = useRef(null);\n\n  var _k = useSelect({\n    selectedOptions: selectedOption ? [selectedOption] : [],\n    updateSelectedOption: function (option) {\n      return fireNonCancelableEvent(onChange, {\n        selectedOption: option\n      });\n    },\n    options: filteredOptions,\n    filteringType: filteringType,\n    onBlur: onBlur,\n    onFocus: onFocus,\n    externalRef: externalRef,\n    fireLoadItems: fireLoadItems,\n    setFilteringValue: setFilteringValue\n  }),\n      isOpen = _k.isOpen,\n      highlightedOption = _k.highlightedOption,\n      highlightedIndex = _k.highlightedIndex,\n      getTriggerProps = _k.getTriggerProps,\n      getFilterProps = _k.getFilterProps,\n      getMenuProps = _k.getMenuProps,\n      getOptionProps = _k.getOptionProps,\n      isKeyboard = _k.isKeyboard,\n      highlightOption = _k.highlightOption,\n      selectOption = _k.selectOption,\n      announceSelected = _k.announceSelected;\n\n  var handleNativeSearch = useNativeSearch({\n    isEnabled: filteringType === 'none',\n    options: filteredOptions,\n    highlightOption: !isOpen ? selectOption : highlightOption,\n    highlightedOption: !isOpen ? selectedOption : highlightedOption === null || highlightedOption === void 0 ? void 0 : highlightedOption.option,\n    isKeyboard: isKeyboard\n  });\n  useEffect(function () {\n    var _a;\n\n    (_a = scrollToIndex.current) === null || _a === void 0 ? void 0 : _a.call(scrollToIndex, highlightedIndex);\n  }, [highlightedIndex]);\n  var filter = React.createElement(Filter, __assign({\n    filteringType: filteringType,\n    placeholder: filteringPlaceholder,\n    ariaLabel: filteringAriaLabel,\n    ariaRequired: ariaRequired,\n    value: filteringValue\n  }, getFilterProps()));\n  var trigger = React.createElement(Trigger, __assign({\n    ref: triggerRef,\n    placeholder: placeholder,\n    disabled: disabled,\n    ariaLabel: ariaLabel,\n    triggerVariant: triggerVariant,\n    triggerProps: getTriggerProps(disabled),\n    selectedOption: selectedOption,\n    isOpen: isOpen,\n    inFilteringToken: __inFilteringToken\n  }, formFieldContext));\n\n  var menuProps = __assign(__assign({}, getMenuProps()), {\n    onLoadMore: handleLoadMore\n  });\n\n  var isEmpty = !options || options.length === 0;\n  var isNoMatch = filteredOptions && filteredOptions.length === 0;\n  var dropdownStatus = useDropdownStatus({\n    statusType: statusType,\n    empty: empty,\n    loadingText: loadingText,\n    finishedText: finishedText,\n    errorText: errorText,\n    recoveryText: recoveryText,\n    isEmpty: isEmpty,\n    isNoMatch: isNoMatch,\n    noMatch: noMatch,\n    onRecoveryClick: handleRecoveryClick\n  });\n  var announcement = useAnnouncement({\n    announceSelected: announceSelected,\n    highlightedOption: highlightedOption,\n    parentMap: parentMap,\n    selectedAriaLabel: selectedAriaLabel,\n    renderHighlightedAriaLive: renderHighlightedAriaLive\n  });\n  var ListComponent = virtualScroll ? VirtualList : PlainList;\n\n  var handleMouseDown = function (event) {\n    var target = event.target;\n\n    if (target !== document.activeElement) {\n      event.preventDefault();\n    }\n  };\n\n  return React.createElement(\"div\", __assign({}, baseProps, {\n    ref: mergeRefs([rootRef, __internalRootRef]),\n    className: clsx(styles.root, baseProps.className),\n    onKeyPress: handleNativeSearch\n  }), React.createElement(Dropdown, {\n    open: isOpen,\n    stretchTriggerHeight: __inFilteringToken,\n    trigger: trigger,\n    header: filter,\n    onMouseDown: handleMouseDown,\n    footer: dropdownStatus.isSticky ? React.createElement(DropdownFooter, {\n      content: dropdownStatus.content\n    }) : null,\n    expandToViewport: expandToViewport\n  }, React.createElement(ListComponent, {\n    listBottom: !dropdownStatus.isSticky ? React.createElement(DropdownFooter, {\n      content: dropdownStatus.content\n    }) : null,\n    menuProps: menuProps,\n    getOptionProps: getOptionProps,\n    filteredOptions: filteredOptions,\n    filteringValue: filteringValue,\n    isKeyboard: isKeyboard.current,\n    ref: scrollToIndex,\n    hasDropdownStatus: dropdownStatus.content !== null\n  })), React.createElement(LiveRegion, {\n    assertive: true\n  }, announcement));\n});\nexport default InternalSelect;","map":{"version":3,"sources":["/Users/isingheg/Desktop/projects/test-react-amplify/node_modules/@awsui/components-react/select/internal.js"],"names":["__assign","__rest","React","useState","useRef","useEffect","clsx","styles","Dropdown","useDropdownStatus","Filter","Trigger","LiveRegion","getBaseProps","prepareOptions","useSelect","checkOptionValueField","useNativeSearch","fireNonCancelableEvent","useLoadItems","useAnnouncement","useFormFieldContext","PlainList","VirtualList","DropdownFooter","checkControlled","mergeRefs","InternalSelect","forwardRef","_a","externalRef","_b","options","_c","filteringType","filteringPlaceholder","filteringAriaLabel","ariaRequired","placeholder","disabled","ariaLabel","_d","statusType","empty","loadingText","finishedText","errorText","recoveryText","noMatch","_e","triggerVariant","selectedAriaLabel","renderHighlightedAriaLive","selectedOption","onBlur","onFocus","onLoadItems","onChange","virtualScroll","expandToViewport","__inFilteringToken","_f","__internalRootRef","restProps","baseProps","formFieldContext","_g","handleLoadMore","handleRecoveryClick","fireLoadItems","_h","filteringValue","setFilteringValue","_j","filteredOptions","parentMap","rootRef","triggerRef","scrollToIndex","_k","selectedOptions","updateSelectedOption","option","isOpen","highlightedOption","highlightedIndex","getTriggerProps","getFilterProps","getMenuProps","getOptionProps","isKeyboard","highlightOption","selectOption","announceSelected","handleNativeSearch","isEnabled","current","call","filter","createElement","value","trigger","ref","triggerProps","inFilteringToken","menuProps","onLoadMore","isEmpty","length","isNoMatch","dropdownStatus","onRecoveryClick","announcement","ListComponent","handleMouseDown","event","target","document","activeElement","preventDefault","className","root","onKeyPress","open","stretchTriggerHeight","header","onMouseDown","footer","isSticky","content","listBottom","hasDropdownStatus","assertive"],"mappings":"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","sourcesContent":["import { __assign, __rest } from \"tslib\";\nimport React, { useState, useRef, useEffect } from 'react';\nimport clsx from 'clsx';\nimport styles from './styles.css.js';\nimport Dropdown from '../internal/components/dropdown';\nimport { useDropdownStatus } from '../internal/components/dropdown-status';\nimport Filter from './parts/filter';\nimport Trigger from './parts/trigger';\nimport LiveRegion from '../internal/components/live-region';\nimport { getBaseProps } from '../internal/base-component';\nimport { prepareOptions } from '../internal/components/option/utils/prepare-options';\nimport { useSelect } from './utils/use-select';\nimport { checkOptionValueField } from './utils/check-option-value-field';\nimport { useNativeSearch } from './utils/use-native-search';\nimport { fireNonCancelableEvent } from '../internal/events';\nimport { useLoadItems } from './utils/use-load-items';\nimport { useAnnouncement } from './utils/use-announcement';\nimport { useFormFieldContext } from '../internal/context/form-field-context';\nimport PlainList from './parts/plain-list';\nimport VirtualList from './parts/virtual-list';\nimport DropdownFooter from '../internal/components/dropdown-footer';\nimport checkControlled from '../internal/hooks/check-controlled';\nimport mergeRefs from 'react-merge-refs';\nvar InternalSelect = React.forwardRef(function (_a, externalRef) {\n    var _b = _a.options, options = _b === void 0 ? [] : _b, _c = _a.filteringType, filteringType = _c === void 0 ? 'none' : _c, filteringPlaceholder = _a.filteringPlaceholder, filteringAriaLabel = _a.filteringAriaLabel, ariaRequired = _a.ariaRequired, placeholder = _a.placeholder, disabled = _a.disabled, ariaLabel = _a.ariaLabel, _d = _a.statusType, statusType = _d === void 0 ? 'finished' : _d, empty = _a.empty, loadingText = _a.loadingText, finishedText = _a.finishedText, errorText = _a.errorText, recoveryText = _a.recoveryText, noMatch = _a.noMatch, _e = _a.triggerVariant, triggerVariant = _e === void 0 ? 'label' : _e, selectedAriaLabel = _a.selectedAriaLabel, renderHighlightedAriaLive = _a.renderHighlightedAriaLive, selectedOption = _a.selectedOption, onBlur = _a.onBlur, onFocus = _a.onFocus, onLoadItems = _a.onLoadItems, onChange = _a.onChange, virtualScroll = _a.virtualScroll, expandToViewport = _a.expandToViewport, __inFilteringToken = _a.__inFilteringToken, _f = _a.__internalRootRef, __internalRootRef = _f === void 0 ? null : _f, restProps = __rest(_a, [\"options\", \"filteringType\", \"filteringPlaceholder\", \"filteringAriaLabel\", \"ariaRequired\", \"placeholder\", \"disabled\", \"ariaLabel\", \"statusType\", \"empty\", \"loadingText\", \"finishedText\", \"errorText\", \"recoveryText\", \"noMatch\", \"triggerVariant\", \"selectedAriaLabel\", \"renderHighlightedAriaLive\", \"selectedOption\", \"onBlur\", \"onFocus\", \"onLoadItems\", \"onChange\", \"virtualScroll\", \"expandToViewport\", \"__inFilteringToken\", \"__internalRootRef\"]);\n    var baseProps = getBaseProps(restProps);\n    var formFieldContext = useFormFieldContext(restProps);\n    var _g = useLoadItems({\n        onLoadItems: onLoadItems,\n        options: options,\n        statusType: statusType\n    }), handleLoadMore = _g.handleLoadMore, handleRecoveryClick = _g.handleRecoveryClick, fireLoadItems = _g.fireLoadItems;\n    checkControlled('Select', 'selectedOption', selectedOption, 'onChange', onChange);\n    checkOptionValueField('Select', 'options', options);\n    var _h = useState(''), filteringValue = _h[0], setFilteringValue = _h[1];\n    var _j = prepareOptions(options, filteringType, filteringValue), filteredOptions = _j.filteredOptions, parentMap = _j.parentMap;\n    var rootRef = useRef(null);\n    var triggerRef = useRef(null);\n    var scrollToIndex = useRef(null);\n    var _k = useSelect({\n        selectedOptions: selectedOption ? [selectedOption] : [],\n        updateSelectedOption: function (option) { return fireNonCancelableEvent(onChange, { selectedOption: option }); },\n        options: filteredOptions,\n        filteringType: filteringType,\n        onBlur: onBlur,\n        onFocus: onFocus,\n        externalRef: externalRef,\n        fireLoadItems: fireLoadItems,\n        setFilteringValue: setFilteringValue\n    }), isOpen = _k.isOpen, highlightedOption = _k.highlightedOption, highlightedIndex = _k.highlightedIndex, getTriggerProps = _k.getTriggerProps, getFilterProps = _k.getFilterProps, getMenuProps = _k.getMenuProps, getOptionProps = _k.getOptionProps, isKeyboard = _k.isKeyboard, highlightOption = _k.highlightOption, selectOption = _k.selectOption, announceSelected = _k.announceSelected;\n    var handleNativeSearch = useNativeSearch({\n        isEnabled: filteringType === 'none',\n        options: filteredOptions,\n        highlightOption: !isOpen ? selectOption : highlightOption,\n        highlightedOption: !isOpen ? selectedOption : highlightedOption === null || highlightedOption === void 0 ? void 0 : highlightedOption.option,\n        isKeyboard: isKeyboard\n    });\n    useEffect(function () {\n        var _a;\n        (_a = scrollToIndex.current) === null || _a === void 0 ? void 0 : _a.call(scrollToIndex, highlightedIndex);\n    }, [highlightedIndex]);\n    var filter = (React.createElement(Filter, __assign({ filteringType: filteringType, placeholder: filteringPlaceholder, ariaLabel: filteringAriaLabel, ariaRequired: ariaRequired, value: filteringValue }, getFilterProps())));\n    var trigger = (React.createElement(Trigger, __assign({ ref: triggerRef, placeholder: placeholder, disabled: disabled, ariaLabel: ariaLabel, triggerVariant: triggerVariant, triggerProps: getTriggerProps(disabled), selectedOption: selectedOption, isOpen: isOpen, inFilteringToken: __inFilteringToken }, formFieldContext)));\n    var menuProps = __assign(__assign({}, getMenuProps()), { onLoadMore: handleLoadMore });\n    var isEmpty = !options || options.length === 0;\n    var isNoMatch = filteredOptions && filteredOptions.length === 0;\n    var dropdownStatus = useDropdownStatus({\n        statusType: statusType,\n        empty: empty,\n        loadingText: loadingText,\n        finishedText: finishedText,\n        errorText: errorText,\n        recoveryText: recoveryText,\n        isEmpty: isEmpty,\n        isNoMatch: isNoMatch,\n        noMatch: noMatch,\n        onRecoveryClick: handleRecoveryClick\n    });\n    var announcement = useAnnouncement({\n        announceSelected: announceSelected,\n        highlightedOption: highlightedOption,\n        parentMap: parentMap,\n        selectedAriaLabel: selectedAriaLabel,\n        renderHighlightedAriaLive: renderHighlightedAriaLive\n    });\n    var ListComponent = virtualScroll ? VirtualList : PlainList;\n    var handleMouseDown = function (event) {\n        var target = event.target;\n        if (target !== document.activeElement) {\n            event.preventDefault();\n        }\n    };\n    return (React.createElement(\"div\", __assign({}, baseProps, { ref: mergeRefs([rootRef, __internalRootRef]), className: clsx(styles.root, baseProps.className), onKeyPress: handleNativeSearch }),\n        React.createElement(Dropdown, { open: isOpen, stretchTriggerHeight: __inFilteringToken, trigger: trigger, header: filter, onMouseDown: handleMouseDown, footer: dropdownStatus.isSticky ? React.createElement(DropdownFooter, { content: dropdownStatus.content }) : null, expandToViewport: expandToViewport },\n            React.createElement(ListComponent, { listBottom: !dropdownStatus.isSticky ? React.createElement(DropdownFooter, { content: dropdownStatus.content }) : null, menuProps: menuProps, getOptionProps: getOptionProps, filteredOptions: filteredOptions, filteringValue: filteringValue, isKeyboard: isKeyboard.current, ref: scrollToIndex, hasDropdownStatus: dropdownStatus.content !== null })),\n        React.createElement(LiveRegion, { assertive: true }, announcement)));\n});\nexport default InternalSelect;\n"]},"metadata":{},"sourceType":"module"}