{"ast":null,"code":"import { ResizeObserver } from '@juggle/resize-observer';\nimport { useEffect, useState } from 'react';\nimport styles from './styles.css.js';\nimport { getOverflowParentDimensions } from '../internal/utils/scrollable-containers';\nimport { browserScrollbarSize } from '../internal/utils/browser-scrollbar-size';\nimport { supportsStickyPosition, getContainingBlock } from '../internal/utils/dom';\n\nvar updatePosition = function (tableEl, wrapperEl, scrollbarEl, scrollbarContentEl, hasContainingBlock, consideredFooterHeight) {\n  if (!tableEl || !scrollbarEl || !wrapperEl) {\n    return;\n  }\n\n  var parent = getOverflowParentDimensions(wrapperEl)[0];\n  var parentBottom = parent.top + parent.height;\n\n  var _a = tableEl.getBoundingClientRect(),\n      tableTop = _a.top,\n      tableBottom = _a.bottom,\n      tableWidth = _a.width;\n\n  var wrapperWidth = wrapperEl.getBoundingClientRect().width;\n  var scrollbarHeight = browserScrollbarSize().height;\n  var scrollBarCorrection = scrollbarHeight > 0 ? scrollbarHeight : -15 / 2;\n  var tableBottomIsVisible = parentBottom - consideredFooterHeight >= tableBottom + scrollBarCorrection;\n  var tableTopIsHidden = tableTop >= parentBottom - consideredFooterHeight - scrollBarCorrection;\n  var areaIsScrollable = tableWidth > wrapperWidth;\n\n  if (tableBottomIsVisible || tableTopIsHidden || !areaIsScrollable) {\n    scrollbarEl.classList.remove(styles['sticky-scrollbar-visible']);\n  } else {\n    if (!scrollbarEl.classList.contains(styles['sticky-scrollbar-visible'])) {\n      requestAnimationFrame(function () {\n        scrollbarEl.scrollLeft = wrapperEl.scrollLeft;\n      });\n    }\n\n    scrollbarEl.classList.add(styles['sticky-scrollbar-visible']);\n  }\n\n  if (scrollbarHeight && scrollbarEl && scrollbarContentEl) {\n    scrollbarEl.style.height = scrollbarHeight + \"px\";\n    scrollbarContentEl.style.height = scrollbarHeight + \"px\";\n  }\n\n  if (tableEl && wrapperEl && scrollbarContentEl && scrollbarEl) {\n    var parent_1 = getOverflowParentDimensions(wrapperEl)[0];\n    var wrapperElRect = wrapperEl.getBoundingClientRect();\n    var tableElRect = tableEl.getBoundingClientRect();\n    scrollbarEl.style.width = wrapperElRect.width + \"px\";\n    scrollbarContentEl.style.width = tableElRect.width + \"px\";\n    scrollbarEl.style.left = hasContainingBlock ? '0px' : wrapperElRect.left + \"px\";\n    scrollbarEl.style.top = hasContainingBlock ? '0px' : Math.min(parent_1.top + parent_1.height, window.innerHeight - consideredFooterHeight) + \"px\";\n  }\n};\n\nexport function useStickyScrollbar(scrollbarRef, scrollbarContentRef, tableRef, wrapperRef, footerHeight) {\n  var _a = useState(false),\n      hasContainingBlock = _a[0],\n      setHasContainingBlock = _a[1];\n\n  var consideredFooterHeight = hasContainingBlock ? 0 : footerHeight;\n  useEffect(function () {\n    if (supportsStickyPosition()) {\n      var scrollHandler_1 = function () {\n        updatePosition(tableRef.current, wrapperRef.current, scrollbarRef.current, scrollbarContentRef.current, hasContainingBlock, consideredFooterHeight);\n      };\n\n      scrollHandler_1();\n      window.addEventListener('scroll', scrollHandler_1, true);\n      return function () {\n        window.removeEventListener('scroll', scrollHandler_1, true);\n      };\n    }\n  }, [scrollbarRef, tableRef, wrapperRef, consideredFooterHeight, scrollbarContentRef, hasContainingBlock]);\n  var wrapperEl = wrapperRef.current;\n  useEffect(function () {\n    if (wrapperEl && supportsStickyPosition()) {\n      setHasContainingBlock(!!getContainingBlock(wrapperEl));\n    }\n  }, [wrapperEl]);\n  useEffect(function () {\n    if (supportsStickyPosition() && tableRef.current) {\n      var observer_1 = new ResizeObserver(function (entries) {\n        if (scrollbarContentRef.current) {\n          scrollbarContentRef.current.style.width = entries[0].borderBoxSize[0].inlineSize + \"px\";\n          updatePosition(tableRef.current, wrapperRef.current, scrollbarRef.current, scrollbarContentRef.current, hasContainingBlock, consideredFooterHeight);\n        }\n      });\n      observer_1.observe(tableRef.current);\n      return function () {\n        observer_1.disconnect();\n      };\n    }\n  }, [scrollbarContentRef, scrollbarRef, tableRef, wrapperRef, consideredFooterHeight, hasContainingBlock]);\n  useEffect(function () {\n    if (supportsStickyPosition()) {\n      var resizeHandler_1 = function () {\n        updatePosition(tableRef.current, wrapperRef.current, scrollbarRef.current, scrollbarContentRef.current, hasContainingBlock, consideredFooterHeight);\n      };\n\n      window.addEventListener('resize', resizeHandler_1);\n      return function () {\n        window.removeEventListener('resize', resizeHandler_1);\n      };\n    }\n  }, [tableRef, wrapperRef, scrollbarRef, scrollbarContentRef, hasContainingBlock, consideredFooterHeight]);\n}","map":{"version":3,"sources":["/Users/isingheg/Desktop/projects/amazonforvolunteers-ui/node_modules/@awsui/components-react/table/use-sticky-scrollbar.js"],"names":["ResizeObserver","useEffect","useState","styles","getOverflowParentDimensions","browserScrollbarSize","supportsStickyPosition","getContainingBlock","updatePosition","tableEl","wrapperEl","scrollbarEl","scrollbarContentEl","hasContainingBlock","consideredFooterHeight","parent","parentBottom","top","height","_a","getBoundingClientRect","tableTop","tableBottom","bottom","tableWidth","width","wrapperWidth","scrollbarHeight","scrollBarCorrection","tableBottomIsVisible","tableTopIsHidden","areaIsScrollable","classList","remove","contains","requestAnimationFrame","scrollLeft","add","style","parent_1","wrapperElRect","tableElRect","left","Math","min","window","innerHeight","useStickyScrollbar","scrollbarRef","scrollbarContentRef","tableRef","wrapperRef","footerHeight","setHasContainingBlock","scrollHandler_1","current","addEventListener","removeEventListener","observer_1","entries","borderBoxSize","inlineSize","observe","disconnect","resizeHandler_1"],"mappings":"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","sourcesContent":["import { ResizeObserver } from '@juggle/resize-observer';\nimport { useEffect, useState } from 'react';\nimport styles from './styles.css.js';\nimport { getOverflowParentDimensions } from '../internal/utils/scrollable-containers';\nimport { browserScrollbarSize } from '../internal/utils/browser-scrollbar-size';\nimport { supportsStickyPosition, getContainingBlock } from '../internal/utils/dom';\nvar updatePosition = function (tableEl, wrapperEl, scrollbarEl, scrollbarContentEl, hasContainingBlock, consideredFooterHeight) {\n    if (!tableEl || !scrollbarEl || !wrapperEl) {\n        return;\n    }\n    var parent = getOverflowParentDimensions(wrapperEl)[0];\n    var parentBottom = parent.top + parent.height;\n    var _a = tableEl.getBoundingClientRect(), tableTop = _a.top, tableBottom = _a.bottom, tableWidth = _a.width;\n    var wrapperWidth = wrapperEl.getBoundingClientRect().width;\n    var scrollbarHeight = browserScrollbarSize().height;\n    var scrollBarCorrection = scrollbarHeight > 0 ? scrollbarHeight : -15 / 2;\n    var tableBottomIsVisible = parentBottom - consideredFooterHeight >= tableBottom + scrollBarCorrection;\n    var tableTopIsHidden = tableTop >= parentBottom - consideredFooterHeight - scrollBarCorrection;\n    var areaIsScrollable = tableWidth > wrapperWidth;\n    if (tableBottomIsVisible || tableTopIsHidden || !areaIsScrollable) {\n        scrollbarEl.classList.remove(styles['sticky-scrollbar-visible']);\n    }\n    else {\n        if (!scrollbarEl.classList.contains(styles['sticky-scrollbar-visible'])) {\n            requestAnimationFrame(function () {\n                scrollbarEl.scrollLeft = wrapperEl.scrollLeft;\n            });\n        }\n        scrollbarEl.classList.add(styles['sticky-scrollbar-visible']);\n    }\n    if (scrollbarHeight && scrollbarEl && scrollbarContentEl) {\n        scrollbarEl.style.height = scrollbarHeight + \"px\";\n        scrollbarContentEl.style.height = scrollbarHeight + \"px\";\n    }\n    if (tableEl && wrapperEl && scrollbarContentEl && scrollbarEl) {\n        var parent_1 = getOverflowParentDimensions(wrapperEl)[0];\n        var wrapperElRect = wrapperEl.getBoundingClientRect();\n        var tableElRect = tableEl.getBoundingClientRect();\n        scrollbarEl.style.width = wrapperElRect.width + \"px\";\n        scrollbarContentEl.style.width = tableElRect.width + \"px\";\n        scrollbarEl.style.left = hasContainingBlock ? '0px' : wrapperElRect.left + \"px\";\n        scrollbarEl.style.top = hasContainingBlock\n            ? '0px'\n            : Math.min(parent_1.top + parent_1.height, window.innerHeight - consideredFooterHeight) + \"px\";\n    }\n};\nexport function useStickyScrollbar(scrollbarRef, scrollbarContentRef, tableRef, wrapperRef, footerHeight) {\n    var _a = useState(false), hasContainingBlock = _a[0], setHasContainingBlock = _a[1];\n    var consideredFooterHeight = hasContainingBlock ? 0 : footerHeight;\n    useEffect(function () {\n        if (supportsStickyPosition()) {\n            var scrollHandler_1 = function () {\n                updatePosition(tableRef.current, wrapperRef.current, scrollbarRef.current, scrollbarContentRef.current, hasContainingBlock, consideredFooterHeight);\n            };\n            scrollHandler_1();\n            window.addEventListener('scroll', scrollHandler_1, true);\n            return function () {\n                window.removeEventListener('scroll', scrollHandler_1, true);\n            };\n        }\n    }, [scrollbarRef, tableRef, wrapperRef, consideredFooterHeight, scrollbarContentRef, hasContainingBlock]);\n    var wrapperEl = wrapperRef.current;\n    useEffect(function () {\n        if (wrapperEl && supportsStickyPosition()) {\n            setHasContainingBlock(!!getContainingBlock(wrapperEl));\n        }\n    }, [wrapperEl]);\n    useEffect(function () {\n        if (supportsStickyPosition() && tableRef.current) {\n            var observer_1 = new ResizeObserver(function (entries) {\n                if (scrollbarContentRef.current) {\n                    scrollbarContentRef.current.style.width = entries[0].borderBoxSize[0].inlineSize + \"px\";\n                    updatePosition(tableRef.current, wrapperRef.current, scrollbarRef.current, scrollbarContentRef.current, hasContainingBlock, consideredFooterHeight);\n                }\n            });\n            observer_1.observe(tableRef.current);\n            return function () {\n                observer_1.disconnect();\n            };\n        }\n    }, [scrollbarContentRef, scrollbarRef, tableRef, wrapperRef, consideredFooterHeight, hasContainingBlock]);\n    useEffect(function () {\n        if (supportsStickyPosition()) {\n            var resizeHandler_1 = function () {\n                updatePosition(tableRef.current, wrapperRef.current, scrollbarRef.current, scrollbarContentRef.current, hasContainingBlock, consideredFooterHeight);\n            };\n            window.addEventListener('resize', resizeHandler_1);\n            return function () {\n                window.removeEventListener('resize', resizeHandler_1);\n            };\n        }\n    }, [tableRef, wrapperRef, scrollbarRef, scrollbarContentRef, hasContainingBlock, consideredFooterHeight]);\n}\n"]},"metadata":{},"sourceType":"module"}