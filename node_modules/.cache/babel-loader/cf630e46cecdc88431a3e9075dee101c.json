{"ast":null,"code":"import { __assign } from \"tslib\";\nimport React, { useState, useEffect, useRef } from 'react';\nimport InternalBox from '../../box/internal';\nimport { InternalButton } from '../../button/internal';\nimport InternalFormField from '../../form-field/internal';\nimport InternalSelect from '../../select/internal';\nimport InternalStatusIndicator from '../../status-indicator/internal';\nimport useForwardFocus from '../../internal/hooks/forward-focus';\nimport { useVersionsFetch } from './use-versions-fetch';\nimport { validate, getErrorText } from './validation';\nimport styles from './styles.css.js';\nimport { SearchInput } from './search-input';\nexport var S3InContext = React.forwardRef(function (_a, ref) {\n  var i18nStrings = _a.i18nStrings,\n      resource = _a.resource,\n      viewHref = _a.viewHref,\n      invalid = _a.invalid,\n      inputAriaDescribedby = _a.inputAriaDescribedby,\n      selectableItemsTypes = _a.selectableItemsTypes,\n      fetchVersions = _a.fetchVersions,\n      onChange = _a.onChange,\n      onBrowse = _a.onBrowse;\n  var isInputBlurredRef = useRef(true);\n\n  var _b = useState(false),\n      isInputTouched = _b[0],\n      setInputTouched = _b[1];\n\n  var _c = useVersionsFetch(fetchVersions),\n      versions = _c.versions,\n      loading = _c.loading,\n      loadVersions = _c.loadVersions,\n      resetVersions = _c.resetVersions;\n\n  var inputRef = useRef(null);\n  useForwardFocus(ref, inputRef);\n  var uri = resource.uri;\n  var supportsVersions = selectableItemsTypes && selectableItemsTypes.indexOf('versions') > -1;\n  var selectedVersion = versions.filter(function (version) {\n    return version.value === resource.versionId;\n  })[0] || null;\n\n  function handleUriChange(event) {\n    var uri = event.detail.value;\n    var errorCode = isInputTouched ? validate(uri) : undefined;\n    resetVersions();\n    onChange({\n      uri: uri\n    }, getErrorText(i18nStrings, errorCode));\n  }\n\n  function handleUriBlur() {\n    isInputBlurredRef.current = true;\n    setInputTouched(true);\n    var errorCode = validate(resource.uri);\n    onChange(resource, getErrorText(i18nStrings, errorCode));\n\n    if (supportsVersions) {\n      loadVersions(resource.uri);\n    }\n  }\n\n  useEffect(function () {\n    var _a;\n\n    if (!isInputBlurredRef.current || !supportsVersions) {\n      return;\n    }\n\n    var cancel = ((_a = loadVersions(uri)) !== null && _a !== void 0 ? _a : {}).cancel;\n    return cancel;\n  }, [uri, supportsVersions, loadVersions]);\n  return React.createElement(\"div\", {\n    className: styles.root\n  }, React.createElement(\"div\", {\n    className: styles.layout\n  }, React.createElement(InternalFormField, {\n    className: styles['layout-uri'],\n    label: i18nStrings === null || i18nStrings === void 0 ? void 0 : i18nStrings.inContextUriLabel,\n    stretch: true\n  }, React.createElement(SearchInput, {\n    ref: inputRef,\n    value: uri,\n    ariaDescribedby: inputAriaDescribedby,\n    placeholder: i18nStrings === null || i18nStrings === void 0 ? void 0 : i18nStrings.inContextInputPlaceholder,\n    onChange: handleUriChange,\n    invalid: invalid,\n    onFocus: function () {\n      return isInputBlurredRef.current = false;\n    },\n    onBlur: handleUriBlur\n  })), supportsVersions && React.createElement(InternalFormField, {\n    className: styles['layout-version'],\n    label: i18nStrings === null || i18nStrings === void 0 ? void 0 : i18nStrings.inContextVersionSelectLabel,\n    stretch: true\n  }, React.createElement(InternalSelect, {\n    selectedOption: selectedVersion,\n    placeholder: i18nStrings === null || i18nStrings === void 0 ? void 0 : i18nStrings.inContextSelectPlaceholder,\n    disabled: versions.length === 0,\n    options: versions,\n    onChange: function (event) {\n      return onChange(__assign(__assign({}, resource), {\n        versionId: event.detail.selectedOption.value\n      }), undefined);\n    },\n    invalid: false\n  })), React.createElement(\"div\", null, React.createElement(InternalButton, {\n    className: styles['view-button'],\n    disabled: !viewHref,\n    href: viewHref,\n    target: \"_blank\",\n    iconName: \"external\",\n    iconAlign: \"right\",\n    formAction: \"none\"\n  }, i18nStrings === null || i18nStrings === void 0 ? void 0 : i18nStrings.inContextViewButton)), React.createElement(\"div\", {\n    className: styles['layout-divider']\n  }), React.createElement(\"div\", null, React.createElement(InternalButton, {\n    className: styles['browse-button'],\n    disabled: loading,\n    formAction: \"none\",\n    onClick: onBrowse\n  }, i18nStrings === null || i18nStrings === void 0 ? void 0 : i18nStrings.inContextBrowseButton))), React.createElement(\"div\", {\n    role: \"alert\",\n    \"aria-live\": \"assertive\",\n    \"aria-atomic\": \"true\"\n  }, loading && React.createElement(InternalBox, {\n    margin: {\n      top: 's'\n    }\n  }, React.createElement(InternalStatusIndicator, {\n    type: \"loading\"\n  }, i18nStrings === null || i18nStrings === void 0 ? void 0 : i18nStrings.inContextLoadingText))));\n});","map":{"version":3,"sources":["/Users/isingheg/Desktop/projects/test-react-amplify/node_modules/@awsui/components-react/s3-resource-selector/s3-in-context/index.js"],"names":["__assign","React","useState","useEffect","useRef","InternalBox","InternalButton","InternalFormField","InternalSelect","InternalStatusIndicator","useForwardFocus","useVersionsFetch","validate","getErrorText","styles","SearchInput","S3InContext","forwardRef","_a","ref","i18nStrings","resource","viewHref","invalid","inputAriaDescribedby","selectableItemsTypes","fetchVersions","onChange","onBrowse","isInputBlurredRef","_b","isInputTouched","setInputTouched","_c","versions","loading","loadVersions","resetVersions","inputRef","uri","supportsVersions","indexOf","selectedVersion","filter","version","value","versionId","handleUriChange","event","detail","errorCode","undefined","handleUriBlur","current","cancel","createElement","className","root","layout","label","inContextUriLabel","stretch","ariaDescribedby","placeholder","inContextInputPlaceholder","onFocus","onBlur","inContextVersionSelectLabel","selectedOption","inContextSelectPlaceholder","disabled","length","options","href","target","iconName","iconAlign","formAction","inContextViewButton","onClick","inContextBrowseButton","role","margin","top","type","inContextLoadingText"],"mappings":"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","sourcesContent":["import { __assign } from \"tslib\";\nimport React, { useState, useEffect, useRef } from 'react';\nimport InternalBox from '../../box/internal';\nimport { InternalButton } from '../../button/internal';\nimport InternalFormField from '../../form-field/internal';\nimport InternalSelect from '../../select/internal';\nimport InternalStatusIndicator from '../../status-indicator/internal';\nimport useForwardFocus from '../../internal/hooks/forward-focus';\nimport { useVersionsFetch } from './use-versions-fetch';\nimport { validate, getErrorText } from './validation';\nimport styles from './styles.css.js';\nimport { SearchInput } from './search-input';\nexport var S3InContext = React.forwardRef(function (_a, ref) {\n    var i18nStrings = _a.i18nStrings, resource = _a.resource, viewHref = _a.viewHref, invalid = _a.invalid, inputAriaDescribedby = _a.inputAriaDescribedby, selectableItemsTypes = _a.selectableItemsTypes, fetchVersions = _a.fetchVersions, onChange = _a.onChange, onBrowse = _a.onBrowse;\n    var isInputBlurredRef = useRef(true);\n    var _b = useState(false), isInputTouched = _b[0], setInputTouched = _b[1];\n    var _c = useVersionsFetch(fetchVersions), versions = _c.versions, loading = _c.loading, loadVersions = _c.loadVersions, resetVersions = _c.resetVersions;\n    var inputRef = useRef(null);\n    useForwardFocus(ref, inputRef);\n    var uri = resource.uri;\n    var supportsVersions = selectableItemsTypes && selectableItemsTypes.indexOf('versions') > -1;\n    var selectedVersion = versions.filter(function (version) { return version.value === resource.versionId; })[0] || null;\n    function handleUriChange(event) {\n        var uri = event.detail.value;\n        var errorCode = isInputTouched ? validate(uri) : undefined;\n        resetVersions();\n        onChange({ uri: uri }, getErrorText(i18nStrings, errorCode));\n    }\n    function handleUriBlur() {\n        isInputBlurredRef.current = true;\n        setInputTouched(true);\n        var errorCode = validate(resource.uri);\n        onChange(resource, getErrorText(i18nStrings, errorCode));\n        if (supportsVersions) {\n            loadVersions(resource.uri);\n        }\n    }\n    useEffect(function () {\n        var _a;\n        if (!isInputBlurredRef.current || !supportsVersions) {\n            return;\n        }\n        var cancel = ((_a = loadVersions(uri)) !== null && _a !== void 0 ? _a : {}).cancel;\n        return cancel;\n    }, [uri, supportsVersions, loadVersions]);\n    return (React.createElement(\"div\", { className: styles.root },\n        React.createElement(\"div\", { className: styles.layout },\n            React.createElement(InternalFormField, { className: styles['layout-uri'], label: i18nStrings === null || i18nStrings === void 0 ? void 0 : i18nStrings.inContextUriLabel, stretch: true },\n                React.createElement(SearchInput, { ref: inputRef, value: uri, ariaDescribedby: inputAriaDescribedby, placeholder: i18nStrings === null || i18nStrings === void 0 ? void 0 : i18nStrings.inContextInputPlaceholder, onChange: handleUriChange, invalid: invalid, onFocus: function () { return (isInputBlurredRef.current = false); }, onBlur: handleUriBlur })),\n            supportsVersions && (React.createElement(InternalFormField, { className: styles['layout-version'], label: i18nStrings === null || i18nStrings === void 0 ? void 0 : i18nStrings.inContextVersionSelectLabel, stretch: true },\n                React.createElement(InternalSelect, { selectedOption: selectedVersion, placeholder: i18nStrings === null || i18nStrings === void 0 ? void 0 : i18nStrings.inContextSelectPlaceholder, disabled: versions.length === 0, options: versions, onChange: function (event) { return onChange(__assign(__assign({}, resource), { versionId: event.detail.selectedOption.value }), undefined); }, invalid: false }))),\n            React.createElement(\"div\", null,\n                React.createElement(InternalButton, { className: styles['view-button'], disabled: !viewHref, href: viewHref, target: \"_blank\", iconName: \"external\", iconAlign: \"right\", formAction: \"none\" }, i18nStrings === null || i18nStrings === void 0 ? void 0 : i18nStrings.inContextViewButton)),\n            React.createElement(\"div\", { className: styles['layout-divider'] }),\n            React.createElement(\"div\", null,\n                React.createElement(InternalButton, { className: styles['browse-button'], disabled: loading, formAction: \"none\", onClick: onBrowse }, i18nStrings === null || i18nStrings === void 0 ? void 0 : i18nStrings.inContextBrowseButton))),\n        React.createElement(\"div\", { role: \"alert\", \"aria-live\": \"assertive\", \"aria-atomic\": \"true\" }, loading && (React.createElement(InternalBox, { margin: { top: 's' } },\n            React.createElement(InternalStatusIndicator, { type: \"loading\" }, i18nStrings === null || i18nStrings === void 0 ? void 0 : i18nStrings.inContextLoadingText))))));\n});\n"]},"metadata":{},"sourceType":"module"}