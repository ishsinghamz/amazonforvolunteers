{"ast":null,"code":"import { __assign } from \"tslib\";\nimport React, { useEffect, useRef, useState } from 'react';\nimport Calendar from './calendar';\nimport { InternalButton } from '../button/internal';\nimport TabTrap from '../date-picker/tab-trap';\nimport InternalBox from '../box/internal';\nimport SpaceBetween from '../space-between/index.js';\nimport styles from './styles.css.js';\nimport RelativeRangePicker from './relative-range';\nimport ModeSwitcher from './mode-switcher';\nimport clsx from 'clsx';\nimport InternalAlert from '../alert/internal';\nimport LiveRegion from '../internal/components/live-region';\nvar VALID_RANGE = {\n  valid: true\n};\n\nfunction fillMissingTime(value) {\n  if (!value) {\n    return value;\n  }\n\n  var _a = value.startDate.split('T'),\n      startDate = _a[0],\n      startTime = _a[1];\n\n  var _b = value.endDate.split('T'),\n      endDate = _b[0],\n      endTime = _b[1];\n\n  return __assign(__assign({}, value), {\n    startDate: startTime ? value.startDate : startDate + \"T00:00:00\",\n    endDate: endTime ? value.endDate : endDate + \"T23:59:59\"\n  });\n}\n\nfunction getDefaultMode(value, relativeOptions, rangeSelectorMode) {\n  if (value && value.type) {\n    return value.type;\n  }\n\n  if (rangeSelectorMode === 'relative-only') {\n    return 'relative';\n  }\n\n  if (rangeSelectorMode === 'absolute-only') {\n    return 'absolute';\n  }\n\n  return relativeOptions.length > 0 ? 'relative' : 'absolute';\n}\n\nexport function DateRangePickerDropdown(_a) {\n  var _b, _c;\n\n  var _d = _a.locale,\n      locale = _d === void 0 ? '' : _d,\n      startOfWeek = _a.startOfWeek,\n      isDateEnabled = _a.isDateEnabled,\n      isValidRange = _a.isValidRange,\n      value = _a.value,\n      clearValue = _a.onClear,\n      applyValue = _a.onApply,\n      onDropdownClose = _a.onDropdownClose,\n      relativeOptions = _a.relativeOptions,\n      showClearButton = _a.showClearButton,\n      isSingleGrid = _a.isSingleGrid,\n      i18nStrings = _a.i18nStrings,\n      dateOnly = _a.dateOnly,\n      timeInputFormat = _a.timeInputFormat,\n      rangeSelectorMode = _a.rangeSelectorMode;\n  var applyButtonRef = useRef(null);\n\n  var _e = useState(getDefaultMode(value, relativeOptions, rangeSelectorMode)),\n      rangeSelectionMode = _e[0],\n      setRangeSelectionMode = _e[1];\n\n  var _f = useState((value === null || value === void 0 ? void 0 : value.type) === 'absolute' ? value : null),\n      selectedAbsoluteRange = _f[0],\n      setSelectedAbsoluteRange = _f[1];\n\n  var _g = useState((value === null || value === void 0 ? void 0 : value.type) === 'relative' ? value : null),\n      selectedRelativeRange = _g[0],\n      setSelectedRelativeRange = _g[1];\n\n  var _h = useState(false),\n      applyClicked = _h[0],\n      setApplyClicked = _h[1];\n\n  var _j = useState(VALID_RANGE),\n      validationResult = _j[0],\n      setValidationResult = _j[1];\n\n  var closeDropdown = function () {\n    setApplyClicked(false);\n    onDropdownClose();\n  };\n\n  var onClear = function () {\n    closeDropdown();\n    clearValue();\n  };\n\n  var onApply = function () {\n    var newValue = rangeSelectionMode === 'relative' ? selectedRelativeRange : fillMissingTime(selectedAbsoluteRange);\n    var newValidationResult = applyValue(newValue);\n\n    if (newValidationResult.valid === false) {\n      setApplyClicked(true);\n      setValidationResult(newValidationResult);\n    } else {\n      setApplyClicked(false);\n      closeDropdown();\n    }\n  };\n\n  useEffect(function () {\n    if (applyClicked) {\n      var visibleRange = rangeSelectionMode === 'relative' ? selectedRelativeRange : fillMissingTime(selectedAbsoluteRange);\n      var newValidationResult = isValidRange(visibleRange);\n      setValidationResult(newValidationResult || VALID_RANGE);\n    }\n  }, [applyClicked, isValidRange, rangeSelectionMode, selectedRelativeRange, selectedAbsoluteRange]);\n  var focusRefs = {\n    \"default\": useRef(null),\n    'absolute-only': useRef(null),\n    'relative-only': useRef(null)\n  };\n  var selectedFocusRef = focusRefs[rangeSelectorMode];\n  useEffect(function () {\n    var _a;\n\n    return (_a = selectedFocusRef.current) === null || _a === void 0 ? void 0 : _a.focus();\n  }, [selectedFocusRef]);\n  return React.createElement(\"div\", {\n    className: clsx(styles.dropdown, (_b = {}, _b[styles['one-grid']] = isSingleGrid, _b))\n  }, React.createElement(TabTrap, {\n    focusNextCallback: function () {\n      var _a;\n\n      return (_a = applyButtonRef.current) === null || _a === void 0 ? void 0 : _a.focus();\n    }\n  }), React.createElement(SpaceBetween, {\n    size: \"l\"\n  }, React.createElement(InternalBox, {\n    padding: {\n      top: 'm',\n      horizontal: 'l'\n    }\n  }, React.createElement(SpaceBetween, {\n    direction: \"vertical\",\n    size: \"s\"\n  }, rangeSelectorMode === 'default' && React.createElement(ModeSwitcher, {\n    ref: focusRefs[\"default\"],\n    mode: rangeSelectionMode,\n    onChange: function (mode) {\n      setRangeSelectionMode(mode);\n      setApplyClicked(false);\n      setValidationResult(VALID_RANGE);\n    },\n    i18nStrings: i18nStrings\n  }), rangeSelectionMode === 'absolute' && React.createElement(Calendar, {\n    ref: focusRefs['absolute-only'],\n    isSingleGrid: isSingleGrid,\n    initialEndDate: selectedAbsoluteRange === null || selectedAbsoluteRange === void 0 ? void 0 : selectedAbsoluteRange.endDate,\n    initialStartDate: selectedAbsoluteRange === null || selectedAbsoluteRange === void 0 ? void 0 : selectedAbsoluteRange.startDate,\n    locale: locale,\n    startOfWeek: startOfWeek,\n    isDateEnabled: isDateEnabled,\n    i18nStrings: i18nStrings,\n    onSelectDateRange: setSelectedAbsoluteRange,\n    dateOnly: dateOnly,\n    timeInputFormat: timeInputFormat\n  }), rangeSelectionMode === 'relative' && React.createElement(RelativeRangePicker, {\n    ref: focusRefs['relative-only'],\n    isSingleGrid: isSingleGrid,\n    options: relativeOptions,\n    initialSelection: selectedRelativeRange,\n    onChange: function (range) {\n      return setSelectedRelativeRange(range);\n    },\n    i18nStrings: i18nStrings\n  })), React.createElement(InternalBox, {\n    className: styles['validation-section'],\n    margin: !validationResult.valid ? {\n      top: 's'\n    } : undefined\n  }, !validationResult.valid && React.createElement(React.Fragment, null, React.createElement(InternalAlert, {\n    type: \"error\"\n  }, React.createElement(\"span\", {\n    className: styles['validation-error']\n  }, validationResult.errorMessage)), React.createElement(LiveRegion, null, validationResult.errorMessage)))), React.createElement(\"div\", {\n    className: clsx(styles.footer, (_c = {}, _c[styles['one-grid']] = isSingleGrid, _c[styles['has-clear-button']] = showClearButton, _c))\n  }, showClearButton && React.createElement(\"div\", {\n    className: styles['footer-button-wrapper']\n  }, React.createElement(InternalButton, {\n    onClick: onClear,\n    className: styles['clear-button'],\n    variant: \"link\",\n    formAction: \"none\"\n  }, i18nStrings.clearButtonLabel)), React.createElement(\"div\", {\n    className: styles['footer-button-wrapper']\n  }, React.createElement(SpaceBetween, {\n    size: \"xs\",\n    direction: \"horizontal\"\n  }, React.createElement(InternalButton, {\n    onClick: closeDropdown,\n    className: styles['cancel-button'],\n    variant: \"link\",\n    formAction: \"none\"\n  }, i18nStrings.cancelButtonLabel), React.createElement(InternalButton, {\n    onClick: onApply,\n    className: styles['apply-button'],\n    ref: applyButtonRef,\n    formAction: \"none\"\n  }, i18nStrings.applyButtonLabel))))), React.createElement(TabTrap, {\n    focusNextCallback: function () {\n      var _a;\n\n      return (_a = selectedFocusRef.current) === null || _a === void 0 ? void 0 : _a.focus();\n    }\n  }));\n}","map":{"version":3,"sources":["/Users/isingheg/Desktop/projects/test-react-amplify/node_modules/@awsui/components-react/date-range-picker/dropdown.js"],"names":["__assign","React","useEffect","useRef","useState","Calendar","InternalButton","TabTrap","InternalBox","SpaceBetween","styles","RelativeRangePicker","ModeSwitcher","clsx","InternalAlert","LiveRegion","VALID_RANGE","valid","fillMissingTime","value","_a","startDate","split","startTime","_b","endDate","endTime","getDefaultMode","relativeOptions","rangeSelectorMode","type","length","DateRangePickerDropdown","_c","_d","locale","startOfWeek","isDateEnabled","isValidRange","clearValue","onClear","applyValue","onApply","onDropdownClose","showClearButton","isSingleGrid","i18nStrings","dateOnly","timeInputFormat","applyButtonRef","_e","rangeSelectionMode","setRangeSelectionMode","_f","selectedAbsoluteRange","setSelectedAbsoluteRange","_g","selectedRelativeRange","setSelectedRelativeRange","_h","applyClicked","setApplyClicked","_j","validationResult","setValidationResult","closeDropdown","newValue","newValidationResult","visibleRange","focusRefs","selectedFocusRef","current","focus","createElement","className","dropdown","focusNextCallback","size","padding","top","horizontal","direction","ref","mode","onChange","initialEndDate","initialStartDate","onSelectDateRange","options","initialSelection","range","margin","undefined","Fragment","errorMessage","footer","onClick","variant","formAction","clearButtonLabel","cancelButtonLabel","applyButtonLabel"],"mappings":"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","sourcesContent":["import { __assign } from \"tslib\";\nimport React, { useEffect, useRef, useState } from 'react';\nimport Calendar from './calendar';\nimport { InternalButton } from '../button/internal';\nimport TabTrap from '../date-picker/tab-trap';\nimport InternalBox from '../box/internal';\nimport SpaceBetween from '../space-between/index.js';\nimport styles from './styles.css.js';\nimport RelativeRangePicker from './relative-range';\nimport ModeSwitcher from './mode-switcher';\nimport clsx from 'clsx';\nimport InternalAlert from '../alert/internal';\nimport LiveRegion from '../internal/components/live-region';\nvar VALID_RANGE = { valid: true };\nfunction fillMissingTime(value) {\n    if (!value) {\n        return value;\n    }\n    var _a = value.startDate.split('T'), startDate = _a[0], startTime = _a[1];\n    var _b = value.endDate.split('T'), endDate = _b[0], endTime = _b[1];\n    return __assign(__assign({}, value), { startDate: startTime ? value.startDate : startDate + \"T00:00:00\", endDate: endTime ? value.endDate : endDate + \"T23:59:59\" });\n}\nfunction getDefaultMode(value, relativeOptions, rangeSelectorMode) {\n    if (value && value.type) {\n        return value.type;\n    }\n    if (rangeSelectorMode === 'relative-only') {\n        return 'relative';\n    }\n    if (rangeSelectorMode === 'absolute-only') {\n        return 'absolute';\n    }\n    return relativeOptions.length > 0 ? 'relative' : 'absolute';\n}\nexport function DateRangePickerDropdown(_a) {\n    var _b, _c;\n    var _d = _a.locale, locale = _d === void 0 ? '' : _d, startOfWeek = _a.startOfWeek, isDateEnabled = _a.isDateEnabled, isValidRange = _a.isValidRange, value = _a.value, clearValue = _a.onClear, applyValue = _a.onApply, onDropdownClose = _a.onDropdownClose, relativeOptions = _a.relativeOptions, showClearButton = _a.showClearButton, isSingleGrid = _a.isSingleGrid, i18nStrings = _a.i18nStrings, dateOnly = _a.dateOnly, timeInputFormat = _a.timeInputFormat, rangeSelectorMode = _a.rangeSelectorMode;\n    var applyButtonRef = useRef(null);\n    var _e = useState(getDefaultMode(value, relativeOptions, rangeSelectorMode)), rangeSelectionMode = _e[0], setRangeSelectionMode = _e[1];\n    var _f = useState((value === null || value === void 0 ? void 0 : value.type) === 'absolute' ? value : null), selectedAbsoluteRange = _f[0], setSelectedAbsoluteRange = _f[1];\n    var _g = useState((value === null || value === void 0 ? void 0 : value.type) === 'relative' ? value : null), selectedRelativeRange = _g[0], setSelectedRelativeRange = _g[1];\n    var _h = useState(false), applyClicked = _h[0], setApplyClicked = _h[1];\n    var _j = useState(VALID_RANGE), validationResult = _j[0], setValidationResult = _j[1];\n    var closeDropdown = function () {\n        setApplyClicked(false);\n        onDropdownClose();\n    };\n    var onClear = function () {\n        closeDropdown();\n        clearValue();\n    };\n    var onApply = function () {\n        var newValue = rangeSelectionMode === 'relative' ? selectedRelativeRange : fillMissingTime(selectedAbsoluteRange);\n        var newValidationResult = applyValue(newValue);\n        if (newValidationResult.valid === false) {\n            setApplyClicked(true);\n            setValidationResult(newValidationResult);\n        }\n        else {\n            setApplyClicked(false);\n            closeDropdown();\n        }\n    };\n    useEffect(function () {\n        if (applyClicked) {\n            var visibleRange = rangeSelectionMode === 'relative' ? selectedRelativeRange : fillMissingTime(selectedAbsoluteRange);\n            var newValidationResult = isValidRange(visibleRange);\n            setValidationResult(newValidationResult || VALID_RANGE);\n        }\n    }, [applyClicked, isValidRange, rangeSelectionMode, selectedRelativeRange, selectedAbsoluteRange]);\n    var focusRefs = {\n        \"default\": useRef(null),\n        'absolute-only': useRef(null),\n        'relative-only': useRef(null)\n    };\n    var selectedFocusRef = focusRefs[rangeSelectorMode];\n    useEffect(function () { var _a; return (_a = selectedFocusRef.current) === null || _a === void 0 ? void 0 : _a.focus(); }, [selectedFocusRef]);\n    return (React.createElement(\"div\", { className: clsx(styles.dropdown, (_b = {},\n            _b[styles['one-grid']] = isSingleGrid,\n            _b)) },\n        React.createElement(TabTrap, { focusNextCallback: function () { var _a; return (_a = applyButtonRef.current) === null || _a === void 0 ? void 0 : _a.focus(); } }),\n        React.createElement(SpaceBetween, { size: \"l\" },\n            React.createElement(InternalBox, { padding: { top: 'm', horizontal: 'l' } },\n                React.createElement(SpaceBetween, { direction: \"vertical\", size: \"s\" },\n                    rangeSelectorMode === 'default' && (React.createElement(ModeSwitcher, { ref: focusRefs[\"default\"], mode: rangeSelectionMode, onChange: function (mode) {\n                            setRangeSelectionMode(mode);\n                            setApplyClicked(false);\n                            setValidationResult(VALID_RANGE);\n                        }, i18nStrings: i18nStrings })),\n                    rangeSelectionMode === 'absolute' && (React.createElement(Calendar, { ref: focusRefs['absolute-only'], isSingleGrid: isSingleGrid, initialEndDate: selectedAbsoluteRange === null || selectedAbsoluteRange === void 0 ? void 0 : selectedAbsoluteRange.endDate, initialStartDate: selectedAbsoluteRange === null || selectedAbsoluteRange === void 0 ? void 0 : selectedAbsoluteRange.startDate, locale: locale, startOfWeek: startOfWeek, isDateEnabled: isDateEnabled, i18nStrings: i18nStrings, onSelectDateRange: setSelectedAbsoluteRange, dateOnly: dateOnly, timeInputFormat: timeInputFormat })),\n                    rangeSelectionMode === 'relative' && (React.createElement(RelativeRangePicker, { ref: focusRefs['relative-only'], isSingleGrid: isSingleGrid, options: relativeOptions, initialSelection: selectedRelativeRange, onChange: function (range) { return setSelectedRelativeRange(range); }, i18nStrings: i18nStrings }))),\n                React.createElement(InternalBox, { className: styles['validation-section'], margin: !validationResult.valid ? { top: 's' } : undefined }, !validationResult.valid && (React.createElement(React.Fragment, null,\n                    React.createElement(InternalAlert, { type: \"error\" },\n                        React.createElement(\"span\", { className: styles['validation-error'] }, validationResult.errorMessage)),\n                    React.createElement(LiveRegion, null, validationResult.errorMessage))))),\n            React.createElement(\"div\", { className: clsx(styles.footer, (_c = {},\n                    _c[styles['one-grid']] = isSingleGrid,\n                    _c[styles['has-clear-button']] = showClearButton,\n                    _c)) },\n                showClearButton && (React.createElement(\"div\", { className: styles['footer-button-wrapper'] },\n                    React.createElement(InternalButton, { onClick: onClear, className: styles['clear-button'], variant: \"link\", formAction: \"none\" }, i18nStrings.clearButtonLabel))),\n                React.createElement(\"div\", { className: styles['footer-button-wrapper'] },\n                    React.createElement(SpaceBetween, { size: \"xs\", direction: \"horizontal\" },\n                        React.createElement(InternalButton, { onClick: closeDropdown, className: styles['cancel-button'], variant: \"link\", formAction: \"none\" }, i18nStrings.cancelButtonLabel),\n                        React.createElement(InternalButton, { onClick: onApply, className: styles['apply-button'], ref: applyButtonRef, formAction: \"none\" }, i18nStrings.applyButtonLabel))))),\n        React.createElement(TabTrap, { focusNextCallback: function () { var _a; return (_a = selectedFocusRef.current) === null || _a === void 0 ? void 0 : _a.focus(); } })));\n}\n"]},"metadata":{},"sourceType":"module"}