{"ast":null,"code":"import { __assign, __rest } from \"tslib\";\nimport React, { useCallback, useEffect, useMemo, useRef, useState } from 'react';\nimport clsx from 'clsx';\nimport { ResizableBox } from 'react-resizable';\nimport mergeRefs from 'react-merge-refs';\nimport { getBaseProps } from '../internal/base-component';\nimport { KeyCode } from '../internal/keycode';\nimport { useUniqueId } from '../internal/hooks/use-unique-id';\nimport { Pane } from './pane';\nimport { useChangeEffect } from './listeners';\nimport { getDefaultConfig, getAceTheme, getLanguageLabel, DEFAULT_DARK_THEME, DEFAULT_LIGHT_THEME, getDefaultTheme } from './util';\nimport { fireNonCancelableEvent } from '../internal/events';\nimport { setupEditor } from './setup-editor';\nimport handler from './resize-handler';\nimport PreferencesModal from './preferences-modal';\nimport LoadingScreen from './loading-screen';\nimport ErrorScreen from './error-screen';\nimport styles from './styles.css.js';\nimport { applyDisplayName } from '../internal/utils/apply-display-name';\nimport { useContainerQuery } from '../internal/hooks/container-queries/use-container-query';\nimport useBaseComponent from '../internal/hooks/use-base-component';\nimport { useCurrentMode } from '../internal/hooks/use-visual-mode';\nimport { StatusBar } from './status-bar';\nimport { useFormFieldContext } from '../internal/context/form-field-context';\nexport default function CodeEditor(props) {\n  var __internalRootRef = useBaseComponent('CodeEditor').__internalRootRef;\n\n  var _a = useFormFieldContext(props),\n      controlId = _a.controlId,\n      ariaLabelledby = _a.ariaLabelledby,\n      ariaDescribedby = _a.ariaDescribedby;\n\n  var ace = props.ace,\n      value = props.value,\n      language = props.language,\n      i18nStrings = props.i18nStrings,\n      rest = __rest(props, [\"ace\", \"value\", \"language\", \"i18nStrings\"]);\n\n  var baseProps = getBaseProps(rest);\n\n  var _b = useState(),\n      editor = _b[0],\n      setEditor = _b[1];\n\n  var mode = useCurrentMode(__internalRootRef);\n  var defaultTheme = mode === 'dark' ? DEFAULT_DARK_THEME : DEFAULT_LIGHT_THEME;\n  var editorRef = useCallback(function (elem) {\n    if (!ace || !elem) {\n      return;\n    }\n\n    var config = getDefaultConfig();\n    setEditor(ace.edit(elem, __assign(__assign({}, config), {\n      theme: getAceTheme(getDefaultTheme(elem))\n    })));\n  }, [ace]);\n  useEffect(function () {\n    if (!editor) {\n      return;\n    }\n\n    var textarea = editor.renderer.textarea;\n\n    if (!textarea) {\n      return;\n    }\n\n    var updateAttribute = function (attribute, value) {\n      return value ? textarea.setAttribute(attribute, value) : textarea.removeAttribute(attribute);\n    };\n\n    updateAttribute('id', controlId);\n    updateAttribute('aria-labelledby', ariaLabelledby);\n    updateAttribute('aria-describedby', ariaDescribedby);\n  }, [ariaDescribedby, ariaLabelledby, controlId, editor]);\n\n  var _c = useState('hidden'),\n      paneStatus = _c[0],\n      setPaneStatus = _c[1];\n\n  var _d = useState([]),\n      annotations = _d[0],\n      setAnnotations = _d[1];\n\n  var _e = useState(),\n      highlightedAnnotation = _e[0],\n      setHighlightedAnnotation = _e[1];\n\n  var _f = useState(''),\n      languageLabel = _f[0],\n      setLanguageLabel = _f[1];\n\n  var _g = useState({\n    row: 0,\n    column: 0\n  }),\n      cursorPosition = _g[0],\n      setCursorPosition = _g[1];\n\n  var _h = useState(false),\n      isTabFocused = _h[0],\n      setTabFocused = _h[1];\n\n  var errorsTabRef = useRef(null);\n  var warningsTabRef = useRef(null);\n  var paneRef = useRef(null);\n\n  var _j = useContainerQuery(function (rect) {\n    return rect.width;\n  }),\n      codeEditorWidth = _j[0],\n      codeEditorRef = _j[1];\n\n  useEffect(function () {\n    editor === null || editor === void 0 ? void 0 : editor.resize();\n  }, [editor, codeEditorWidth]);\n  var paneId = useUniqueId('code-editor-pane');\n  useEffect(function () {\n    if (!ace || !editor) {\n      return;\n    }\n\n    setupEditor(ace, editor, setAnnotations, setCursorPosition, setHighlightedAnnotation, setPaneStatus);\n    return function () {\n      editor === null || editor === void 0 ? void 0 : editor.destroy();\n    };\n  }, [ace, editor, __internalRootRef]);\n  useEffect(function () {\n    if (!editor) {\n      return;\n    }\n\n    if (value === editor.getValue()) {\n      return;\n    }\n\n    var pos = editor.session.selection.toJSON();\n    editor.setValue(value, -1);\n    editor.session.selection.fromJSON(pos);\n  }, [editor, value]);\n  useEffect(function () {\n    if (!editor) {\n      return;\n    }\n\n    editor.session.setMode(\"ace/mode/\" + language);\n    setLanguageLabel(getLanguageLabel(language));\n  }, [editor, language]);\n  useEffect(function () {\n    var _a, _b, _c, _d;\n\n    if (!editor) {\n      return;\n    }\n\n    var theme = (_b = (_a = props.preferences) === null || _a === void 0 ? void 0 : _a.theme) !== null && _b !== void 0 ? _b : defaultTheme;\n    editor.setTheme(getAceTheme(theme));\n    editor.session.setUseWrapMode((_d = (_c = props.preferences) === null || _c === void 0 ? void 0 : _c.wrapLines) !== null && _d !== void 0 ? _d : true);\n  }, [editor, defaultTheme, props.preferences]);\n  useChangeEffect(editor, props.onChange, props.onDelayedChange);\n  useEffect(function () {\n    if (annotations.length === 0) {\n      setPaneStatus('hidden');\n    }\n\n    if (props.onValidate) {\n      fireNonCancelableEvent(props.onValidate, {\n        annotations: annotations\n      });\n    }\n  }, [annotations, props.onValidate]);\n  var errorCount = useMemo(function () {\n    return annotations.filter(function (a) {\n      return a.type === 'error';\n    }).length;\n  }, [annotations]);\n  var warningCount = useMemo(function () {\n    return annotations.filter(function (a) {\n      return a.type === 'warning';\n    }).length;\n  }, [annotations]);\n  var onEditorKeydown = useCallback(function (e) {\n    if (editor && e.target === editor.container && e.keyCode === KeyCode.enter) {\n      e.stopPropagation();\n      e.preventDefault();\n      editor.focus();\n    }\n  }, [editor]);\n  var onTabFocus = useCallback(function () {\n    return setTabFocused(true);\n  }, []);\n  var onTabBlur = useCallback(function () {\n    return setTabFocused(false);\n  }, []);\n  var onEditorResize = useCallback(function () {\n    editor === null || editor === void 0 ? void 0 : editor.resize();\n  }, [editor]);\n  var onErrorPaneToggle = useCallback(function () {\n    setPaneStatus(paneStatus !== 'error' ? 'error' : 'hidden');\n  }, [paneStatus]);\n  var onWarningPaneToggle = useCallback(function () {\n    setPaneStatus(paneStatus !== 'warning' ? 'warning' : 'hidden');\n  }, [paneStatus]);\n  var onPaneClose = useCallback(function () {\n    if (paneStatus === 'error' && errorsTabRef.current) {\n      errorsTabRef.current.focus();\n    }\n\n    if (paneStatus === 'warning' && warningsTabRef.current) {\n      warningsTabRef.current.focus();\n    }\n\n    setPaneStatus('hidden');\n  }, [paneStatus]);\n\n  var onAnnotationClick = function (_a) {\n    var _b = _a.row,\n        row = _b === void 0 ? 0 : _b,\n        _c = _a.column,\n        column = _c === void 0 ? 0 : _c;\n\n    if (!editor) {\n      return;\n    }\n\n    editor.focus();\n    editor.gotoLine(row + 1, column, false);\n    setHighlightedAnnotation(undefined);\n  };\n\n  var onAnnotationClear = useCallback(function () {\n    setHighlightedAnnotation(undefined);\n  }, []);\n  var shouldHandleFocus = useCallback(function (activeElement) {\n    return activeElement !== errorsTabRef.current && activeElement !== warningsTabRef.current && !(editor === null || editor === void 0 ? void 0 : editor.container.contains(activeElement));\n  }, [editor]);\n\n  var _k = useState(false),\n      isPreferencesModalVisible = _k[0],\n      setPreferencesModalVisible = _k[1];\n\n  var onPreferencesOpen = function () {\n    return setPreferencesModalVisible(true);\n  };\n\n  var onPreferencesConfirm = function (p) {\n    fireNonCancelableEvent(props.onPreferencesChange, p);\n    setPreferencesModalVisible(false);\n  };\n\n  var onPreferencesDismiss = function () {\n    return setPreferencesModalVisible(false);\n  };\n\n  return React.createElement(\"div\", __assign({}, baseProps, {\n    className: clsx(styles['code-editor'], baseProps.className),\n    ref: mergeRefs([codeEditorRef, __internalRootRef])\n  }), props.loading && React.createElement(LoadingScreen, null, i18nStrings.loadingState), !ace && !props.loading && React.createElement(ErrorScreen, {\n    recoveryText: i18nStrings.errorStateRecovery,\n    onRecoveryClick: props.onRecoveryClick\n  }, i18nStrings.errorState), ace && !props.loading && React.createElement(React.Fragment, null, React.createElement(ResizableBox, {\n    className: styles['resizable-box'],\n    width: Infinity,\n    height: 480,\n    minConstraints: [Infinity, 20],\n    axis: \"y\",\n    handle: handler,\n    onResize: onEditorResize\n  }, React.createElement(\"div\", {\n    ref: editorRef,\n    className: clsx(styles.editor, styles.ace),\n    onKeyDown: onEditorKeydown,\n    tabIndex: 0,\n    role: \"group\",\n    \"aria-label\": i18nStrings.editorGroupAriaLabel\n  })), React.createElement(\"div\", {\n    role: \"group\",\n    \"aria-label\": i18nStrings.statusBarGroupAriaLabel\n  }, React.createElement(StatusBar, {\n    languageLabel: languageLabel,\n    cursorPosition: i18nStrings.cursorPosition(cursorPosition.row + 1, cursorPosition.column + 1),\n    errorCount: errorCount,\n    warningCount: warningCount,\n    paneStatus: paneStatus,\n    onErrorPaneToggle: onErrorPaneToggle,\n    onWarningPaneToggle: onWarningPaneToggle,\n    onTabFocus: onTabFocus,\n    onTabBlur: onTabBlur,\n    errorsTabRef: errorsTabRef,\n    warningsTabRef: warningsTabRef,\n    i18nStrings: i18nStrings,\n    isTabFocused: isTabFocused,\n    paneId: paneId,\n    onPreferencesOpen: onPreferencesOpen\n  }), React.createElement(Pane, {\n    id: paneId,\n    visible: paneStatus !== 'hidden',\n    annotations: annotations.filter(function (a) {\n      return a.type === paneStatus;\n    }),\n    highlighted: highlightedAnnotation,\n    onAnnotationClick: onAnnotationClick,\n    onAnnotationClear: onAnnotationClear,\n    onClose: onPaneClose,\n    ref: paneRef,\n    onAllowlist: shouldHandleFocus,\n    cursorPositionLabel: i18nStrings.cursorPosition,\n    closeButtonAriaLabel: i18nStrings.paneCloseButtonAriaLabel\n  })), isPreferencesModalVisible && React.createElement(PreferencesModal, {\n    onConfirm: onPreferencesConfirm,\n    onDismiss: onPreferencesDismiss,\n    preferences: props.preferences,\n    defaultTheme: defaultTheme,\n    i18nStrings: {\n      header: i18nStrings.preferencesModalHeader,\n      cancel: i18nStrings.preferencesModalCancel,\n      confirm: i18nStrings.preferencesModalConfirm,\n      wrapLines: i18nStrings.preferencesModalWrapLines,\n      theme: i18nStrings.preferencesModalTheme,\n      lightThemes: i18nStrings.preferencesModalLightThemes,\n      darkThemes: i18nStrings.preferencesModalDarkThemes\n    }\n  })));\n}\napplyDisplayName(CodeEditor, 'CodeEditor');","map":{"version":3,"sources":["/Users/isingheg/Desktop/projects/test-react-amplify/node_modules/@awsui/components-react/code-editor/index.js"],"names":["__assign","__rest","React","useCallback","useEffect","useMemo","useRef","useState","clsx","ResizableBox","mergeRefs","getBaseProps","KeyCode","useUniqueId","Pane","useChangeEffect","getDefaultConfig","getAceTheme","getLanguageLabel","DEFAULT_DARK_THEME","DEFAULT_LIGHT_THEME","getDefaultTheme","fireNonCancelableEvent","setupEditor","handler","PreferencesModal","LoadingScreen","ErrorScreen","styles","applyDisplayName","useContainerQuery","useBaseComponent","useCurrentMode","StatusBar","useFormFieldContext","CodeEditor","props","__internalRootRef","_a","controlId","ariaLabelledby","ariaDescribedby","ace","value","language","i18nStrings","rest","baseProps","_b","editor","setEditor","mode","defaultTheme","editorRef","elem","config","edit","theme","textarea","renderer","updateAttribute","attribute","setAttribute","removeAttribute","_c","paneStatus","setPaneStatus","_d","annotations","setAnnotations","_e","highlightedAnnotation","setHighlightedAnnotation","_f","languageLabel","setLanguageLabel","_g","row","column","cursorPosition","setCursorPosition","_h","isTabFocused","setTabFocused","errorsTabRef","warningsTabRef","paneRef","_j","rect","width","codeEditorWidth","codeEditorRef","resize","paneId","destroy","getValue","pos","session","selection","toJSON","setValue","fromJSON","setMode","preferences","setTheme","setUseWrapMode","wrapLines","onChange","onDelayedChange","length","onValidate","errorCount","filter","a","type","warningCount","onEditorKeydown","e","target","container","keyCode","enter","stopPropagation","preventDefault","focus","onTabFocus","onTabBlur","onEditorResize","onErrorPaneToggle","onWarningPaneToggle","onPaneClose","current","onAnnotationClick","gotoLine","undefined","onAnnotationClear","shouldHandleFocus","activeElement","contains","_k","isPreferencesModalVisible","setPreferencesModalVisible","onPreferencesOpen","onPreferencesConfirm","p","onPreferencesChange","onPreferencesDismiss","createElement","className","ref","loading","loadingState","recoveryText","errorStateRecovery","onRecoveryClick","errorState","Fragment","Infinity","height","minConstraints","axis","handle","onResize","onKeyDown","tabIndex","role","editorGroupAriaLabel","statusBarGroupAriaLabel","id","visible","highlighted","onClose","onAllowlist","cursorPositionLabel","closeButtonAriaLabel","paneCloseButtonAriaLabel","onConfirm","onDismiss","header","preferencesModalHeader","cancel","preferencesModalCancel","confirm","preferencesModalConfirm","preferencesModalWrapLines","preferencesModalTheme","lightThemes","preferencesModalLightThemes","darkThemes","preferencesModalDarkThemes"],"mappings":"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","sourcesContent":["import { __assign, __rest } from \"tslib\";\nimport React, { useCallback, useEffect, useMemo, useRef, useState } from 'react';\nimport clsx from 'clsx';\nimport { ResizableBox } from 'react-resizable';\nimport mergeRefs from 'react-merge-refs';\nimport { getBaseProps } from '../internal/base-component';\nimport { KeyCode } from '../internal/keycode';\nimport { useUniqueId } from '../internal/hooks/use-unique-id';\nimport { Pane } from './pane';\nimport { useChangeEffect } from './listeners';\nimport { getDefaultConfig, getAceTheme, getLanguageLabel, DEFAULT_DARK_THEME, DEFAULT_LIGHT_THEME, getDefaultTheme, } from './util';\nimport { fireNonCancelableEvent } from '../internal/events';\nimport { setupEditor } from './setup-editor';\nimport handler from './resize-handler';\nimport PreferencesModal from './preferences-modal';\nimport LoadingScreen from './loading-screen';\nimport ErrorScreen from './error-screen';\nimport styles from './styles.css.js';\nimport { applyDisplayName } from '../internal/utils/apply-display-name';\nimport { useContainerQuery } from '../internal/hooks/container-queries/use-container-query';\nimport useBaseComponent from '../internal/hooks/use-base-component';\nimport { useCurrentMode } from '../internal/hooks/use-visual-mode';\nimport { StatusBar } from './status-bar';\nimport { useFormFieldContext } from '../internal/context/form-field-context';\nexport default function CodeEditor(props) {\n    var __internalRootRef = useBaseComponent('CodeEditor').__internalRootRef;\n    var _a = useFormFieldContext(props), controlId = _a.controlId, ariaLabelledby = _a.ariaLabelledby, ariaDescribedby = _a.ariaDescribedby;\n    var ace = props.ace, value = props.value, language = props.language, i18nStrings = props.i18nStrings, rest = __rest(props, [\"ace\", \"value\", \"language\", \"i18nStrings\"]);\n    var baseProps = getBaseProps(rest);\n    var _b = useState(), editor = _b[0], setEditor = _b[1];\n    var mode = useCurrentMode(__internalRootRef);\n    var defaultTheme = mode === 'dark' ? DEFAULT_DARK_THEME : DEFAULT_LIGHT_THEME;\n    var editorRef = useCallback(function (elem) {\n        if (!ace || !elem) {\n            return;\n        }\n        var config = getDefaultConfig();\n        setEditor(ace.edit(elem, __assign(__assign({}, config), { theme: getAceTheme(getDefaultTheme(elem)) })));\n    }, [ace]);\n    useEffect(function () {\n        if (!editor) {\n            return;\n        }\n        var textarea = editor.renderer.textarea;\n        if (!textarea) {\n            return;\n        }\n        var updateAttribute = function (attribute, value) {\n            return value ? textarea.setAttribute(attribute, value) : textarea.removeAttribute(attribute);\n        };\n        updateAttribute('id', controlId);\n        updateAttribute('aria-labelledby', ariaLabelledby);\n        updateAttribute('aria-describedby', ariaDescribedby);\n    }, [ariaDescribedby, ariaLabelledby, controlId, editor]);\n    var _c = useState('hidden'), paneStatus = _c[0], setPaneStatus = _c[1];\n    var _d = useState([]), annotations = _d[0], setAnnotations = _d[1];\n    var _e = useState(), highlightedAnnotation = _e[0], setHighlightedAnnotation = _e[1];\n    var _f = useState(''), languageLabel = _f[0], setLanguageLabel = _f[1];\n    var _g = useState({ row: 0, column: 0 }), cursorPosition = _g[0], setCursorPosition = _g[1];\n    var _h = useState(false), isTabFocused = _h[0], setTabFocused = _h[1];\n    var errorsTabRef = useRef(null);\n    var warningsTabRef = useRef(null);\n    var paneRef = useRef(null);\n    var _j = useContainerQuery(function (rect) { return rect.width; }), codeEditorWidth = _j[0], codeEditorRef = _j[1];\n    useEffect(function () {\n        editor === null || editor === void 0 ? void 0 : editor.resize();\n    }, [editor, codeEditorWidth]);\n    var paneId = useUniqueId('code-editor-pane');\n    useEffect(function () {\n        if (!ace || !editor) {\n            return;\n        }\n        setupEditor(ace, editor, setAnnotations, setCursorPosition, setHighlightedAnnotation, setPaneStatus);\n        return function () {\n            editor === null || editor === void 0 ? void 0 : editor.destroy();\n        };\n    }, [ace, editor, __internalRootRef]);\n    useEffect(function () {\n        if (!editor) {\n            return;\n        }\n        if (value === editor.getValue()) {\n            return;\n        }\n        var pos = editor.session.selection.toJSON();\n        editor.setValue(value, -1);\n        editor.session.selection.fromJSON(pos);\n    }, [editor, value]);\n    useEffect(function () {\n        if (!editor) {\n            return;\n        }\n        editor.session.setMode(\"ace/mode/\" + language);\n        setLanguageLabel(getLanguageLabel(language));\n    }, [editor, language]);\n    useEffect(function () {\n        var _a, _b, _c, _d;\n        if (!editor) {\n            return;\n        }\n        var theme = (_b = (_a = props.preferences) === null || _a === void 0 ? void 0 : _a.theme) !== null && _b !== void 0 ? _b : defaultTheme;\n        editor.setTheme(getAceTheme(theme));\n        editor.session.setUseWrapMode((_d = (_c = props.preferences) === null || _c === void 0 ? void 0 : _c.wrapLines) !== null && _d !== void 0 ? _d : true);\n    }, [editor, defaultTheme, props.preferences]);\n    useChangeEffect(editor, props.onChange, props.onDelayedChange);\n    useEffect(function () {\n        if (annotations.length === 0) {\n            setPaneStatus('hidden');\n        }\n        if (props.onValidate) {\n            fireNonCancelableEvent(props.onValidate, { annotations: annotations });\n        }\n    }, [annotations, props.onValidate]);\n    var errorCount = useMemo(function () { return annotations.filter(function (a) { return a.type === 'error'; }).length; }, [annotations]);\n    var warningCount = useMemo(function () { return annotations.filter(function (a) { return a.type === 'warning'; }).length; }, [annotations]);\n    var onEditorKeydown = useCallback(function (e) {\n        if (editor && e.target === editor.container && e.keyCode === KeyCode.enter) {\n            e.stopPropagation();\n            e.preventDefault();\n            editor.focus();\n        }\n    }, [editor]);\n    var onTabFocus = useCallback(function () { return setTabFocused(true); }, []);\n    var onTabBlur = useCallback(function () { return setTabFocused(false); }, []);\n    var onEditorResize = useCallback(function () {\n        editor === null || editor === void 0 ? void 0 : editor.resize();\n    }, [editor]);\n    var onErrorPaneToggle = useCallback(function () {\n        setPaneStatus(paneStatus !== 'error' ? 'error' : 'hidden');\n    }, [paneStatus]);\n    var onWarningPaneToggle = useCallback(function () {\n        setPaneStatus(paneStatus !== 'warning' ? 'warning' : 'hidden');\n    }, [paneStatus]);\n    var onPaneClose = useCallback(function () {\n        if (paneStatus === 'error' && errorsTabRef.current) {\n            errorsTabRef.current.focus();\n        }\n        if (paneStatus === 'warning' && warningsTabRef.current) {\n            warningsTabRef.current.focus();\n        }\n        setPaneStatus('hidden');\n    }, [paneStatus]);\n    var onAnnotationClick = function (_a) {\n        var _b = _a.row, row = _b === void 0 ? 0 : _b, _c = _a.column, column = _c === void 0 ? 0 : _c;\n        if (!editor) {\n            return;\n        }\n        editor.focus();\n        editor.gotoLine(row + 1, column, false);\n        setHighlightedAnnotation(undefined);\n    };\n    var onAnnotationClear = useCallback(function () {\n        setHighlightedAnnotation(undefined);\n    }, []);\n    var shouldHandleFocus = useCallback(function (activeElement) {\n        return (activeElement !== errorsTabRef.current &&\n            activeElement !== warningsTabRef.current &&\n            !(editor === null || editor === void 0 ? void 0 : editor.container.contains(activeElement)));\n    }, [editor]);\n    var _k = useState(false), isPreferencesModalVisible = _k[0], setPreferencesModalVisible = _k[1];\n    var onPreferencesOpen = function () { return setPreferencesModalVisible(true); };\n    var onPreferencesConfirm = function (p) {\n        fireNonCancelableEvent(props.onPreferencesChange, p);\n        setPreferencesModalVisible(false);\n    };\n    var onPreferencesDismiss = function () { return setPreferencesModalVisible(false); };\n    return (React.createElement(\"div\", __assign({}, baseProps, { className: clsx(styles['code-editor'], baseProps.className), ref: mergeRefs([codeEditorRef, __internalRootRef]) }),\n        props.loading && React.createElement(LoadingScreen, null, i18nStrings.loadingState),\n        !ace && !props.loading && (React.createElement(ErrorScreen, { recoveryText: i18nStrings.errorStateRecovery, onRecoveryClick: props.onRecoveryClick }, i18nStrings.errorState)),\n        ace && !props.loading && (React.createElement(React.Fragment, null,\n            React.createElement(ResizableBox, { className: styles['resizable-box'], width: Infinity, height: 480, minConstraints: [Infinity, 20], axis: \"y\", handle: handler, onResize: onEditorResize },\n                React.createElement(\"div\", { ref: editorRef, className: clsx(styles.editor, styles.ace), onKeyDown: onEditorKeydown, tabIndex: 0, role: \"group\", \"aria-label\": i18nStrings.editorGroupAriaLabel })),\n            React.createElement(\"div\", { role: \"group\", \"aria-label\": i18nStrings.statusBarGroupAriaLabel },\n                React.createElement(StatusBar, { languageLabel: languageLabel, cursorPosition: i18nStrings.cursorPosition(cursorPosition.row + 1, cursorPosition.column + 1), errorCount: errorCount, warningCount: warningCount, paneStatus: paneStatus, onErrorPaneToggle: onErrorPaneToggle, onWarningPaneToggle: onWarningPaneToggle, onTabFocus: onTabFocus, onTabBlur: onTabBlur, errorsTabRef: errorsTabRef, warningsTabRef: warningsTabRef, i18nStrings: i18nStrings, isTabFocused: isTabFocused, paneId: paneId, onPreferencesOpen: onPreferencesOpen }),\n                React.createElement(Pane, { id: paneId, visible: paneStatus !== 'hidden', annotations: annotations.filter(function (a) { return a.type === paneStatus; }), highlighted: highlightedAnnotation, onAnnotationClick: onAnnotationClick, onAnnotationClear: onAnnotationClear, onClose: onPaneClose, ref: paneRef, onAllowlist: shouldHandleFocus, cursorPositionLabel: i18nStrings.cursorPosition, closeButtonAriaLabel: i18nStrings.paneCloseButtonAriaLabel })),\n            isPreferencesModalVisible && (React.createElement(PreferencesModal, { onConfirm: onPreferencesConfirm, onDismiss: onPreferencesDismiss, preferences: props.preferences, defaultTheme: defaultTheme, i18nStrings: {\n                    header: i18nStrings.preferencesModalHeader,\n                    cancel: i18nStrings.preferencesModalCancel,\n                    confirm: i18nStrings.preferencesModalConfirm,\n                    wrapLines: i18nStrings.preferencesModalWrapLines,\n                    theme: i18nStrings.preferencesModalTheme,\n                    lightThemes: i18nStrings.preferencesModalLightThemes,\n                    darkThemes: i18nStrings.preferencesModalDarkThemes\n                } }))))));\n}\napplyDisplayName(CodeEditor, 'CodeEditor');\n"]},"metadata":{},"sourceType":"module"}