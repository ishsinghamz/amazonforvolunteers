{"ast":null,"code":"import { __assign } from \"tslib\";\nimport React, { useMemo } from 'react';\nimport { arc } from 'd3-shape';\nimport { dimensionsBySize, refreshDimensionsBySize } from './utils';\nimport { useVisualRefresh } from '../internal/hooks/use-visual-mode';\nimport styles from './styles.css.js';\nimport clsx from 'clsx';\nexport default function Segments(_a) {\n  var pieData = _a.pieData,\n      highlightedSegment = _a.highlightedSegment,\n      size = _a.size,\n      variant = _a.variant,\n      containerRef = _a.containerRef,\n      focusedSegmentRef = _a.focusedSegmentRef,\n      popoverTrackRef = _a.popoverTrackRef,\n      segmentAriaRoleDescription = _a.segmentAriaRoleDescription,\n      onClick = _a.onClick,\n      onMouseOver = _a.onMouseOver,\n      onMouseOut = _a.onMouseOut;\n  var isRefresh = useVisualRefresh(containerRef);\n\n  var _b = useMemo(function () {\n    var dimensions = isRefresh ? refreshDimensionsBySize[size] : dimensionsBySize[size];\n    var radius = dimensions.outerRadius;\n    var innerRadius = variant === 'pie' ? 0 : dimensions.innerRadius;\n    var cornerRadius = dimensions.cornerRadius || 0;\n    var arcFactory = arc().innerRadius(innerRadius).outerRadius(radius).cornerRadius(cornerRadius);\n    var highlightedArcFactory = arc().innerRadius(radius + 4).outerRadius(radius + 6);\n    return {\n      arcFactory: arcFactory,\n      highlightedArcFactory: highlightedArcFactory\n    };\n  }, [size, variant, isRefresh]),\n      arcFactory = _b.arcFactory,\n      highlightedArcFactory = _b.highlightedArcFactory;\n\n  var centroid = useMemo(function () {\n    for (var _i = 0, pieData_1 = pieData; _i < pieData_1.length; _i++) {\n      var datum = pieData_1[_i];\n\n      if (datum.data.datum === highlightedSegment) {\n        var _a = arcFactory.centroid(datum),\n            centroidLeft = _a[0],\n            centroidTop = _a[1];\n\n        return {\n          cx: centroidLeft,\n          cy: centroidTop\n        };\n      }\n    }\n\n    return null;\n  }, [highlightedSegment, pieData, arcFactory]);\n  return React.createElement(\"g\", {\n    onMouseLeave: function () {\n      return onMouseOut();\n    }\n  }, pieData.map(function (datum) {\n    var _a;\n\n    var isHighlighted = highlightedSegment === datum.data.datum;\n    var isDimmed = highlightedSegment !== null && !isHighlighted;\n    var arcPath = arcFactory(datum) || undefined;\n    var highlightedPath = highlightedArcFactory(datum) || undefined;\n    return React.createElement(\"g\", {\n      key: datum.data.index,\n      onClick: function () {\n        return onClick(datum.data);\n      },\n      onMouseOver: function () {\n        return onMouseOver(datum.data);\n      },\n      className: clsx(styles.segment, (_a = {}, _a[styles['segment--highlighted']] = isHighlighted, _a[styles['segment--dimmed']] = isDimmed, _a)),\n      ref: isHighlighted ? focusedSegmentRef : undefined,\n      \"aria-label\": datum.data.datum.title + \" (\" + datum.data.datum.value + \")\",\n      role: \"button\",\n      \"aria-roledescription\": segmentAriaRoleDescription\n    }, React.createElement(\"path\", {\n      d: arcPath,\n      fill: datum.data.color,\n      className: styles.segment__path,\n      \"aria-hidden\": \"true\"\n    }), React.createElement(\"path\", {\n      d: highlightedPath,\n      fill: datum.data.color,\n      className: clsx(styles.segment__path, styles.segment__highlight),\n      \"aria-hidden\": \"true\"\n    }));\n  }), React.createElement(\"circle\", __assign({}, centroid, {\n    ref: popoverTrackRef,\n    r: \"1\",\n    opacity: \"0\",\n    \"aria-hidden\": \"true\"\n  })));\n}","map":{"version":3,"sources":["/Users/isingheg/Desktop/projects/test-react-amplify/node_modules/@awsui/components-react/pie-chart/segments.js"],"names":["__assign","React","useMemo","arc","dimensionsBySize","refreshDimensionsBySize","useVisualRefresh","styles","clsx","Segments","_a","pieData","highlightedSegment","size","variant","containerRef","focusedSegmentRef","popoverTrackRef","segmentAriaRoleDescription","onClick","onMouseOver","onMouseOut","isRefresh","_b","dimensions","radius","outerRadius","innerRadius","cornerRadius","arcFactory","highlightedArcFactory","centroid","_i","pieData_1","length","datum","data","centroidLeft","centroidTop","cx","cy","createElement","onMouseLeave","map","isHighlighted","isDimmed","arcPath","undefined","highlightedPath","key","index","className","segment","ref","title","value","role","d","fill","color","segment__path","segment__highlight","r","opacity"],"mappings":"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","sourcesContent":["import { __assign } from \"tslib\";\nimport React, { useMemo } from 'react';\nimport { arc } from 'd3-shape';\nimport { dimensionsBySize, refreshDimensionsBySize } from './utils';\nimport { useVisualRefresh } from '../internal/hooks/use-visual-mode';\nimport styles from './styles.css.js';\nimport clsx from 'clsx';\nexport default function Segments(_a) {\n    var pieData = _a.pieData, highlightedSegment = _a.highlightedSegment, size = _a.size, variant = _a.variant, containerRef = _a.containerRef, focusedSegmentRef = _a.focusedSegmentRef, popoverTrackRef = _a.popoverTrackRef, segmentAriaRoleDescription = _a.segmentAriaRoleDescription, onClick = _a.onClick, onMouseOver = _a.onMouseOver, onMouseOut = _a.onMouseOut;\n    var isRefresh = useVisualRefresh(containerRef);\n    var _b = useMemo(function () {\n        var dimensions = isRefresh ? refreshDimensionsBySize[size] : dimensionsBySize[size];\n        var radius = dimensions.outerRadius;\n        var innerRadius = variant === 'pie' ? 0 : dimensions.innerRadius;\n        var cornerRadius = dimensions.cornerRadius || 0;\n        var arcFactory = arc()\n            .innerRadius(innerRadius)\n            .outerRadius(radius)\n            .cornerRadius(cornerRadius);\n        var highlightedArcFactory = arc()\n            .innerRadius(radius + 4)\n            .outerRadius(radius + 6);\n        return {\n            arcFactory: arcFactory,\n            highlightedArcFactory: highlightedArcFactory\n        };\n    }, [size, variant, isRefresh]), arcFactory = _b.arcFactory, highlightedArcFactory = _b.highlightedArcFactory;\n    var centroid = useMemo(function () {\n        for (var _i = 0, pieData_1 = pieData; _i < pieData_1.length; _i++) {\n            var datum = pieData_1[_i];\n            if (datum.data.datum === highlightedSegment) {\n                var _a = arcFactory.centroid(datum), centroidLeft = _a[0], centroidTop = _a[1];\n                return { cx: centroidLeft, cy: centroidTop };\n            }\n        }\n        return null;\n    }, [highlightedSegment, pieData, arcFactory]);\n    return (React.createElement(\"g\", { onMouseLeave: function () { return onMouseOut(); } },\n        pieData.map(function (datum) {\n            var _a;\n            var isHighlighted = highlightedSegment === datum.data.datum;\n            var isDimmed = highlightedSegment !== null && !isHighlighted;\n            var arcPath = arcFactory(datum) || undefined;\n            var highlightedPath = highlightedArcFactory(datum) || undefined;\n            return (React.createElement(\"g\", { key: datum.data.index, onClick: function () { return onClick(datum.data); }, onMouseOver: function () { return onMouseOver(datum.data); }, className: clsx(styles.segment, (_a = {},\n                    _a[styles['segment--highlighted']] = isHighlighted,\n                    _a[styles['segment--dimmed']] = isDimmed,\n                    _a)), ref: isHighlighted ? focusedSegmentRef : undefined, \"aria-label\": datum.data.datum.title + \" (\" + datum.data.datum.value + \")\", role: \"button\", \"aria-roledescription\": segmentAriaRoleDescription },\n                React.createElement(\"path\", { d: arcPath, fill: datum.data.color, className: styles.segment__path, \"aria-hidden\": \"true\" }),\n                React.createElement(\"path\", { d: highlightedPath, fill: datum.data.color, className: clsx(styles.segment__path, styles.segment__highlight), \"aria-hidden\": \"true\" })));\n        }),\n        React.createElement(\"circle\", __assign({}, centroid, { ref: popoverTrackRef, r: \"1\", opacity: \"0\", \"aria-hidden\": \"true\" }))));\n}\n"]},"metadata":{},"sourceType":"module"}