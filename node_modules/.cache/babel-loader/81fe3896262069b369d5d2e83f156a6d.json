{"ast":null,"code":"import { __assign } from \"tslib\";\nimport React, { useCallback, useLayoutEffect, useRef, useState } from 'react';\nimport clsx from 'clsx';\nimport { getContainingBlock, nodeContains } from '../internal/utils/dom';\nimport { useContainerQuery } from '../internal/hooks/container-queries';\nimport { calculatePosition } from './utils/positions';\nimport styles from './styles.css.js';\nimport { useVisualRefresh } from '../internal/hooks/use-visual-mode';\nimport mergeRefs from 'react-merge-refs';\nvar INITIAL_STYLES = {\n  position: 'absolute',\n  top: -9999,\n  left: -9999\n};\nexport default function PopoverContainer(_a) {\n  var position = _a.position,\n      trackRef = _a.trackRef,\n      trackKey = _a.trackKey,\n      arrow = _a.arrow,\n      children = _a.children,\n      zIndex = _a.zIndex,\n      renderWithPortal = _a.renderWithPortal;\n\n  var _b = useContainerQuery(function (rect, prev) {\n    var roundedRect = {\n      width: Math.round(rect.width),\n      height: Math.round(rect.height)\n    };\n    return (prev === null || prev === void 0 ? void 0 : prev.width) === roundedRect.width && (prev === null || prev === void 0 ? void 0 : prev.height) === roundedRect.height ? prev : rect;\n  }),\n      popoverRect = _b[0],\n      ref = _b[1];\n\n  var bodyRef = useRef(null);\n  var arrowRef = useRef(null);\n\n  var _c = useState(INITIAL_STYLES),\n      inlineStyle = _c[0],\n      setInlineStyle = _c[1];\n\n  var _d = useState(null),\n      internalPosition = _d[0],\n      setInternalPosition = _d[1];\n\n  var isRefresh = useVisualRefresh(ref);\n  var positionHandlerRef = useRef(function () {});\n  var updatePositionHandler = useCallback(function () {\n    if (!trackRef.current || !ref.current || !bodyRef.current || !arrowRef.current) {\n      return;\n    }\n\n    var body = bodyRef.current;\n    var arrow = arrowRef.current;\n    var document = ref.current.ownerDocument;\n    var track = trackRef.current;\n\n    if (body.offsetWidth === 0 || body.offsetHeight === 0 || !nodeContains(document.body, track)) {\n      return;\n    }\n\n    var prevTop = body.style.top;\n    var prevLeft = body.style.left;\n    body.style.top = '0';\n    body.style.left = '0';\n    var viewportRect = getViewportRect(document.defaultView);\n    var trackRect = track.getBoundingClientRect();\n    var arrowRect = {\n      width: parseFloat(getComputedStyle(arrow).width),\n      height: parseFloat(getComputedStyle(arrow).height)\n    };\n    var containingBlock = getContainingBlock(body);\n    var containingBlockRect = containingBlock ? containingBlock.getBoundingClientRect() : viewportRect;\n    var bodyRect = body.getBoundingClientRect();\n    var bodyRectCeil = {\n      top: bodyRect.top,\n      left: bodyRect.left,\n      width: Math.ceil(bodyRect.width),\n      height: Math.ceil(bodyRect.height)\n    };\n\n    var _a = calculatePosition(position, trackRect, arrowRect, bodyRectCeil, containingBlock ? containingBlockRect : getDocumentRect(document), viewportRect, renderWithPortal),\n        newInternalPosition = _a.internalPosition,\n        boundingOffset = _a.boundingOffset;\n\n    var popoverOffset = toRelativePosition(boundingOffset, containingBlockRect);\n    var trackRelativeOffset = toRelativePosition(popoverOffset, toRelativePosition(trackRect, containingBlockRect));\n    body.style.top = prevTop;\n    body.style.left = prevLeft;\n    setInternalPosition(newInternalPosition);\n    setInlineStyle({\n      top: popoverOffset.top,\n      left: popoverOffset.left\n    });\n\n    positionHandlerRef.current = function () {\n      var newTrackOffset = toRelativePosition(track.getBoundingClientRect(), containingBlock ? containingBlock.getBoundingClientRect() : viewportRect);\n      setInlineStyle({\n        top: newTrackOffset.top + trackRelativeOffset.top,\n        left: newTrackOffset.left + trackRelativeOffset.left\n      });\n    };\n  }, [position, trackRef, ref, renderWithPortal]);\n  useLayoutEffect(function () {\n    updatePositionHandler();\n  }, [updatePositionHandler, trackKey, popoverRect]);\n  useLayoutEffect(function () {\n    var updatePosition = function () {\n      return requestAnimationFrame(function () {\n        return updatePositionHandler();\n      });\n    };\n\n    var refreshPosition = function () {\n      return requestAnimationFrame(function () {\n        return positionHandlerRef.current();\n      });\n    };\n\n    window.addEventListener('click', updatePosition);\n    window.addEventListener('resize', updatePosition);\n    window.addEventListener('scroll', refreshPosition, true);\n    return function () {\n      window.removeEventListener('click', updatePosition);\n      window.removeEventListener('resize', updatePosition);\n      window.removeEventListener('scroll', refreshPosition, true);\n    };\n  }, [updatePositionHandler]);\n  return React.createElement(\"div\", {\n    ref: mergeRefs([bodyRef, ref]),\n    style: __assign(__assign({}, inlineStyle), {\n      zIndex: zIndex\n    }),\n    className: clsx(styles.container, isRefresh && styles.refresh)\n  }, React.createElement(\"div\", {\n    ref: arrowRef,\n    className: clsx(styles[\"container-arrow\"], styles[\"container-arrow-position-\" + internalPosition]),\n    \"aria-hidden\": true\n  }, arrow(internalPosition)), children);\n}\n\nfunction toRelativePosition(element, parent) {\n  return {\n    top: element.top - parent.top,\n    left: element.left - parent.left\n  };\n}\n\nfunction getViewportRect(window) {\n  return {\n    top: 0,\n    left: 0,\n    width: window.innerWidth,\n    height: window.innerHeight\n  };\n}\n\nfunction getDocumentRect(document) {\n  var _a = document.documentElement.getBoundingClientRect(),\n      top = _a.top,\n      left = _a.left;\n\n  return {\n    top: top,\n    left: left,\n    width: document.documentElement.scrollWidth,\n    height: document.documentElement.scrollHeight\n  };\n}","map":{"version":3,"sources":["/Users/isingheg/Desktop/projects/amazonforvolunteers-ui/node_modules/@awsui/components-react/popover/container.js"],"names":["__assign","React","useCallback","useLayoutEffect","useRef","useState","clsx","getContainingBlock","nodeContains","useContainerQuery","calculatePosition","styles","useVisualRefresh","mergeRefs","INITIAL_STYLES","position","top","left","PopoverContainer","_a","trackRef","trackKey","arrow","children","zIndex","renderWithPortal","_b","rect","prev","roundedRect","width","Math","round","height","popoverRect","ref","bodyRef","arrowRef","_c","inlineStyle","setInlineStyle","_d","internalPosition","setInternalPosition","isRefresh","positionHandlerRef","updatePositionHandler","current","body","document","ownerDocument","track","offsetWidth","offsetHeight","prevTop","style","prevLeft","viewportRect","getViewportRect","defaultView","trackRect","getBoundingClientRect","arrowRect","parseFloat","getComputedStyle","containingBlock","containingBlockRect","bodyRect","bodyRectCeil","ceil","getDocumentRect","newInternalPosition","boundingOffset","popoverOffset","toRelativePosition","trackRelativeOffset","newTrackOffset","updatePosition","requestAnimationFrame","refreshPosition","window","addEventListener","removeEventListener","createElement","className","container","refresh","element","parent","innerWidth","innerHeight","documentElement","scrollWidth","scrollHeight"],"mappings":"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","sourcesContent":["import { __assign } from \"tslib\";\nimport React, { useCallback, useLayoutEffect, useRef, useState } from 'react';\nimport clsx from 'clsx';\nimport { getContainingBlock, nodeContains } from '../internal/utils/dom';\nimport { useContainerQuery } from '../internal/hooks/container-queries';\nimport { calculatePosition } from './utils/positions';\nimport styles from './styles.css.js';\nimport { useVisualRefresh } from '../internal/hooks/use-visual-mode';\nimport mergeRefs from 'react-merge-refs';\nvar INITIAL_STYLES = { position: 'absolute', top: -9999, left: -9999 };\nexport default function PopoverContainer(_a) {\n    var position = _a.position, trackRef = _a.trackRef, trackKey = _a.trackKey, arrow = _a.arrow, children = _a.children, zIndex = _a.zIndex, renderWithPortal = _a.renderWithPortal;\n    var _b = useContainerQuery(function (rect, prev) {\n        var roundedRect = { width: Math.round(rect.width), height: Math.round(rect.height) };\n        return (prev === null || prev === void 0 ? void 0 : prev.width) === roundedRect.width && (prev === null || prev === void 0 ? void 0 : prev.height) === roundedRect.height ? prev : rect;\n    }), popoverRect = _b[0], ref = _b[1];\n    var bodyRef = useRef(null);\n    var arrowRef = useRef(null);\n    var _c = useState(INITIAL_STYLES), inlineStyle = _c[0], setInlineStyle = _c[1];\n    var _d = useState(null), internalPosition = _d[0], setInternalPosition = _d[1];\n    var isRefresh = useVisualRefresh(ref);\n    var positionHandlerRef = useRef(function () { });\n    var updatePositionHandler = useCallback(function () {\n        if (!trackRef.current || !ref.current || !bodyRef.current || !arrowRef.current) {\n            return;\n        }\n        var body = bodyRef.current;\n        var arrow = arrowRef.current;\n        var document = ref.current.ownerDocument;\n        var track = trackRef.current;\n        if (body.offsetWidth === 0 || body.offsetHeight === 0 || !nodeContains(document.body, track)) {\n            return;\n        }\n        var prevTop = body.style.top;\n        var prevLeft = body.style.left;\n        body.style.top = '0';\n        body.style.left = '0';\n        var viewportRect = getViewportRect(document.defaultView);\n        var trackRect = track.getBoundingClientRect();\n        var arrowRect = {\n            width: parseFloat(getComputedStyle(arrow).width),\n            height: parseFloat(getComputedStyle(arrow).height)\n        };\n        var containingBlock = getContainingBlock(body);\n        var containingBlockRect = containingBlock ? containingBlock.getBoundingClientRect() : viewportRect;\n        var bodyRect = body.getBoundingClientRect();\n        var bodyRectCeil = {\n            top: bodyRect.top,\n            left: bodyRect.left,\n            width: Math.ceil(bodyRect.width),\n            height: Math.ceil(bodyRect.height)\n        };\n        var _a = calculatePosition(position, trackRect, arrowRect, bodyRectCeil, containingBlock ? containingBlockRect : getDocumentRect(document), viewportRect, renderWithPortal), newInternalPosition = _a.internalPosition, boundingOffset = _a.boundingOffset;\n        var popoverOffset = toRelativePosition(boundingOffset, containingBlockRect);\n        var trackRelativeOffset = toRelativePosition(popoverOffset, toRelativePosition(trackRect, containingBlockRect));\n        body.style.top = prevTop;\n        body.style.left = prevLeft;\n        setInternalPosition(newInternalPosition);\n        setInlineStyle({ top: popoverOffset.top, left: popoverOffset.left });\n        positionHandlerRef.current = function () {\n            var newTrackOffset = toRelativePosition(track.getBoundingClientRect(), containingBlock ? containingBlock.getBoundingClientRect() : viewportRect);\n            setInlineStyle({\n                top: newTrackOffset.top + trackRelativeOffset.top,\n                left: newTrackOffset.left + trackRelativeOffset.left\n            });\n        };\n    }, [position, trackRef, ref, renderWithPortal]);\n    useLayoutEffect(function () {\n        updatePositionHandler();\n    }, [updatePositionHandler, trackKey, popoverRect]);\n    useLayoutEffect(function () {\n        var updatePosition = function () { return requestAnimationFrame(function () { return updatePositionHandler(); }); };\n        var refreshPosition = function () { return requestAnimationFrame(function () { return positionHandlerRef.current(); }); };\n        window.addEventListener('click', updatePosition);\n        window.addEventListener('resize', updatePosition);\n        window.addEventListener('scroll', refreshPosition, true);\n        return function () {\n            window.removeEventListener('click', updatePosition);\n            window.removeEventListener('resize', updatePosition);\n            window.removeEventListener('scroll', refreshPosition, true);\n        };\n    }, [updatePositionHandler]);\n    return (React.createElement(\"div\", { ref: mergeRefs([bodyRef, ref]), style: __assign(__assign({}, inlineStyle), { zIndex: zIndex }), className: clsx(styles.container, isRefresh && styles.refresh) },\n        React.createElement(\"div\", { ref: arrowRef, className: clsx(styles[\"container-arrow\"], styles[\"container-arrow-position-\" + internalPosition]), \"aria-hidden\": true }, arrow(internalPosition)),\n        children));\n}\nfunction toRelativePosition(element, parent) {\n    return {\n        top: element.top - parent.top,\n        left: element.left - parent.left\n    };\n}\nfunction getViewportRect(window) {\n    return {\n        top: 0,\n        left: 0,\n        width: window.innerWidth,\n        height: window.innerHeight\n    };\n}\nfunction getDocumentRect(document) {\n    var _a = document.documentElement.getBoundingClientRect(), top = _a.top, left = _a.left;\n    return {\n        top: top,\n        left: left,\n        width: document.documentElement.scrollWidth,\n        height: document.documentElement.scrollHeight\n    };\n}\n"]},"metadata":{},"sourceType":"module"}