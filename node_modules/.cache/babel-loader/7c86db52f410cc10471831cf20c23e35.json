{"ast":null,"code":"import { useLayoutEffect, useState } from 'react';\nimport { unstable_batchedUpdates } from 'react-dom';\nimport { usePrevious } from '../../internal/hooks/use-previous';\n\nvar AsyncStore = function () {\n  function AsyncStore(state) {\n    this._listeners = [];\n    this._state = state;\n  }\n\n  AsyncStore.prototype.get = function () {\n    return this._state;\n  };\n\n  AsyncStore.prototype.set = function (cb) {\n    var _this = this;\n\n    var prevState = this._state;\n    var newState = cb(prevState);\n    this._state = newState;\n    unstable_batchedUpdates(function () {\n      for (var _i = 0, _a = _this._listeners; _i < _a.length; _i++) {\n        var _b = _a[_i],\n            selector = _b[0],\n            listener = _b[1];\n\n        if (selector(prevState) !== selector(newState)) {\n          listener(newState, prevState);\n        }\n      }\n    });\n  };\n\n  AsyncStore.prototype.subscribe = function (selector, listener) {\n    var _this = this;\n\n    this._listeners.push([selector, listener]);\n\n    return function () {\n      return _this.unsubscribe(listener);\n    };\n  };\n\n  AsyncStore.prototype.unsubscribe = function (listener) {\n    for (var index = 0; index < this._listeners.length; index++) {\n      var _a = this._listeners[index],\n          storedListener = _a[1];\n\n      if (storedListener === listener) {\n        this._listeners.splice(index, 1);\n\n        break;\n      }\n    }\n  };\n\n  return AsyncStore;\n}();\n\nexport default AsyncStore;\nexport function useReaction(store, selector, effect) {\n  useLayoutEffect(function () {\n    var unsubscribe = store.subscribe(selector, function (newState, prevState) {\n      return effect(selector(newState), selector(prevState));\n    });\n    return unsubscribe;\n  }, [store]);\n}\nexport function useSelector(store, selector) {\n  var _a = useState(selector(store.get())),\n      state = _a[0],\n      setState = _a[1];\n\n  useReaction(store, selector, function (newState) {\n    setState(newState);\n  });\n  var prevStore = usePrevious(store);\n\n  if (prevStore !== null && prevStore !== store) {\n    return selector(store.get());\n  }\n\n  return state;\n}","map":{"version":3,"sources":["/Users/isingheg/Desktop/projects/amazonforvolunteers-ui/node_modules/@awsui/components-react/area-chart/model/async-store.js"],"names":["useLayoutEffect","useState","unstable_batchedUpdates","usePrevious","AsyncStore","state","_listeners","_state","prototype","get","set","cb","_this","prevState","newState","_i","_a","length","_b","selector","listener","subscribe","push","unsubscribe","index","storedListener","splice","useReaction","store","effect","useSelector","setState","prevStore"],"mappings":"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","sourcesContent":["import { useLayoutEffect, useState } from 'react';\nimport { unstable_batchedUpdates } from 'react-dom';\nimport { usePrevious } from '../../internal/hooks/use-previous';\nvar AsyncStore = (function () {\n    function AsyncStore(state) {\n        this._listeners = [];\n        this._state = state;\n    }\n    AsyncStore.prototype.get = function () {\n        return this._state;\n    };\n    AsyncStore.prototype.set = function (cb) {\n        var _this = this;\n        var prevState = this._state;\n        var newState = cb(prevState);\n        this._state = newState;\n        unstable_batchedUpdates(function () {\n            for (var _i = 0, _a = _this._listeners; _i < _a.length; _i++) {\n                var _b = _a[_i], selector = _b[0], listener = _b[1];\n                if (selector(prevState) !== selector(newState)) {\n                    listener(newState, prevState);\n                }\n            }\n        });\n    };\n    AsyncStore.prototype.subscribe = function (selector, listener) {\n        var _this = this;\n        this._listeners.push([selector, listener]);\n        return function () { return _this.unsubscribe(listener); };\n    };\n    AsyncStore.prototype.unsubscribe = function (listener) {\n        for (var index = 0; index < this._listeners.length; index++) {\n            var _a = this._listeners[index], storedListener = _a[1];\n            if (storedListener === listener) {\n                this._listeners.splice(index, 1);\n                break;\n            }\n        }\n    };\n    return AsyncStore;\n}());\nexport default AsyncStore;\nexport function useReaction(store, selector, effect) {\n    useLayoutEffect(function () {\n        var unsubscribe = store.subscribe(selector, function (newState, prevState) {\n            return effect(selector(newState), selector(prevState));\n        });\n        return unsubscribe;\n    }, [store]);\n}\nexport function useSelector(store, selector) {\n    var _a = useState(selector(store.get())), state = _a[0], setState = _a[1];\n    useReaction(store, selector, function (newState) {\n        setState(newState);\n    });\n    var prevStore = usePrevious(store);\n    if (prevStore !== null && prevStore !== store) {\n        return selector(store.get());\n    }\n    return state;\n}\n"]},"metadata":{},"sourceType":"module"}