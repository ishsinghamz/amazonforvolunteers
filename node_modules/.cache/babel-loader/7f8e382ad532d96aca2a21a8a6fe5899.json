{"ast":null,"code":"import React, { forwardRef, useCallback, useEffect, useImperativeHandle, useRef, useState } from 'react';\nimport focusSvgElement from '../../utils/focus-svg-element';\nimport styles from './styles.css.js';\nexport default forwardRef(ApplicationController);\n\nfunction ApplicationController(_a, ref) {\n  var activeElementKey = _a.activeElementKey,\n      activeElementRef = _a.activeElementRef,\n      onFocus = _a.onFocus,\n      onBlur = _a.onBlur,\n      onKeyDown = _a.onKeyDown;\n  var containerRef = useRef(null);\n  var applicationRef = useRef(null);\n  var focusTransitionRef = useRef(false);\n\n  var _b = useState(false),\n      isFocused = _b[0],\n      setFocused = _b[1];\n\n  var onApplicationFocus = useCallback(function (event) {\n    if (focusTransitionRef.current === false) {\n      setFocused(true);\n      onFocus && onFocus(event);\n    } else {\n      focusTransitionRef.current = false;\n    }\n  }, [onFocus]);\n  var onApplicationBlur = useCallback(function (event) {\n    if (focusTransitionRef.current === false) {\n      setFocused(false);\n      onBlur && onBlur(event);\n      muteApplication(applicationRef.current);\n    }\n  }, [onBlur]);\n  var onApplicationKeyDown = onKeyDown;\n  useImperativeHandle(ref, function () {\n    return {\n      focus: function () {\n        return focusApplication(applicationRef.current, (activeElementRef === null || activeElementRef === void 0 ? void 0 : activeElementRef.current) || null);\n      }\n    };\n  }, [activeElementRef]);\n  useEffect(function () {\n    if (!isFocused || focusTransitionRef.current === true) {\n      return;\n    }\n\n    var timeoutId = setTimeout(function () {\n      focusTransitionRef.current = true;\n      containerRef.current.removeChild(applicationRef.current);\n      containerRef.current.appendChild(applicationRef.current);\n      focusApplication(applicationRef.current, (activeElementRef === null || activeElementRef === void 0 ? void 0 : activeElementRef.current) || null);\n    }, 0);\n    return function () {\n      return clearTimeout(timeoutId);\n    };\n  }, [isFocused, activeElementKey, activeElementRef]);\n  return React.createElement(\"g\", {\n    ref: containerRef\n  }, React.createElement(\"g\", {\n    focusable: false,\n    tabIndex: -1,\n    ref: applicationRef,\n    onFocus: onApplicationFocus,\n    onBlur: onApplicationBlur,\n    onKeyDown: onApplicationKeyDown,\n    className: styles.application\n  }));\n}\n\nfunction focusApplication(app, target) {\n  for (var _i = 0, _a = getAttributeNames(app); _i < _a.length; _i++) {\n    var attributeName = _a[_i];\n\n    if (attributeName === 'role' || attributeName.slice(0, 4) === 'aria') {\n      app.removeAttribute(attributeName);\n    }\n  }\n\n  if (target) {\n    for (var _b = 0, _c = getAttributeNames(target); _b < _c.length; _b++) {\n      var attributeName = _c[_b];\n\n      if (attributeName === 'role' || attributeName.slice(0, 4) === 'aria') {\n        var attributeValue = target.getAttribute(attributeName);\n        attributeValue && app.setAttribute(attributeName, attributeValue);\n      }\n    }\n  }\n\n  app.tabIndex = 0;\n  app.setAttribute('focusable', 'true');\n  app.setAttribute('aria-hidden', 'false');\n  focusSvgElement(app);\n}\n\nfunction muteApplication(app) {\n  for (var _i = 0, _a = getAttributeNames(app); _i < _a.length; _i++) {\n    var attributeName = _a[_i];\n\n    if (attributeName === 'role' || attributeName.slice(0, 4) === 'aria') {\n      app.removeAttribute(attributeName);\n    }\n  }\n\n  app.tabIndex = -1;\n  app.setAttribute('focusable', 'false');\n  app.setAttribute('aria-hidden', 'true');\n}\n\nfunction getAttributeNames(element) {\n  var attributes = element.attributes;\n  var result = new Array(attributes.length);\n\n  for (var i = 0; i < attributes.length; i++) {\n    result[i] = attributes[i].name;\n  }\n\n  return result;\n}","map":{"version":3,"sources":["/Users/isingheg/Desktop/projects/test-react-amplify/node_modules/@awsui/components-react/internal/components/chart-plot/application-controller.js"],"names":["React","forwardRef","useCallback","useEffect","useImperativeHandle","useRef","useState","focusSvgElement","styles","ApplicationController","_a","ref","activeElementKey","activeElementRef","onFocus","onBlur","onKeyDown","containerRef","applicationRef","focusTransitionRef","_b","isFocused","setFocused","onApplicationFocus","event","current","onApplicationBlur","muteApplication","onApplicationKeyDown","focus","focusApplication","timeoutId","setTimeout","removeChild","appendChild","clearTimeout","createElement","focusable","tabIndex","className","application","app","target","_i","getAttributeNames","length","attributeName","slice","removeAttribute","_c","attributeValue","getAttribute","setAttribute","element","attributes","result","Array","i","name"],"mappings":"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","sourcesContent":["import React, { forwardRef, useCallback, useEffect, useImperativeHandle, useRef, useState } from 'react';\nimport focusSvgElement from '../../utils/focus-svg-element';\nimport styles from './styles.css.js';\nexport default forwardRef(ApplicationController);\nfunction ApplicationController(_a, ref) {\n    var activeElementKey = _a.activeElementKey, activeElementRef = _a.activeElementRef, onFocus = _a.onFocus, onBlur = _a.onBlur, onKeyDown = _a.onKeyDown;\n    var containerRef = useRef(null);\n    var applicationRef = useRef(null);\n    var focusTransitionRef = useRef(false);\n    var _b = useState(false), isFocused = _b[0], setFocused = _b[1];\n    var onApplicationFocus = useCallback(function (event) {\n        if (focusTransitionRef.current === false) {\n            setFocused(true);\n            onFocus && onFocus(event);\n        }\n        else {\n            focusTransitionRef.current = false;\n        }\n    }, [onFocus]);\n    var onApplicationBlur = useCallback(function (event) {\n        if (focusTransitionRef.current === false) {\n            setFocused(false);\n            onBlur && onBlur(event);\n            muteApplication(applicationRef.current);\n        }\n    }, [onBlur]);\n    var onApplicationKeyDown = onKeyDown;\n    useImperativeHandle(ref, function () { return ({\n        focus: function () { return focusApplication(applicationRef.current, (activeElementRef === null || activeElementRef === void 0 ? void 0 : activeElementRef.current) || null); }\n    }); }, [activeElementRef]);\n    useEffect(function () {\n        if (!isFocused || focusTransitionRef.current === true) {\n            return;\n        }\n        var timeoutId = setTimeout(function () {\n            focusTransitionRef.current = true;\n            containerRef.current.removeChild(applicationRef.current);\n            containerRef.current.appendChild(applicationRef.current);\n            focusApplication(applicationRef.current, (activeElementRef === null || activeElementRef === void 0 ? void 0 : activeElementRef.current) || null);\n        }, 0);\n        return function () { return clearTimeout(timeoutId); };\n    }, [isFocused, activeElementKey, activeElementRef]);\n    return (React.createElement(\"g\", { ref: containerRef },\n        React.createElement(\"g\", { focusable: false, tabIndex: -1, ref: applicationRef, onFocus: onApplicationFocus, onBlur: onApplicationBlur, onKeyDown: onApplicationKeyDown, className: styles.application })));\n}\nfunction focusApplication(app, target) {\n    for (var _i = 0, _a = getAttributeNames(app); _i < _a.length; _i++) {\n        var attributeName = _a[_i];\n        if (attributeName === 'role' || attributeName.slice(0, 4) === 'aria') {\n            app.removeAttribute(attributeName);\n        }\n    }\n    if (target) {\n        for (var _b = 0, _c = getAttributeNames(target); _b < _c.length; _b++) {\n            var attributeName = _c[_b];\n            if (attributeName === 'role' || attributeName.slice(0, 4) === 'aria') {\n                var attributeValue = target.getAttribute(attributeName);\n                attributeValue && app.setAttribute(attributeName, attributeValue);\n            }\n        }\n    }\n    app.tabIndex = 0;\n    app.setAttribute('focusable', 'true');\n    app.setAttribute('aria-hidden', 'false');\n    focusSvgElement(app);\n}\nfunction muteApplication(app) {\n    for (var _i = 0, _a = getAttributeNames(app); _i < _a.length; _i++) {\n        var attributeName = _a[_i];\n        if (attributeName === 'role' || attributeName.slice(0, 4) === 'aria') {\n            app.removeAttribute(attributeName);\n        }\n    }\n    app.tabIndex = -1;\n    app.setAttribute('focusable', 'false');\n    app.setAttribute('aria-hidden', 'true');\n}\nfunction getAttributeNames(element) {\n    var attributes = element.attributes;\n    var result = new Array(attributes.length);\n    for (var i = 0; i < attributes.length; i++) {\n        result[i] = attributes[i].name;\n    }\n    return result;\n}\n"]},"metadata":{},"sourceType":"module"}