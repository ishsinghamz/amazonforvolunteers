{"ast":null,"code":"import { __assign, __rest, __spreadArray } from \"tslib\";\nimport React, { useCallback, useEffect, useRef, useState } from 'react';\nimport clsx from 'clsx';\nimport mergeRefs from 'react-merge-refs';\nimport { useFormFieldContext } from '../internal/context/form-field-context';\nimport { getBaseProps } from '../internal/base-component';\nimport { fireNonCancelableEvent } from '../internal/events';\nimport LiveRegion from '../internal/components/live-region';\nimport DropdownFooter from '../internal/components/dropdown-footer/index.js';\nimport { prepareOptions } from '../internal/components/option/utils/prepare-options';\nimport Dropdown from '../internal/components/dropdown';\nimport { useDropdownStatus } from '../internal/components/dropdown-status';\nimport { useSelect } from '../select/utils/use-select';\nimport { useNativeSearch } from '../select/utils/use-native-search';\nimport { useLoadItems } from '../select/utils/use-load-items';\nimport { useAnnouncement } from '../select/utils/use-announcement';\nimport { findOptionIndex } from '../select/utils/connect-options';\nimport PlainList from '../select/parts/plain-list';\nimport VirtualList from '../select/parts/virtual-list';\nimport { checkOptionValueField } from '../select/utils/check-option-value-field.js';\nimport Filter from '../select/parts/filter';\nimport Trigger from '../select/parts/trigger';\nimport TokenGroup from '../token-group/index.js';\nimport styles from './styles.css.js';\nvar InternalMultiselect = React.forwardRef(function (_a, externalRef) {\n  var _b = _a.options,\n      options = _b === void 0 ? [] : _b,\n      _c = _a.filteringType,\n      filteringType = _c === void 0 ? 'none' : _c,\n      filteringPlaceholder = _a.filteringPlaceholder,\n      filteringAriaLabel = _a.filteringAriaLabel,\n      ariaRequired = _a.ariaRequired,\n      placeholder = _a.placeholder,\n      disabled = _a.disabled,\n      ariaLabel = _a.ariaLabel,\n      _d = _a.statusType,\n      statusType = _d === void 0 ? 'finished' : _d,\n      empty = _a.empty,\n      loadingText = _a.loadingText,\n      finishedText = _a.finishedText,\n      errorText = _a.errorText,\n      recoveryText = _a.recoveryText,\n      noMatch = _a.noMatch,\n      selectedAriaLabel = _a.selectedAriaLabel,\n      renderHighlightedAriaLive = _a.renderHighlightedAriaLive,\n      _e = _a.selectedOptions,\n      selectedOptions = _e === void 0 ? [] : _e,\n      deselectAriaLabel = _a.deselectAriaLabel,\n      _f = _a.keepOpen,\n      keepOpen = _f === void 0 ? true : _f,\n      tokenLimit = _a.tokenLimit,\n      i18nStrings = _a.i18nStrings,\n      onBlur = _a.onBlur,\n      onFocus = _a.onFocus,\n      onLoadItems = _a.onLoadItems,\n      onChange = _a.onChange,\n      virtualScroll = _a.virtualScroll,\n      _g = _a.hideTokens,\n      hideTokens = _g === void 0 ? false : _g,\n      expandToViewport = _a.expandToViewport,\n      _h = _a.__internalRootRef,\n      __internalRootRef = _h === void 0 ? null : _h,\n      restProps = __rest(_a, [\"options\", \"filteringType\", \"filteringPlaceholder\", \"filteringAriaLabel\", \"ariaRequired\", \"placeholder\", \"disabled\", \"ariaLabel\", \"statusType\", \"empty\", \"loadingText\", \"finishedText\", \"errorText\", \"recoveryText\", \"noMatch\", \"selectedAriaLabel\", \"renderHighlightedAriaLive\", \"selectedOptions\", \"deselectAriaLabel\", \"keepOpen\", \"tokenLimit\", \"i18nStrings\", \"onBlur\", \"onFocus\", \"onLoadItems\", \"onChange\", \"virtualScroll\", \"hideTokens\", \"expandToViewport\", \"__internalRootRef\"]);\n\n  checkOptionValueField('Multiselect', 'options', options);\n  var baseProps = getBaseProps(restProps);\n  var formFieldContext = useFormFieldContext(restProps);\n\n  var _j = useLoadItems({\n    onLoadItems: onLoadItems,\n    options: options,\n    statusType: statusType\n  }),\n      handleLoadMore = _j.handleLoadMore,\n      handleRecoveryClick = _j.handleRecoveryClick,\n      fireLoadItems = _j.fireLoadItems;\n\n  var _k = useState(''),\n      filteringValue = _k[0],\n      setFilteringValue = _k[1];\n\n  var updateSelectedOption = useCallback(function (option) {\n    var newSelectedOptions = __spreadArray([], selectedOptions, true);\n\n    var index = findOptionIndex(newSelectedOptions, option);\n\n    if (index > -1) {\n      newSelectedOptions.splice(index, 1);\n    } else {\n      newSelectedOptions.push(option);\n    }\n\n    fireNonCancelableEvent(onChange, {\n      selectedOptions: newSelectedOptions\n    });\n  }, [onChange, selectedOptions]);\n\n  var _l = prepareOptions(options, filteringType, filteringValue),\n      filteredOptions = _l.filteredOptions,\n      parentMap = _l.parentMap;\n\n  var rootRef = useRef(null);\n  var scrollToIndex = useRef(null);\n\n  var _m = useSelect({\n    selectedOptions: selectedOptions,\n    updateSelectedOption: updateSelectedOption,\n    options: filteredOptions,\n    filteringType: filteringType,\n    onFocus: onFocus,\n    onBlur: onBlur,\n    externalRef: externalRef,\n    keepOpen: keepOpen,\n    fireLoadItems: fireLoadItems,\n    setFilteringValue: setFilteringValue\n  }),\n      isOpen = _m.isOpen,\n      highlightedOption = _m.highlightedOption,\n      highlightedIndex = _m.highlightedIndex,\n      getTriggerProps = _m.getTriggerProps,\n      getFilterProps = _m.getFilterProps,\n      getMenuProps = _m.getMenuProps,\n      getOptionProps = _m.getOptionProps,\n      isKeyboard = _m.isKeyboard,\n      highlightOption = _m.highlightOption,\n      announceSelected = _m.announceSelected;\n\n  var handleNativeSearch = useNativeSearch({\n    isEnabled: filteringType === 'none' && isOpen,\n    options: filteredOptions,\n    highlightOption: highlightOption,\n    highlightedOption: highlightedOption === null || highlightedOption === void 0 ? void 0 : highlightedOption.option,\n    isKeyboard: isKeyboard\n  });\n  var isEmpty = !options || options.length === 0;\n  var isNoMatch = filteredOptions && filteredOptions.length === 0;\n  var dropdownStatus = useDropdownStatus({\n    statusType: statusType,\n    empty: empty,\n    loadingText: loadingText,\n    finishedText: finishedText,\n    errorText: errorText,\n    recoveryText: recoveryText,\n    isEmpty: isEmpty,\n    isNoMatch: isNoMatch,\n    noMatch: noMatch,\n    onRecoveryClick: handleRecoveryClick\n  });\n  var filter = React.createElement(Filter, __assign({\n    filteringType: filteringType,\n    placeholder: filteringPlaceholder,\n    ariaLabel: filteringAriaLabel,\n    ariaRequired: ariaRequired,\n    value: filteringValue\n  }, getFilterProps()));\n  var trigger = React.createElement(Trigger, __assign({\n    placeholder: placeholder,\n    disabled: disabled,\n    ariaLabel: ariaLabel,\n    triggerProps: getTriggerProps(disabled),\n    selectedOption: null,\n    isOpen: isOpen\n  }, formFieldContext));\n\n  var menuProps = __assign(__assign({}, getMenuProps()), {\n    onLoadMore: handleLoadMore\n  });\n\n  var announcement = useAnnouncement({\n    announceSelected: announceSelected,\n    highlightedOption: highlightedOption,\n    parentMap: parentMap,\n    selectedAriaLabel: selectedAriaLabel,\n    renderHighlightedAriaLive: renderHighlightedAriaLive\n  });\n  var tokens = selectedOptions.map(function (option) {\n    return {\n      label: option.label,\n      disabled: disabled || option.disabled,\n      labelTag: option.labelTag,\n      description: option.description,\n      iconAlt: option.iconAlt,\n      iconName: option.iconName,\n      iconUrl: option.iconUrl,\n      iconSvg: option.iconSvg,\n      tags: option.tags,\n      dismissLabel: deselectAriaLabel ? deselectAriaLabel(option) : undefined\n    };\n  });\n  useEffect(function () {\n    var _a;\n\n    (_a = scrollToIndex.current) === null || _a === void 0 ? void 0 : _a.call(scrollToIndex, highlightedIndex);\n  }, [highlightedIndex]);\n  var ListComponent = virtualScroll ? VirtualList : PlainList;\n\n  var handleMouseDown = function (event) {\n    var target = event.target;\n\n    if (target !== document.activeElement) {\n      event.preventDefault();\n    }\n  };\n\n  var showTokens = !hideTokens && tokens.length > 0;\n\n  var handleTokenDismiss = function (_a) {\n    var detail = _a.detail;\n    var optionToDeselect = selectedOptions[detail.itemIndex];\n    updateSelectedOption(optionToDeselect);\n    var targetRef = getTriggerProps().ref;\n\n    if (targetRef.current) {\n      targetRef.current.focus();\n    }\n  };\n\n  var tokenGroupI18nStrings = {\n    limitShowFewer: i18nStrings === null || i18nStrings === void 0 ? void 0 : i18nStrings.tokenLimitShowFewer,\n    limitShowMore: i18nStrings === null || i18nStrings === void 0 ? void 0 : i18nStrings.tokenLimitShowMore\n  };\n  return React.createElement(\"div\", __assign({}, baseProps, {\n    ref: mergeRefs([rootRef, __internalRootRef]),\n    className: clsx(styles.root, baseProps.className),\n    onKeyPress: handleNativeSearch\n  }), React.createElement(Dropdown, {\n    open: isOpen,\n    trigger: trigger,\n    header: filter,\n    onMouseDown: handleMouseDown,\n    footer: dropdownStatus.isSticky ? React.createElement(DropdownFooter, {\n      content: dropdownStatus.content\n    }) : null,\n    expandToViewport: expandToViewport\n  }, React.createElement(ListComponent, {\n    listBottom: !dropdownStatus.isSticky ? React.createElement(DropdownFooter, {\n      content: dropdownStatus.content\n    }) : null,\n    menuProps: menuProps,\n    getOptionProps: getOptionProps,\n    filteredOptions: filteredOptions,\n    filteringValue: filteringValue,\n    isKeyboard: isKeyboard.current,\n    ref: scrollToIndex,\n    hasDropdownStatus: dropdownStatus.content !== null,\n    checkboxes: true\n  })), showTokens && React.createElement(TokenGroup, {\n    limit: tokenLimit,\n    items: tokens,\n    onDismiss: handleTokenDismiss,\n    i18nStrings: tokenGroupI18nStrings\n  }), React.createElement(LiveRegion, {\n    assertive: true\n  }, announcement));\n});\nexport default InternalMultiselect;","map":{"version":3,"sources":["/Users/isingheg/Desktop/projects/amazonforvolunteers-ui/node_modules/@awsui/components-react/multiselect/internal.js"],"names":["__assign","__rest","__spreadArray","React","useCallback","useEffect","useRef","useState","clsx","mergeRefs","useFormFieldContext","getBaseProps","fireNonCancelableEvent","LiveRegion","DropdownFooter","prepareOptions","Dropdown","useDropdownStatus","useSelect","useNativeSearch","useLoadItems","useAnnouncement","findOptionIndex","PlainList","VirtualList","checkOptionValueField","Filter","Trigger","TokenGroup","styles","InternalMultiselect","forwardRef","_a","externalRef","_b","options","_c","filteringType","filteringPlaceholder","filteringAriaLabel","ariaRequired","placeholder","disabled","ariaLabel","_d","statusType","empty","loadingText","finishedText","errorText","recoveryText","noMatch","selectedAriaLabel","renderHighlightedAriaLive","_e","selectedOptions","deselectAriaLabel","_f","keepOpen","tokenLimit","i18nStrings","onBlur","onFocus","onLoadItems","onChange","virtualScroll","_g","hideTokens","expandToViewport","_h","__internalRootRef","restProps","baseProps","formFieldContext","_j","handleLoadMore","handleRecoveryClick","fireLoadItems","_k","filteringValue","setFilteringValue","updateSelectedOption","option","newSelectedOptions","index","splice","push","_l","filteredOptions","parentMap","rootRef","scrollToIndex","_m","isOpen","highlightedOption","highlightedIndex","getTriggerProps","getFilterProps","getMenuProps","getOptionProps","isKeyboard","highlightOption","announceSelected","handleNativeSearch","isEnabled","isEmpty","length","isNoMatch","dropdownStatus","onRecoveryClick","filter","createElement","value","trigger","triggerProps","selectedOption","menuProps","onLoadMore","announcement","tokens","map","label","labelTag","description","iconAlt","iconName","iconUrl","iconSvg","tags","dismissLabel","undefined","current","call","ListComponent","handleMouseDown","event","target","document","activeElement","preventDefault","showTokens","handleTokenDismiss","detail","optionToDeselect","itemIndex","targetRef","ref","focus","tokenGroupI18nStrings","limitShowFewer","tokenLimitShowFewer","limitShowMore","tokenLimitShowMore","className","root","onKeyPress","open","header","onMouseDown","footer","isSticky","content","listBottom","hasDropdownStatus","checkboxes","limit","items","onDismiss","assertive"],"mappings":"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","sourcesContent":["import { __assign, __rest, __spreadArray } from \"tslib\";\nimport React, { useCallback, useEffect, useRef, useState } from 'react';\nimport clsx from 'clsx';\nimport mergeRefs from 'react-merge-refs';\nimport { useFormFieldContext } from '../internal/context/form-field-context';\nimport { getBaseProps } from '../internal/base-component';\nimport { fireNonCancelableEvent } from '../internal/events';\nimport LiveRegion from '../internal/components/live-region';\nimport DropdownFooter from '../internal/components/dropdown-footer/index.js';\nimport { prepareOptions } from '../internal/components/option/utils/prepare-options';\nimport Dropdown from '../internal/components/dropdown';\nimport { useDropdownStatus } from '../internal/components/dropdown-status';\nimport { useSelect } from '../select/utils/use-select';\nimport { useNativeSearch } from '../select/utils/use-native-search';\nimport { useLoadItems } from '../select/utils/use-load-items';\nimport { useAnnouncement } from '../select/utils/use-announcement';\nimport { findOptionIndex } from '../select/utils/connect-options';\nimport PlainList from '../select/parts/plain-list';\nimport VirtualList from '../select/parts/virtual-list';\nimport { checkOptionValueField } from '../select/utils/check-option-value-field.js';\nimport Filter from '../select/parts/filter';\nimport Trigger from '../select/parts/trigger';\nimport TokenGroup from '../token-group/index.js';\nimport styles from './styles.css.js';\nvar InternalMultiselect = React.forwardRef(function (_a, externalRef) {\n    var _b = _a.options, options = _b === void 0 ? [] : _b, _c = _a.filteringType, filteringType = _c === void 0 ? 'none' : _c, filteringPlaceholder = _a.filteringPlaceholder, filteringAriaLabel = _a.filteringAriaLabel, ariaRequired = _a.ariaRequired, placeholder = _a.placeholder, disabled = _a.disabled, ariaLabel = _a.ariaLabel, _d = _a.statusType, statusType = _d === void 0 ? 'finished' : _d, empty = _a.empty, loadingText = _a.loadingText, finishedText = _a.finishedText, errorText = _a.errorText, recoveryText = _a.recoveryText, noMatch = _a.noMatch, selectedAriaLabel = _a.selectedAriaLabel, renderHighlightedAriaLive = _a.renderHighlightedAriaLive, _e = _a.selectedOptions, selectedOptions = _e === void 0 ? [] : _e, deselectAriaLabel = _a.deselectAriaLabel, _f = _a.keepOpen, keepOpen = _f === void 0 ? true : _f, tokenLimit = _a.tokenLimit, i18nStrings = _a.i18nStrings, onBlur = _a.onBlur, onFocus = _a.onFocus, onLoadItems = _a.onLoadItems, onChange = _a.onChange, virtualScroll = _a.virtualScroll, _g = _a.hideTokens, hideTokens = _g === void 0 ? false : _g, expandToViewport = _a.expandToViewport, _h = _a.__internalRootRef, __internalRootRef = _h === void 0 ? null : _h, restProps = __rest(_a, [\"options\", \"filteringType\", \"filteringPlaceholder\", \"filteringAriaLabel\", \"ariaRequired\", \"placeholder\", \"disabled\", \"ariaLabel\", \"statusType\", \"empty\", \"loadingText\", \"finishedText\", \"errorText\", \"recoveryText\", \"noMatch\", \"selectedAriaLabel\", \"renderHighlightedAriaLive\", \"selectedOptions\", \"deselectAriaLabel\", \"keepOpen\", \"tokenLimit\", \"i18nStrings\", \"onBlur\", \"onFocus\", \"onLoadItems\", \"onChange\", \"virtualScroll\", \"hideTokens\", \"expandToViewport\", \"__internalRootRef\"]);\n    checkOptionValueField('Multiselect', 'options', options);\n    var baseProps = getBaseProps(restProps);\n    var formFieldContext = useFormFieldContext(restProps);\n    var _j = useLoadItems({\n        onLoadItems: onLoadItems,\n        options: options,\n        statusType: statusType\n    }), handleLoadMore = _j.handleLoadMore, handleRecoveryClick = _j.handleRecoveryClick, fireLoadItems = _j.fireLoadItems;\n    var _k = useState(''), filteringValue = _k[0], setFilteringValue = _k[1];\n    var updateSelectedOption = useCallback(function (option) {\n        var newSelectedOptions = __spreadArray([], selectedOptions, true);\n        var index = findOptionIndex(newSelectedOptions, option);\n        if (index > -1) {\n            newSelectedOptions.splice(index, 1);\n        }\n        else {\n            newSelectedOptions.push(option);\n        }\n        fireNonCancelableEvent(onChange, {\n            selectedOptions: newSelectedOptions\n        });\n    }, [onChange, selectedOptions]);\n    var _l = prepareOptions(options, filteringType, filteringValue), filteredOptions = _l.filteredOptions, parentMap = _l.parentMap;\n    var rootRef = useRef(null);\n    var scrollToIndex = useRef(null);\n    var _m = useSelect({\n        selectedOptions: selectedOptions,\n        updateSelectedOption: updateSelectedOption,\n        options: filteredOptions,\n        filteringType: filteringType,\n        onFocus: onFocus,\n        onBlur: onBlur,\n        externalRef: externalRef,\n        keepOpen: keepOpen,\n        fireLoadItems: fireLoadItems,\n        setFilteringValue: setFilteringValue\n    }), isOpen = _m.isOpen, highlightedOption = _m.highlightedOption, highlightedIndex = _m.highlightedIndex, getTriggerProps = _m.getTriggerProps, getFilterProps = _m.getFilterProps, getMenuProps = _m.getMenuProps, getOptionProps = _m.getOptionProps, isKeyboard = _m.isKeyboard, highlightOption = _m.highlightOption, announceSelected = _m.announceSelected;\n    var handleNativeSearch = useNativeSearch({\n        isEnabled: filteringType === 'none' && isOpen,\n        options: filteredOptions,\n        highlightOption: highlightOption,\n        highlightedOption: highlightedOption === null || highlightedOption === void 0 ? void 0 : highlightedOption.option,\n        isKeyboard: isKeyboard\n    });\n    var isEmpty = !options || options.length === 0;\n    var isNoMatch = filteredOptions && filteredOptions.length === 0;\n    var dropdownStatus = useDropdownStatus({\n        statusType: statusType,\n        empty: empty,\n        loadingText: loadingText,\n        finishedText: finishedText,\n        errorText: errorText,\n        recoveryText: recoveryText,\n        isEmpty: isEmpty,\n        isNoMatch: isNoMatch,\n        noMatch: noMatch,\n        onRecoveryClick: handleRecoveryClick\n    });\n    var filter = (React.createElement(Filter, __assign({ filteringType: filteringType, placeholder: filteringPlaceholder, ariaLabel: filteringAriaLabel, ariaRequired: ariaRequired, value: filteringValue }, getFilterProps())));\n    var trigger = (React.createElement(Trigger, __assign({ placeholder: placeholder, disabled: disabled, ariaLabel: ariaLabel, triggerProps: getTriggerProps(disabled), selectedOption: null, isOpen: isOpen }, formFieldContext)));\n    var menuProps = __assign(__assign({}, getMenuProps()), { onLoadMore: handleLoadMore });\n    var announcement = useAnnouncement({\n        announceSelected: announceSelected,\n        highlightedOption: highlightedOption,\n        parentMap: parentMap,\n        selectedAriaLabel: selectedAriaLabel,\n        renderHighlightedAriaLive: renderHighlightedAriaLive\n    });\n    var tokens = selectedOptions.map(function (option) { return ({\n        label: option.label,\n        disabled: disabled || option.disabled,\n        labelTag: option.labelTag,\n        description: option.description,\n        iconAlt: option.iconAlt,\n        iconName: option.iconName,\n        iconUrl: option.iconUrl,\n        iconSvg: option.iconSvg,\n        tags: option.tags,\n        dismissLabel: deselectAriaLabel ? deselectAriaLabel(option) : undefined\n    }); });\n    useEffect(function () {\n        var _a;\n        (_a = scrollToIndex.current) === null || _a === void 0 ? void 0 : _a.call(scrollToIndex, highlightedIndex);\n    }, [highlightedIndex]);\n    var ListComponent = virtualScroll ? VirtualList : PlainList;\n    var handleMouseDown = function (event) {\n        var target = event.target;\n        if (target !== document.activeElement) {\n            event.preventDefault();\n        }\n    };\n    var showTokens = !hideTokens && tokens.length > 0;\n    var handleTokenDismiss = function (_a) {\n        var detail = _a.detail;\n        var optionToDeselect = selectedOptions[detail.itemIndex];\n        updateSelectedOption(optionToDeselect);\n        var targetRef = getTriggerProps().ref;\n        if (targetRef.current) {\n            targetRef.current.focus();\n        }\n    };\n    var tokenGroupI18nStrings = {\n        limitShowFewer: i18nStrings === null || i18nStrings === void 0 ? void 0 : i18nStrings.tokenLimitShowFewer,\n        limitShowMore: i18nStrings === null || i18nStrings === void 0 ? void 0 : i18nStrings.tokenLimitShowMore\n    };\n    return (React.createElement(\"div\", __assign({}, baseProps, { ref: mergeRefs([rootRef, __internalRootRef]), className: clsx(styles.root, baseProps.className), onKeyPress: handleNativeSearch }),\n        React.createElement(Dropdown, { open: isOpen, trigger: trigger, header: filter, onMouseDown: handleMouseDown, footer: dropdownStatus.isSticky ? React.createElement(DropdownFooter, { content: dropdownStatus.content }) : null, expandToViewport: expandToViewport },\n            React.createElement(ListComponent, { listBottom: !dropdownStatus.isSticky ? React.createElement(DropdownFooter, { content: dropdownStatus.content }) : null, menuProps: menuProps, getOptionProps: getOptionProps, filteredOptions: filteredOptions, filteringValue: filteringValue, isKeyboard: isKeyboard.current, ref: scrollToIndex, hasDropdownStatus: dropdownStatus.content !== null, checkboxes: true })),\n        showTokens && (React.createElement(TokenGroup, { limit: tokenLimit, items: tokens, onDismiss: handleTokenDismiss, i18nStrings: tokenGroupI18nStrings })),\n        React.createElement(LiveRegion, { assertive: true }, announcement)));\n});\nexport default InternalMultiselect;\n"]},"metadata":{},"sourceType":"module"}