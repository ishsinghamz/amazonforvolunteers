{"ast":null,"code":"import { useOpenState } from '../../internal/components/options-list/utils/use-open-state';\nimport { fireCancelableEvent, isPlainLeftClick } from '../../internal/events';\nimport { KeyCode } from '../../internal/keycode';\nimport { getItemTarget, isItemGroup, isLinkItem } from './utils';\nimport useHighlightedMenu from './use-highlighted-menu';\nexport function useButtonDropdown(_a) {\n  var items = _a.items,\n      onItemClick = _a.onItemClick,\n      onItemFollow = _a.onItemFollow,\n      hasExpandableGroups = _a.hasExpandableGroups,\n      _b = _a.isInRestrictedView,\n      isInRestrictedView = _b === void 0 ? false : _b,\n      usingMouse = _a.usingMouse;\n\n  var _c = useHighlightedMenu({\n    items: items,\n    hasExpandableGroups: hasExpandableGroups,\n    isInRestrictedView: isInRestrictedView\n  }),\n      targetItem = _c.targetItem,\n      isHighlighted = _c.isHighlighted,\n      isExpanded = _c.isExpanded,\n      highlightItem = _c.highlightItem,\n      moveHighlight = _c.moveHighlight,\n      expandGroup = _c.expandGroup,\n      collapseGroup = _c.collapseGroup,\n      reset = _c.reset;\n\n  var _d = useOpenState({\n    onClose: reset\n  }),\n      isOpen = _d.isOpen,\n      closeDropdown = _d.closeDropdown,\n      toggleDropdown = _d.toggleDropdown;\n\n  var onGroupToggle = function (item) {\n    return !isExpanded(item) ? expandGroup(item) : collapseGroup();\n  };\n\n  var onItemActivate = function (item, event) {\n    var details = {\n      id: item.id || 'undefined',\n      href: item.href,\n      external: item.external,\n      target: getItemTarget(item)\n    };\n\n    if (onItemFollow && item.href && isPlainLeftClick(event)) {\n      fireCancelableEvent(onItemFollow, details, event);\n    }\n\n    if (onItemClick) {\n      fireCancelableEvent(onItemClick, details, event);\n    }\n\n    closeDropdown();\n  };\n\n  var doVerticalNavigation = function (direction) {\n    if (isOpen) {\n      moveHighlight(direction);\n    }\n  };\n\n  var openAndSelectFirst = function (event) {\n    toggleDropdown();\n    moveHighlight(1);\n    event.preventDefault();\n  };\n\n  var actOnParentDropdown = function (event) {\n    if (!targetItem) {\n      if (isOpen && !isInRestrictedView) {\n        toggleDropdown();\n      } else {\n        openAndSelectFirst(event);\n      }\n    } else {\n      if (isItemGroup(targetItem)) {\n        onGroupToggle(targetItem, event);\n      } else {\n        onItemActivate(targetItem, event);\n      }\n    }\n  };\n\n  var activate = function (event, isEnter) {\n    usingMouse.current = false;\n\n    if (targetItem && isLinkItem(targetItem) && isEnter) {\n      return;\n    }\n\n    event.preventDefault();\n    actOnParentDropdown(event);\n  };\n\n  var onKeyDown = function (event) {\n    switch (event.keyCode) {\n      case KeyCode.down:\n        {\n          doVerticalNavigation(1);\n          event.preventDefault();\n          break;\n        }\n\n      case KeyCode.up:\n        {\n          doVerticalNavigation(-1);\n          event.preventDefault();\n          break;\n        }\n\n      case KeyCode.space:\n        {\n          usingMouse.current = false;\n          event.preventDefault();\n          break;\n        }\n\n      case KeyCode.enter:\n        {\n          if (!(targetItem === null || targetItem === void 0 ? void 0 : targetItem.disabled)) {\n            activate(event, true);\n          }\n\n          break;\n        }\n\n      case KeyCode.left:\n      case KeyCode.right:\n        {\n          if (targetItem && !targetItem.disabled && isItemGroup(targetItem) && !isExpanded(targetItem)) {\n            expandGroup();\n          } else if (hasExpandableGroups) {\n            collapseGroup();\n          }\n\n          event.preventDefault();\n          break;\n        }\n\n      case KeyCode.escape:\n        {\n          closeDropdown();\n          event.preventDefault();\n          break;\n        }\n\n      case KeyCode.tab:\n        {\n          closeDropdown();\n          break;\n        }\n    }\n  };\n\n  var onKeyUp = function (event) {\n    if (event.keyCode === KeyCode.space && !(targetItem === null || targetItem === void 0 ? void 0 : targetItem.disabled)) {\n      activate(event);\n    }\n  };\n\n  return {\n    isOpen: isOpen,\n    targetItem: targetItem,\n    isHighlighted: isHighlighted,\n    isExpanded: isExpanded,\n    highlightItem: highlightItem,\n    onKeyDown: onKeyDown,\n    onKeyUp: onKeyUp,\n    onItemActivate: onItemActivate,\n    onGroupToggle: onGroupToggle,\n    toggleDropdown: toggleDropdown\n  };\n}","map":{"version":3,"sources":["/Users/isingheg/Desktop/projects/amazonforvolunteers-ui/node_modules/@awsui/components-react/button-dropdown/utils/use-button-dropdown.js"],"names":["useOpenState","fireCancelableEvent","isPlainLeftClick","KeyCode","getItemTarget","isItemGroup","isLinkItem","useHighlightedMenu","useButtonDropdown","_a","items","onItemClick","onItemFollow","hasExpandableGroups","_b","isInRestrictedView","usingMouse","_c","targetItem","isHighlighted","isExpanded","highlightItem","moveHighlight","expandGroup","collapseGroup","reset","_d","onClose","isOpen","closeDropdown","toggleDropdown","onGroupToggle","item","onItemActivate","event","details","id","href","external","target","doVerticalNavigation","direction","openAndSelectFirst","preventDefault","actOnParentDropdown","activate","isEnter","current","onKeyDown","keyCode","down","up","space","enter","disabled","left","right","escape","tab","onKeyUp"],"mappings":"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","sourcesContent":["import { useOpenState } from '../../internal/components/options-list/utils/use-open-state';\nimport { fireCancelableEvent, isPlainLeftClick } from '../../internal/events';\nimport { KeyCode } from '../../internal/keycode';\nimport { getItemTarget, isItemGroup, isLinkItem } from './utils';\nimport useHighlightedMenu from './use-highlighted-menu';\nexport function useButtonDropdown(_a) {\n    var items = _a.items, onItemClick = _a.onItemClick, onItemFollow = _a.onItemFollow, hasExpandableGroups = _a.hasExpandableGroups, _b = _a.isInRestrictedView, isInRestrictedView = _b === void 0 ? false : _b, usingMouse = _a.usingMouse;\n    var _c = useHighlightedMenu({\n        items: items,\n        hasExpandableGroups: hasExpandableGroups,\n        isInRestrictedView: isInRestrictedView\n    }), targetItem = _c.targetItem, isHighlighted = _c.isHighlighted, isExpanded = _c.isExpanded, highlightItem = _c.highlightItem, moveHighlight = _c.moveHighlight, expandGroup = _c.expandGroup, collapseGroup = _c.collapseGroup, reset = _c.reset;\n    var _d = useOpenState({ onClose: reset }), isOpen = _d.isOpen, closeDropdown = _d.closeDropdown, toggleDropdown = _d.toggleDropdown;\n    var onGroupToggle = function (item) { return (!isExpanded(item) ? expandGroup(item) : collapseGroup()); };\n    var onItemActivate = function (item, event) {\n        var details = {\n            id: item.id || 'undefined',\n            href: item.href,\n            external: item.external,\n            target: getItemTarget(item)\n        };\n        if (onItemFollow && item.href && isPlainLeftClick(event)) {\n            fireCancelableEvent(onItemFollow, details, event);\n        }\n        if (onItemClick) {\n            fireCancelableEvent(onItemClick, details, event);\n        }\n        closeDropdown();\n    };\n    var doVerticalNavigation = function (direction) {\n        if (isOpen) {\n            moveHighlight(direction);\n        }\n    };\n    var openAndSelectFirst = function (event) {\n        toggleDropdown();\n        moveHighlight(1);\n        event.preventDefault();\n    };\n    var actOnParentDropdown = function (event) {\n        if (!targetItem) {\n            if (isOpen && !isInRestrictedView) {\n                toggleDropdown();\n            }\n            else {\n                openAndSelectFirst(event);\n            }\n        }\n        else {\n            if (isItemGroup(targetItem)) {\n                onGroupToggle(targetItem, event);\n            }\n            else {\n                onItemActivate(targetItem, event);\n            }\n        }\n    };\n    var activate = function (event, isEnter) {\n        usingMouse.current = false;\n        if (targetItem && isLinkItem(targetItem) && isEnter) {\n            return;\n        }\n        event.preventDefault();\n        actOnParentDropdown(event);\n    };\n    var onKeyDown = function (event) {\n        switch (event.keyCode) {\n            case KeyCode.down: {\n                doVerticalNavigation(1);\n                event.preventDefault();\n                break;\n            }\n            case KeyCode.up: {\n                doVerticalNavigation(-1);\n                event.preventDefault();\n                break;\n            }\n            case KeyCode.space: {\n                usingMouse.current = false;\n                event.preventDefault();\n                break;\n            }\n            case KeyCode.enter: {\n                if (!(targetItem === null || targetItem === void 0 ? void 0 : targetItem.disabled)) {\n                    activate(event, true);\n                }\n                break;\n            }\n            case KeyCode.left:\n            case KeyCode.right: {\n                if (targetItem && !targetItem.disabled && isItemGroup(targetItem) && !isExpanded(targetItem)) {\n                    expandGroup();\n                }\n                else if (hasExpandableGroups) {\n                    collapseGroup();\n                }\n                event.preventDefault();\n                break;\n            }\n            case KeyCode.escape: {\n                closeDropdown();\n                event.preventDefault();\n                break;\n            }\n            case KeyCode.tab: {\n                closeDropdown();\n                break;\n            }\n        }\n    };\n    var onKeyUp = function (event) {\n        if (event.keyCode === KeyCode.space && !(targetItem === null || targetItem === void 0 ? void 0 : targetItem.disabled)) {\n            activate(event);\n        }\n    };\n    return {\n        isOpen: isOpen,\n        targetItem: targetItem,\n        isHighlighted: isHighlighted,\n        isExpanded: isExpanded,\n        highlightItem: highlightItem,\n        onKeyDown: onKeyDown,\n        onKeyUp: onKeyUp,\n        onItemActivate: onItemActivate,\n        onGroupToggle: onGroupToggle,\n        toggleDropdown: toggleDropdown\n    };\n}\n"]},"metadata":{},"sourceType":"module"}