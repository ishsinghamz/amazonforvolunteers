{"ast":null,"code":"import { __spreadArray } from \"tslib\";\nimport { useEffect, useMemo, useRef, useState } from 'react';\nimport mergeRefs from 'react-merge-refs';\nimport { useContainerBreakpoints, useContainerQuery } from '../internal/hooks/container-queries';\nimport styles from './styles.css.js';\nvar RESPONSIVENESS_BUFFER = 20;\nexport function useTopNavigation(_a) {\n  var mainRef = _a.__internalRootRef,\n      identity = _a.identity,\n      search = _a.search,\n      utilities = _a.utilities;\n  var virtualRef = useRef(null);\n\n  var _b = useContainerBreakpoints(['xxs', 's']),\n      breakpoint = _b[0],\n      breakpointRef = _b[1];\n\n  var hasSearch = !!search;\n  var hasTitleWithLogo = identity && !!identity.logo && !!identity.title;\n  var responsiveStates = useMemo(function () {\n    return generateResponsiveStateKeys(utilities, hasSearch, hasTitleWithLogo);\n  }, [utilities, hasSearch, hasTitleWithLogo]);\n\n  var _c = useContainerQuery(function () {\n    var _a, _b, _c, _d;\n\n    if (!(mainRef === null || mainRef === void 0 ? void 0 : mainRef.current) || !virtualRef.current) {\n      return responsiveStates[0];\n    }\n\n    var sizeConfiguration = {\n      hasSearch: !!search,\n      availableWidth: getContentBoxWidth(mainRef.current.querySelector(\".\" + styles['padding-box'])),\n      utilitiesLeftPadding: parseFloat(getComputedStyle(virtualRef.current.querySelector(\".\" + styles.utilities)).paddingLeft),\n      fullIdentityWidth: virtualRef.current.querySelector(\".\" + styles.identity).getBoundingClientRect().width,\n      titleWidth: (_b = (_a = virtualRef.current.querySelector(\".\" + styles.title)) === null || _a === void 0 ? void 0 : _a.getBoundingClientRect().width) !== null && _b !== void 0 ? _b : 0,\n      searchSlotWidth: (_d = (_c = virtualRef.current.querySelector(\".\" + styles.search)) === null || _c === void 0 ? void 0 : _c.getBoundingClientRect().width) !== null && _d !== void 0 ? _d : 0,\n      searchUtilityWidth: virtualRef.current.querySelector('[data-utility-special=\"search\"]').getBoundingClientRect().width,\n      utilityWithLabelWidths: Array.prototype.slice.call(virtualRef.current.querySelectorAll(\"[data-utility-hide=\\\"false\\\"]\")).map(function (element) {\n        return element.getBoundingClientRect().width;\n      }),\n      utilityWithoutLabelWidths: Array.prototype.slice.call(virtualRef.current.querySelectorAll(\"[data-utility-hide=\\\"true\\\"]\")).map(function (element) {\n        return element.getBoundingClientRect().width;\n      }),\n      menuTriggerUtilityWidth: virtualRef.current.querySelector('[data-utility-special=\"menu-trigger\"]').getBoundingClientRect().width\n    };\n    return determineBestResponsiveState(responsiveStates, sizeConfiguration);\n  }, [mainRef, search, responsiveStates]),\n      responsiveState = _c[0],\n      containerQueryRef = _c[1];\n\n  var _d = useState(true),\n      isSearchMinimized = _d[0],\n      setSearchMinimized = _d[1];\n\n  var isSearchExpanded = !isSearchMinimized && breakpoint !== 's' && hasSearch && (responsiveState === null || responsiveState === void 0 ? void 0 : responsiveState.hideSearch);\n  useEffect(function () {\n    if (!(responsiveState === null || responsiveState === void 0 ? void 0 : responsiveState.hideSearch)) {\n      setSearchMinimized(true);\n    }\n  }, [responsiveState]);\n  useEffect(function () {\n    var _a, _b;\n\n    if (isSearchExpanded) {\n      (_b = (_a = mainRef === null || mainRef === void 0 ? void 0 : mainRef.current) === null || _a === void 0 ? void 0 : _a.querySelector(\".\" + styles.search + \" input\")) === null || _b === void 0 ? void 0 : _b.focus();\n    }\n  }, [isSearchExpanded, mainRef]);\n  return {\n    ref: mergeRefs(__spreadArray(__spreadArray([], mainRef ? [mainRef] : [], true), [containerQueryRef, breakpointRef], false)),\n    virtualRef: virtualRef,\n    responsiveState: responsiveState !== null && responsiveState !== void 0 ? responsiveState : responsiveStates[0],\n    breakpoint: breakpoint !== null && breakpoint !== void 0 ? breakpoint : 'default',\n    isSearchExpanded: !!isSearchExpanded,\n    onSearchUtilityClick: function () {\n      return setSearchMinimized(function (isSearchMinimized) {\n        return !isSearchMinimized;\n      });\n    }\n  };\n}\n\nfunction getContentBoxWidth(element) {\n  var style = getComputedStyle(element);\n  return parseFloat(style.width) - parseFloat(style.paddingLeft) - parseFloat(style.paddingRight);\n}\n\nexport function generateResponsiveStateKeys(utilities, canHideSearch, canHideTitle) {\n  var states = [{}];\n\n  if (utilities.some(function (utility) {\n    return utility.text;\n  })) {\n    states.push({\n      hideUtilityText: true\n    });\n  }\n\n  if (canHideSearch) {\n    states.push({\n      hideUtilityText: true,\n      hideSearch: true\n    });\n  }\n\n  var hiddenUtilties = [];\n\n  for (var i = 0; i < utilities.length; i++) {\n    if (!utilities[i].disableUtilityCollapse) {\n      hiddenUtilties.push(i);\n      states.push({\n        hideUtilityText: true,\n        hideSearch: canHideSearch || undefined,\n        hideUtilities: hiddenUtilties.length > 0 ? hiddenUtilties.slice() : undefined\n      });\n    }\n  }\n\n  if (canHideTitle) {\n    states.push({\n      hideUtilityText: true,\n      hideSearch: canHideSearch || undefined,\n      hideUtilities: hiddenUtilties.length > 0 ? hiddenUtilties.slice() : undefined,\n      hideTitle: true\n    });\n  }\n\n  return states;\n}\nexport function determineBestResponsiveState(possibleStates, sizes) {\n  var hasSearch = sizes.hasSearch,\n      availableWidth = sizes.availableWidth,\n      utilitiesLeftPadding = sizes.utilitiesLeftPadding,\n      fullIdentityWidth = sizes.fullIdentityWidth,\n      titleWidth = sizes.titleWidth,\n      searchSlotWidth = sizes.searchSlotWidth,\n      searchUtilityWidth = sizes.searchUtilityWidth,\n      utilityWithLabelWidths = sizes.utilityWithLabelWidths,\n      utilityWithoutLabelWidths = sizes.utilityWithoutLabelWidths,\n      menuTriggerUtilityWidth = sizes.menuTriggerUtilityWidth;\n\n  var _loop_1 = function (state) {\n    var searchWidth = hasSearch ? state.hideSearch ? searchUtilityWidth : searchSlotWidth : 0;\n    var utilitiesWidth = (state.hideUtilityText ? utilityWithoutLabelWidths : utilityWithLabelWidths).filter(function (_width, i) {\n      return !state.hideUtilities || state.hideUtilities.indexOf(i) === -1;\n    }).reduce(function (sum, width) {\n      return sum + width;\n    }, 0);\n    var menuTriggerWidth = state.hideUtilities ? menuTriggerUtilityWidth : 0;\n    var identityWidth = state.hideTitle ? fullIdentityWidth - titleWidth : fullIdentityWidth;\n    var expectedInnerWidth = identityWidth + searchWidth + utilitiesLeftPadding + utilitiesWidth + menuTriggerWidth;\n\n    if (expectedInnerWidth <= availableWidth - RESPONSIVENESS_BUFFER) {\n      return {\n        value: state\n      };\n    }\n  };\n\n  for (var _i = 0, possibleStates_1 = possibleStates; _i < possibleStates_1.length; _i++) {\n    var state = possibleStates_1[_i];\n\n    var state_1 = _loop_1(state);\n\n    if (typeof state_1 === \"object\") return state_1.value;\n  }\n\n  return possibleStates[possibleStates.length - 1];\n}","map":{"version":3,"sources":["/Users/isingheg/Desktop/projects/test-react-amplify/node_modules/@awsui/components-react/top-navigation/use-top-navigation.js"],"names":["__spreadArray","useEffect","useMemo","useRef","useState","mergeRefs","useContainerBreakpoints","useContainerQuery","styles","RESPONSIVENESS_BUFFER","useTopNavigation","_a","mainRef","__internalRootRef","identity","search","utilities","virtualRef","_b","breakpoint","breakpointRef","hasSearch","hasTitleWithLogo","logo","title","responsiveStates","generateResponsiveStateKeys","_c","_d","current","sizeConfiguration","availableWidth","getContentBoxWidth","querySelector","utilitiesLeftPadding","parseFloat","getComputedStyle","paddingLeft","fullIdentityWidth","getBoundingClientRect","width","titleWidth","searchSlotWidth","searchUtilityWidth","utilityWithLabelWidths","Array","prototype","slice","call","querySelectorAll","map","element","utilityWithoutLabelWidths","menuTriggerUtilityWidth","determineBestResponsiveState","responsiveState","containerQueryRef","isSearchMinimized","setSearchMinimized","isSearchExpanded","hideSearch","focus","ref","onSearchUtilityClick","style","paddingRight","canHideSearch","canHideTitle","states","some","utility","text","push","hideUtilityText","hiddenUtilties","i","length","disableUtilityCollapse","undefined","hideUtilities","hideTitle","possibleStates","sizes","_loop_1","state","searchWidth","utilitiesWidth","filter","_width","indexOf","reduce","sum","menuTriggerWidth","identityWidth","expectedInnerWidth","value","_i","possibleStates_1","state_1"],"mappings":"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","sourcesContent":["import { __spreadArray } from \"tslib\";\nimport { useEffect, useMemo, useRef, useState } from 'react';\nimport mergeRefs from 'react-merge-refs';\nimport { useContainerBreakpoints, useContainerQuery } from '../internal/hooks/container-queries';\nimport styles from './styles.css.js';\nvar RESPONSIVENESS_BUFFER = 20;\nexport function useTopNavigation(_a) {\n    var mainRef = _a.__internalRootRef, identity = _a.identity, search = _a.search, utilities = _a.utilities;\n    var virtualRef = useRef(null);\n    var _b = useContainerBreakpoints(['xxs', 's']), breakpoint = _b[0], breakpointRef = _b[1];\n    var hasSearch = !!search;\n    var hasTitleWithLogo = identity && !!identity.logo && !!identity.title;\n    var responsiveStates = useMemo(function () {\n        return generateResponsiveStateKeys(utilities, hasSearch, hasTitleWithLogo);\n    }, [utilities, hasSearch, hasTitleWithLogo]);\n    var _c = useContainerQuery(function () {\n        var _a, _b, _c, _d;\n        if (!(mainRef === null || mainRef === void 0 ? void 0 : mainRef.current) || !virtualRef.current) {\n            return responsiveStates[0];\n        }\n        var sizeConfiguration = {\n            hasSearch: !!search,\n            availableWidth: getContentBoxWidth(mainRef.current.querySelector(\".\" + styles['padding-box'])),\n            utilitiesLeftPadding: parseFloat(getComputedStyle(virtualRef.current.querySelector(\".\" + styles.utilities)).paddingLeft),\n            fullIdentityWidth: virtualRef.current.querySelector(\".\" + styles.identity).getBoundingClientRect().width,\n            titleWidth: (_b = (_a = virtualRef.current.querySelector(\".\" + styles.title)) === null || _a === void 0 ? void 0 : _a.getBoundingClientRect().width) !== null && _b !== void 0 ? _b : 0,\n            searchSlotWidth: (_d = (_c = virtualRef.current.querySelector(\".\" + styles.search)) === null || _c === void 0 ? void 0 : _c.getBoundingClientRect().width) !== null && _d !== void 0 ? _d : 0,\n            searchUtilityWidth: virtualRef.current.querySelector('[data-utility-special=\"search\"]').getBoundingClientRect()\n                .width,\n            utilityWithLabelWidths: Array.prototype.slice\n                .call(virtualRef.current.querySelectorAll(\"[data-utility-hide=\\\"false\\\"]\"))\n                .map(function (element) { return element.getBoundingClientRect().width; }),\n            utilityWithoutLabelWidths: Array.prototype.slice\n                .call(virtualRef.current.querySelectorAll(\"[data-utility-hide=\\\"true\\\"]\"))\n                .map(function (element) { return element.getBoundingClientRect().width; }),\n            menuTriggerUtilityWidth: virtualRef.current\n                .querySelector('[data-utility-special=\"menu-trigger\"]')\n                .getBoundingClientRect().width\n        };\n        return determineBestResponsiveState(responsiveStates, sizeConfiguration);\n    }, [mainRef, search, responsiveStates]), responsiveState = _c[0], containerQueryRef = _c[1];\n    var _d = useState(true), isSearchMinimized = _d[0], setSearchMinimized = _d[1];\n    var isSearchExpanded = !isSearchMinimized && breakpoint !== 's' && hasSearch && (responsiveState === null || responsiveState === void 0 ? void 0 : responsiveState.hideSearch);\n    useEffect(function () {\n        if (!(responsiveState === null || responsiveState === void 0 ? void 0 : responsiveState.hideSearch)) {\n            setSearchMinimized(true);\n        }\n    }, [responsiveState]);\n    useEffect(function () {\n        var _a, _b;\n        if (isSearchExpanded) {\n            (_b = (_a = mainRef === null || mainRef === void 0 ? void 0 : mainRef.current) === null || _a === void 0 ? void 0 : _a.querySelector(\".\" + styles.search + \" input\")) === null || _b === void 0 ? void 0 : _b.focus();\n        }\n    }, [isSearchExpanded, mainRef]);\n    return {\n        ref: mergeRefs(__spreadArray(__spreadArray([], (mainRef ? [mainRef] : []), true), [containerQueryRef, breakpointRef], false)),\n        virtualRef: virtualRef,\n        responsiveState: responsiveState !== null && responsiveState !== void 0 ? responsiveState : responsiveStates[0],\n        breakpoint: breakpoint !== null && breakpoint !== void 0 ? breakpoint : 'default',\n        isSearchExpanded: !!isSearchExpanded,\n        onSearchUtilityClick: function () { return setSearchMinimized(function (isSearchMinimized) { return !isSearchMinimized; }); }\n    };\n}\nfunction getContentBoxWidth(element) {\n    var style = getComputedStyle(element);\n    return parseFloat(style.width) - parseFloat(style.paddingLeft) - parseFloat(style.paddingRight);\n}\nexport function generateResponsiveStateKeys(utilities, canHideSearch, canHideTitle) {\n    var states = [{}];\n    if (utilities.some(function (utility) { return utility.text; })) {\n        states.push({ hideUtilityText: true });\n    }\n    if (canHideSearch) {\n        states.push({\n            hideUtilityText: true,\n            hideSearch: true\n        });\n    }\n    var hiddenUtilties = [];\n    for (var i = 0; i < utilities.length; i++) {\n        if (!utilities[i].disableUtilityCollapse) {\n            hiddenUtilties.push(i);\n            states.push({\n                hideUtilityText: true,\n                hideSearch: canHideSearch || undefined,\n                hideUtilities: hiddenUtilties.length > 0 ? hiddenUtilties.slice() : undefined\n            });\n        }\n    }\n    if (canHideTitle) {\n        states.push({\n            hideUtilityText: true,\n            hideSearch: canHideSearch || undefined,\n            hideUtilities: hiddenUtilties.length > 0 ? hiddenUtilties.slice() : undefined,\n            hideTitle: true\n        });\n    }\n    return states;\n}\nexport function determineBestResponsiveState(possibleStates, sizes) {\n    var hasSearch = sizes.hasSearch, availableWidth = sizes.availableWidth, utilitiesLeftPadding = sizes.utilitiesLeftPadding, fullIdentityWidth = sizes.fullIdentityWidth, titleWidth = sizes.titleWidth, searchSlotWidth = sizes.searchSlotWidth, searchUtilityWidth = sizes.searchUtilityWidth, utilityWithLabelWidths = sizes.utilityWithLabelWidths, utilityWithoutLabelWidths = sizes.utilityWithoutLabelWidths, menuTriggerUtilityWidth = sizes.menuTriggerUtilityWidth;\n    var _loop_1 = function (state) {\n        var searchWidth = hasSearch ? (state.hideSearch ? searchUtilityWidth : searchSlotWidth) : 0;\n        var utilitiesWidth = (state.hideUtilityText ? utilityWithoutLabelWidths : utilityWithLabelWidths)\n            .filter(function (_width, i) { return !state.hideUtilities || state.hideUtilities.indexOf(i) === -1; })\n            .reduce(function (sum, width) { return sum + width; }, 0);\n        var menuTriggerWidth = state.hideUtilities ? menuTriggerUtilityWidth : 0;\n        var identityWidth = state.hideTitle ? fullIdentityWidth - titleWidth : fullIdentityWidth;\n        var expectedInnerWidth = identityWidth + searchWidth + utilitiesLeftPadding + utilitiesWidth + menuTriggerWidth;\n        if (expectedInnerWidth <= availableWidth - RESPONSIVENESS_BUFFER) {\n            return { value: state };\n        }\n    };\n    for (var _i = 0, possibleStates_1 = possibleStates; _i < possibleStates_1.length; _i++) {\n        var state = possibleStates_1[_i];\n        var state_1 = _loop_1(state);\n        if (typeof state_1 === \"object\")\n            return state_1.value;\n    }\n    return possibleStates[possibleStates.length - 1];\n}\n"]},"metadata":{},"sourceType":"module"}