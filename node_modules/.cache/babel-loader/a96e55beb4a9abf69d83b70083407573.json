{"ast":null,"code":"import { __assign } from \"tslib\";\nimport React, { useEffect, useRef, useState } from 'react';\nimport InternalAutosuggest from '../autosuggest/internal';\nimport useFocusVisible from '../internal/hooks/focus-visible';\nimport { KeyCode } from '../internal/keycode';\nimport { makeCancellable, PromiseCancelledSignal } from '../internal/utils/promises';\nimport styles from './styles.css.js';\nexport var TagControl = React.forwardRef(function (_a, ref) {\n  var row = _a.row,\n      value = _a.value,\n      readOnly = _a.readOnly,\n      defaultOptions = _a.defaultOptions,\n      placeholder = _a.placeholder,\n      errorText = _a.errorText,\n      loadingText = _a.loadingText,\n      suggestionText = _a.suggestionText,\n      tooManySuggestionText = _a.tooManySuggestionText,\n      limit = _a.limit,\n      filteringKey = _a.filteringKey,\n      enteredTextLabel = _a.enteredTextLabel,\n      onChange = _a.onChange,\n      onBlur = _a.onBlur,\n      onRequest = _a.onRequest,\n      initialOptionsRef = _a.initialOptionsRef;\n\n  var _b = useState(defaultOptions),\n      options = _b[0],\n      setOptions = _b[1];\n\n  var _c = useState(),\n      statusType = _c[0],\n      setStatusType = _c[1];\n\n  var requestCancelFnRef = useRef({\n    cancel: function () {},\n    isCancelled: function () {\n      return false;\n    }\n  });\n  var latestFilteringQuery = useRef({\n    key: undefined,\n    value: undefined\n  });\n\n  var isSameQuery = function (key, value) {\n    return latestFilteringQuery.current.key === key && latestFilteringQuery.current.value === value;\n  };\n\n  useEffect(function () {\n    return function () {\n      return requestCancelFnRef.current.cancel();\n    };\n  }, []);\n\n  var onLoadItems = function (filteringText) {\n    if (!onRequest || isSameQuery(filteringKey, filteringText) || requestCancelFnRef.current.isCancelled()) {\n      return;\n    }\n\n    requestCancelFnRef.current.cancel();\n\n    if (filteringText === '' && (initialOptionsRef === null || initialOptionsRef === void 0 ? void 0 : initialOptionsRef.current) && initialOptionsRef.current.length > 0) {\n      setOptions(initialOptionsRef.current);\n    }\n\n    if (latestFilteringQuery.current.key !== filteringKey) {\n      setOptions([]);\n    }\n\n    setStatusType('loading');\n    latestFilteringQuery.current = {\n      key: filteringKey,\n      value: filteringText\n    };\n\n    var _a = makeCancellable(onRequest(filteringText)),\n        promise = _a.promise,\n        cancel = _a.cancel,\n        isCancelled = _a.isCancelled;\n\n    promise.then(function (newValues) {\n      var newOptions = newValues.map(function (value) {\n        return {\n          value: value\n        };\n      });\n      setStatusType(undefined);\n      setOptions(newOptions);\n\n      if (initialOptionsRef) {\n        initialOptionsRef.current = newOptions;\n      }\n    })[\"catch\"](function (err) {\n      if (!(err instanceof PromiseCancelledSignal)) {\n        setStatusType('error');\n      }\n    });\n    requestCancelFnRef.current = {\n      cancel: cancel,\n      isCancelled: isCancelled\n    };\n  };\n\n  return React.createElement(InternalAutosuggest, {\n    ref: ref,\n    value: value,\n    readOnly: readOnly,\n    statusType: statusType,\n    options: options.length < limit ? options : [],\n    empty: options.length < limit ? suggestionText : tooManySuggestionText,\n    placeholder: placeholder,\n    errorText: errorText,\n    loadingText: loadingText,\n    enteredTextLabel: enteredTextLabel,\n    onChange: function (_a) {\n      var detail = _a.detail;\n      return onChange(detail.value, row);\n    },\n    onBlur: function () {\n      return onBlur === null || onBlur === void 0 ? void 0 : onBlur(row);\n    },\n    onFocus: function () {\n      onLoadItems('');\n    },\n    onLoadItems: function (_a) {\n      var detail = _a.detail;\n      onLoadItems(detail.filteringText);\n    }\n  });\n});\nexport var UndoButton = React.forwardRef(function (_a, ref) {\n  var children = _a.children,\n      onClick = _a.onClick;\n  var focusVisible = useFocusVisible();\n  return React.createElement(\"a\", __assign({}, focusVisible, {\n    ref: ref,\n    role: \"button\",\n    tabIndex: 0,\n    className: styles['undo-button'],\n    onClick: onClick,\n    onKeyDown: function (event) {\n      if (event.keyCode === KeyCode.space || event.keyCode === KeyCode.enter) {\n        event.preventDefault();\n      }\n\n      if (event.keyCode === KeyCode.enter) {\n        onClick();\n      }\n    },\n    onKeyUp: function (event) {\n      if (event.keyCode === KeyCode.space) {\n        onClick();\n      }\n    }\n  }), children);\n});","map":{"version":3,"sources":["/Users/isingheg/Desktop/projects/amazonforvolunteers-ui/node_modules/@awsui/components-react/tag-editor/internal.js"],"names":["__assign","React","useEffect","useRef","useState","InternalAutosuggest","useFocusVisible","KeyCode","makeCancellable","PromiseCancelledSignal","styles","TagControl","forwardRef","_a","ref","row","value","readOnly","defaultOptions","placeholder","errorText","loadingText","suggestionText","tooManySuggestionText","limit","filteringKey","enteredTextLabel","onChange","onBlur","onRequest","initialOptionsRef","_b","options","setOptions","_c","statusType","setStatusType","requestCancelFnRef","cancel","isCancelled","latestFilteringQuery","key","undefined","isSameQuery","current","onLoadItems","filteringText","length","promise","then","newValues","newOptions","map","err","createElement","empty","detail","onFocus","UndoButton","children","onClick","focusVisible","role","tabIndex","className","onKeyDown","event","keyCode","space","enter","preventDefault","onKeyUp"],"mappings":"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","sourcesContent":["import { __assign } from \"tslib\";\nimport React, { useEffect, useRef, useState } from 'react';\nimport InternalAutosuggest from '../autosuggest/internal';\nimport useFocusVisible from '../internal/hooks/focus-visible';\nimport { KeyCode } from '../internal/keycode';\nimport { makeCancellable, PromiseCancelledSignal } from '../internal/utils/promises';\nimport styles from './styles.css.js';\nexport var TagControl = React.forwardRef(function (_a, ref) {\n    var row = _a.row, value = _a.value, readOnly = _a.readOnly, defaultOptions = _a.defaultOptions, placeholder = _a.placeholder, errorText = _a.errorText, loadingText = _a.loadingText, suggestionText = _a.suggestionText, tooManySuggestionText = _a.tooManySuggestionText, limit = _a.limit, filteringKey = _a.filteringKey, enteredTextLabel = _a.enteredTextLabel, onChange = _a.onChange, onBlur = _a.onBlur, onRequest = _a.onRequest, initialOptionsRef = _a.initialOptionsRef;\n    var _b = useState(defaultOptions), options = _b[0], setOptions = _b[1];\n    var _c = useState(), statusType = _c[0], setStatusType = _c[1];\n    var requestCancelFnRef = useRef({\n        cancel: function () { },\n        isCancelled: function () { return false; }\n    });\n    var latestFilteringQuery = useRef({ key: undefined, value: undefined });\n    var isSameQuery = function (key, value) {\n        return latestFilteringQuery.current.key === key && latestFilteringQuery.current.value === value;\n    };\n    useEffect(function () { return function () { return requestCancelFnRef.current.cancel(); }; }, []);\n    var onLoadItems = function (filteringText) {\n        if (!onRequest || isSameQuery(filteringKey, filteringText) || requestCancelFnRef.current.isCancelled()) {\n            return;\n        }\n        requestCancelFnRef.current.cancel();\n        if (filteringText === '' && (initialOptionsRef === null || initialOptionsRef === void 0 ? void 0 : initialOptionsRef.current) && initialOptionsRef.current.length > 0) {\n            setOptions(initialOptionsRef.current);\n        }\n        if (latestFilteringQuery.current.key !== filteringKey) {\n            setOptions([]);\n        }\n        setStatusType('loading');\n        latestFilteringQuery.current = { key: filteringKey, value: filteringText };\n        var _a = makeCancellable(onRequest(filteringText)), promise = _a.promise, cancel = _a.cancel, isCancelled = _a.isCancelled;\n        promise\n            .then(function (newValues) {\n            var newOptions = newValues.map(function (value) { return ({ value: value }); });\n            setStatusType(undefined);\n            setOptions(newOptions);\n            if (initialOptionsRef) {\n                initialOptionsRef.current = newOptions;\n            }\n        })[\"catch\"](function (err) {\n            if (!(err instanceof PromiseCancelledSignal)) {\n                setStatusType('error');\n            }\n        });\n        requestCancelFnRef.current = { cancel: cancel, isCancelled: isCancelled };\n    };\n    return (React.createElement(InternalAutosuggest, { ref: ref, value: value, readOnly: readOnly, statusType: statusType, options: options.length < limit ? options : [], empty: options.length < limit ? suggestionText : tooManySuggestionText, placeholder: placeholder, errorText: errorText, loadingText: loadingText, enteredTextLabel: enteredTextLabel, onChange: function (_a) {\n            var detail = _a.detail;\n            return onChange(detail.value, row);\n        }, onBlur: function () { return onBlur === null || onBlur === void 0 ? void 0 : onBlur(row); }, onFocus: function () {\n            onLoadItems('');\n        }, onLoadItems: function (_a) {\n            var detail = _a.detail;\n            onLoadItems(detail.filteringText);\n        } }));\n});\nexport var UndoButton = React.forwardRef(function (_a, ref) {\n    var children = _a.children, onClick = _a.onClick;\n    var focusVisible = useFocusVisible();\n    return (React.createElement(\"a\", __assign({}, focusVisible, { ref: ref, role: \"button\", tabIndex: 0, className: styles['undo-button'], onClick: onClick, onKeyDown: function (event) {\n            if (event.keyCode === KeyCode.space || event.keyCode === KeyCode.enter) {\n                event.preventDefault();\n            }\n            if (event.keyCode === KeyCode.enter) {\n                onClick();\n            }\n        }, onKeyUp: function (event) {\n            if (event.keyCode === KeyCode.space) {\n                onClick();\n            }\n        } }), children));\n});\n"]},"metadata":{},"sourceType":"module"}