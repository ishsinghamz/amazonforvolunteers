{"ast":null,"code":"import styles from './styles.css.js';\nimport clsx from 'clsx';\nimport mergeRefs from 'react-merge-refs';\nimport React, { useEffect, useLayoutEffect, useRef, useState } from 'react';\nimport { createPortal } from 'react-dom';\nimport { fireNonCancelableEvent } from '../../events';\nimport { getDropdownPosition, getInteriorDropdownPosition } from './dropdown-fit-handler';\nimport { Transition } from '../transition';\nimport { useVisualRefresh } from '../../hooks/use-visual-mode';\nimport { usePortalModeClasses } from '../../hooks/use-portal-mode-classes';\nimport { DropdownContextProvider } from './context';\n\nvar DropdownContainer = function (_a) {\n  var children = _a.children,\n      _b = _a.renderWithPortal,\n      renderWithPortal = _b === void 0 ? false : _b,\n      id = _a.id,\n      open = _a.open;\n\n  if (renderWithPortal) {\n    if (open) {\n      return createPortal(React.createElement(\"div\", {\n        id: id\n      }, children), document.body);\n    } else {\n      return null;\n    }\n  } else {\n    return React.createElement(React.Fragment, null, children);\n  }\n};\n\nvar Dropdown = function (_a) {\n  var children = _a.children,\n      trigger = _a.trigger,\n      open = _a.open,\n      onDropdownClose = _a.onDropdownClose,\n      onMouseDown = _a.onMouseDown,\n      header = _a.header,\n      footer = _a.footer,\n      dropdownId = _a.dropdownId,\n      _b = _a.stretchTriggerHeight,\n      stretchTriggerHeight = _b === void 0 ? false : _b,\n      _c = _a.stretchWidth,\n      stretchWidth = _c === void 0 ? true : _c,\n      _d = _a.stretchHeight,\n      stretchHeight = _d === void 0 ? false : _d,\n      _e = _a.stretchToTriggerWidth,\n      stretchToTriggerWidth = _e === void 0 ? true : _e,\n      _f = _a.expandToViewport,\n      expandToViewport = _f === void 0 ? false : _f,\n      _g = _a.preferCenter,\n      preferCenter = _g === void 0 ? false : _g,\n      _h = _a.interior,\n      interior = _h === void 0 ? false : _h,\n      minWidth = _a.minWidth,\n      _j = _a.hasContent,\n      hasContent = _j === void 0 ? true : _j,\n      _k = _a.scrollable,\n      scrollable = _k === void 0 ? true : _k;\n  var triggerRef = useRef(null);\n  var dropdownRef = useRef(null);\n  var verticalContainerRef = useRef(null);\n  var fixedPosition = useRef(null);\n  var isRefresh = useVisualRefresh(triggerRef);\n  var dropdownClasses = usePortalModeClasses(triggerRef);\n\n  var _l = useState('bottom-right'),\n      position = _l[0],\n      setPosition = _l[1];\n\n  var setDropdownPosition = function (position, triggerBox, target, verticalContainer) {\n    var entireWidth = !interior && stretchWidth;\n\n    if (!stretchHeight) {\n      if (!stretchWidth) {\n        verticalContainer.style.maxHeight = parseInt(position.height) + 1 + \"px\";\n      } else {\n        verticalContainer.style.maxHeight = position.height;\n      }\n    }\n\n    if (entireWidth && !expandToViewport) {\n      if (stretchToTriggerWidth) {\n        target.classList.add(styles['occupy-entire-width']);\n      }\n    } else {\n      target.style.width = position.width;\n    }\n\n    if (position.dropUp && !interior) {\n      target.classList.add(styles['dropdown-drop-up']);\n\n      if (!expandToViewport) {\n        target.style.bottom = '100%';\n      }\n    } else {\n      target.classList.remove(styles['dropdown-drop-up']);\n    }\n\n    target.classList.add(position.dropLeft ? styles['dropdown-drop-left'] : styles['dropdown-drop-right']);\n\n    if (position.left && position.left !== 'auto') {\n      target.style.left = position.left;\n    }\n\n    if (expandToViewport && !interior) {\n      target.style.position = 'fixed';\n\n      if (position.dropUp) {\n        target.style.bottom = \"calc(100% - \" + triggerBox.top + \"px)\";\n      } else {\n        target.style.top = triggerBox.bottom + \"px\";\n      }\n\n      if (position.dropLeft) {\n        target.style.left = \"calc(\" + triggerBox.right + \"px - \" + position.width + \")\";\n      } else {\n        target.style.left = triggerBox.left + \"px\";\n      }\n\n      fixedPosition.current = position;\n      return;\n    }\n\n    if (interior && isInteriorPosition(position)) {\n      if (position.dropUp) {\n        target.style.bottom = position.bottom;\n      } else {\n        target.style.top = position.top;\n      }\n\n      target.style.left = position.left;\n    }\n\n    if (position.dropUp && position.dropLeft) {\n      setPosition('top-left');\n    } else if (position.dropUp) {\n      setPosition('top-right');\n    } else if (position.dropLeft) {\n      setPosition('bottom-left');\n    } else {\n      setPosition('bottom-right');\n    }\n  };\n\n  useLayoutEffect(function () {\n    if (open && dropdownRef.current && triggerRef.current && verticalContainerRef.current) {\n      verticalContainerRef.current.style.maxHeight = '';\n      dropdownRef.current.style.width = '';\n      dropdownRef.current.style.top = '';\n      dropdownRef.current.style.bottom = '';\n      dropdownRef.current.style.left = '';\n      dropdownRef.current.classList.remove(styles['dropdown-drop-left']);\n      dropdownRef.current.classList.remove(styles['dropdown-drop-right']);\n      dropdownRef.current.classList.remove(styles['dropdown-drop-up']);\n\n      if (scrollable) {\n        dropdownRef.current.classList.add(styles.nowrap);\n      }\n\n      var position_1 = interior ? getInteriorDropdownPosition(triggerRef.current, dropdownRef.current, expandToViewport) : getDropdownPosition(triggerRef.current, dropdownRef.current, expandToViewport, minWidth, preferCenter);\n      var triggerBox = triggerRef.current.getBoundingClientRect();\n      setDropdownPosition(position_1, triggerBox, dropdownRef.current, verticalContainerRef.current);\n\n      if (scrollable) {\n        dropdownRef.current.classList.remove(styles.nowrap);\n      }\n    }\n  }, [open, dropdownRef, triggerRef, verticalContainerRef, interior, stretchWidth]);\n  useEffect(function () {\n    if (!open) {\n      return;\n    }\n\n    var clickListener = function (e) {\n      var _a;\n\n      if (!((_a = dropdownRef.current) === null || _a === void 0 ? void 0 : _a.contains(e.target))) {\n        fireNonCancelableEvent(onDropdownClose);\n      }\n    };\n\n    var timeout = setTimeout(function () {\n      window.addEventListener('click', clickListener);\n    }, 0);\n    return function () {\n      clearTimeout(timeout);\n      window.removeEventListener('click', clickListener);\n    };\n  }, [open, onDropdownClose]);\n  useLayoutEffect(function () {\n    if (!expandToViewport || !open) {\n      return;\n    }\n\n    var updateDropdownPosition = function () {\n      if (triggerRef.current && dropdownRef.current && verticalContainerRef.current) {\n        var triggerRect = triggerRef.current.getBoundingClientRect();\n        var target = dropdownRef.current;\n\n        if (fixedPosition.current) {\n          if (fixedPosition.current.dropUp) {\n            dropdownRef.current.style.bottom = \"calc(100% - \" + triggerRect.top + \"px)\";\n          } else {\n            target.style.top = triggerRect.bottom + \"px\";\n          }\n\n          if (fixedPosition.current.dropLeft) {\n            target.style.left = \"calc(\" + triggerRect.right + \"px - \" + fixedPosition.current.width + \")\";\n          } else {\n            target.style.left = triggerRect.left + \"px\";\n          }\n        }\n      }\n    };\n\n    updateDropdownPosition();\n    window.addEventListener('scroll', updateDropdownPosition, true);\n    window.addEventListener('resize', updateDropdownPosition, true);\n    return function () {\n      window.removeEventListener('scroll', updateDropdownPosition, true);\n      window.removeEventListener('resize', updateDropdownPosition, true);\n    };\n  }, [open, expandToViewport]);\n  return React.createElement(\"div\", {\n    className: clsx(styles.root, interior && styles.interior, stretchTriggerHeight && styles['stretch-trigger-height'])\n  }, React.createElement(\"div\", {\n    className: clsx(stretchTriggerHeight && styles['stretch-trigger-height']),\n    ref: triggerRef\n  }, trigger), React.createElement(DropdownContainer, {\n    renderWithPortal: expandToViewport && !interior,\n    id: dropdownId,\n    open: open\n  }, React.createElement(Transition, {\n    \"in\": open !== null && open !== void 0 ? open : false,\n    exit: false\n  }, function (state, ref) {\n    var _a;\n\n    return React.createElement(\"div\", {\n      className: clsx(styles.dropdown, dropdownClasses, (_a = {}, _a[styles.open] = open, _a[styles['with-limited-width']] = !stretchWidth, _a[styles['hide-upper-border']] = stretchWidth, _a[styles.interior] = interior, _a[styles['is-empty']] = !header && !hasContent, _a[styles.refresh] = isRefresh, _a[styles['use-portal']] = expandToViewport && !interior, _a)),\n      ref: mergeRefs([dropdownRef, ref]),\n      \"data-open\": open,\n      \"data-animating\": state !== 'exited',\n      onMouseDown: onMouseDown\n    }, React.createElement(\"div\", {\n      className: clsx(styles['dropdown-content-wrapper'], isRefresh && styles.refresh)\n    }, React.createElement(\"div\", {\n      className: styles['ie11-wrapper']\n    }, React.createElement(\"div\", {\n      ref: verticalContainerRef,\n      className: styles['dropdown-content']\n    }, React.createElement(DropdownContextProvider, {\n      position: position\n    }, header, children, footer)))));\n  })));\n};\n\nvar isInteriorPosition = function (position) {\n  return position.bottom !== undefined;\n};\n\nexport default Dropdown;","map":{"version":3,"sources":["/Users/isingheg/Desktop/projects/test-react-amplify/node_modules/@awsui/components-react/internal/components/dropdown/index.js"],"names":["styles","clsx","mergeRefs","React","useEffect","useLayoutEffect","useRef","useState","createPortal","fireNonCancelableEvent","getDropdownPosition","getInteriorDropdownPosition","Transition","useVisualRefresh","usePortalModeClasses","DropdownContextProvider","DropdownContainer","_a","children","_b","renderWithPortal","id","open","createElement","document","body","Fragment","Dropdown","trigger","onDropdownClose","onMouseDown","header","footer","dropdownId","stretchTriggerHeight","_c","stretchWidth","_d","stretchHeight","_e","stretchToTriggerWidth","_f","expandToViewport","_g","preferCenter","_h","interior","minWidth","_j","hasContent","_k","scrollable","triggerRef","dropdownRef","verticalContainerRef","fixedPosition","isRefresh","dropdownClasses","_l","position","setPosition","setDropdownPosition","triggerBox","target","verticalContainer","entireWidth","style","maxHeight","parseInt","height","classList","add","width","dropUp","bottom","remove","dropLeft","left","top","right","current","isInteriorPosition","nowrap","position_1","getBoundingClientRect","clickListener","e","contains","timeout","setTimeout","window","addEventListener","clearTimeout","removeEventListener","updateDropdownPosition","triggerRect","className","root","ref","exit","state","dropdown","refresh","undefined"],"mappings":"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","sourcesContent":["import styles from './styles.css.js';\nimport clsx from 'clsx';\nimport mergeRefs from 'react-merge-refs';\nimport React, { useEffect, useLayoutEffect, useRef, useState } from 'react';\nimport { createPortal } from 'react-dom';\nimport { fireNonCancelableEvent } from '../../events';\nimport { getDropdownPosition, getInteriorDropdownPosition, } from './dropdown-fit-handler';\nimport { Transition } from '../transition';\nimport { useVisualRefresh } from '../../hooks/use-visual-mode';\nimport { usePortalModeClasses } from '../../hooks/use-portal-mode-classes';\nimport { DropdownContextProvider } from './context';\nvar DropdownContainer = function (_a) {\n    var children = _a.children, _b = _a.renderWithPortal, renderWithPortal = _b === void 0 ? false : _b, id = _a.id, open = _a.open;\n    if (renderWithPortal) {\n        if (open) {\n            return createPortal(React.createElement(\"div\", { id: id }, children), document.body);\n        }\n        else {\n            return null;\n        }\n    }\n    else {\n        return React.createElement(React.Fragment, null, children);\n    }\n};\nvar Dropdown = function (_a) {\n    var children = _a.children, trigger = _a.trigger, open = _a.open, onDropdownClose = _a.onDropdownClose, onMouseDown = _a.onMouseDown, header = _a.header, footer = _a.footer, dropdownId = _a.dropdownId, _b = _a.stretchTriggerHeight, stretchTriggerHeight = _b === void 0 ? false : _b, _c = _a.stretchWidth, stretchWidth = _c === void 0 ? true : _c, _d = _a.stretchHeight, stretchHeight = _d === void 0 ? false : _d, _e = _a.stretchToTriggerWidth, stretchToTriggerWidth = _e === void 0 ? true : _e, _f = _a.expandToViewport, expandToViewport = _f === void 0 ? false : _f, _g = _a.preferCenter, preferCenter = _g === void 0 ? false : _g, _h = _a.interior, interior = _h === void 0 ? false : _h, minWidth = _a.minWidth, _j = _a.hasContent, hasContent = _j === void 0 ? true : _j, _k = _a.scrollable, scrollable = _k === void 0 ? true : _k;\n    var triggerRef = useRef(null);\n    var dropdownRef = useRef(null);\n    var verticalContainerRef = useRef(null);\n    var fixedPosition = useRef(null);\n    var isRefresh = useVisualRefresh(triggerRef);\n    var dropdownClasses = usePortalModeClasses(triggerRef);\n    var _l = useState('bottom-right'), position = _l[0], setPosition = _l[1];\n    var setDropdownPosition = function (position, triggerBox, target, verticalContainer) {\n        var entireWidth = !interior && stretchWidth;\n        if (!stretchHeight) {\n            if (!stretchWidth) {\n                verticalContainer.style.maxHeight = parseInt(position.height) + 1 + \"px\";\n            }\n            else {\n                verticalContainer.style.maxHeight = position.height;\n            }\n        }\n        if (entireWidth && !expandToViewport) {\n            if (stretchToTriggerWidth) {\n                target.classList.add(styles['occupy-entire-width']);\n            }\n        }\n        else {\n            target.style.width = position.width;\n        }\n        if (position.dropUp && !interior) {\n            target.classList.add(styles['dropdown-drop-up']);\n            if (!expandToViewport) {\n                target.style.bottom = '100%';\n            }\n        }\n        else {\n            target.classList.remove(styles['dropdown-drop-up']);\n        }\n        target.classList.add(position.dropLeft ? styles['dropdown-drop-left'] : styles['dropdown-drop-right']);\n        if (position.left && position.left !== 'auto') {\n            target.style.left = position.left;\n        }\n        if (expandToViewport && !interior) {\n            target.style.position = 'fixed';\n            if (position.dropUp) {\n                target.style.bottom = \"calc(100% - \" + triggerBox.top + \"px)\";\n            }\n            else {\n                target.style.top = triggerBox.bottom + \"px\";\n            }\n            if (position.dropLeft) {\n                target.style.left = \"calc(\" + triggerBox.right + \"px - \" + position.width + \")\";\n            }\n            else {\n                target.style.left = triggerBox.left + \"px\";\n            }\n            fixedPosition.current = position;\n            return;\n        }\n        if (interior && isInteriorPosition(position)) {\n            if (position.dropUp) {\n                target.style.bottom = position.bottom;\n            }\n            else {\n                target.style.top = position.top;\n            }\n            target.style.left = position.left;\n        }\n        if (position.dropUp && position.dropLeft) {\n            setPosition('top-left');\n        }\n        else if (position.dropUp) {\n            setPosition('top-right');\n        }\n        else if (position.dropLeft) {\n            setPosition('bottom-left');\n        }\n        else {\n            setPosition('bottom-right');\n        }\n    };\n    useLayoutEffect(function () {\n        if (open && dropdownRef.current && triggerRef.current && verticalContainerRef.current) {\n            verticalContainerRef.current.style.maxHeight = '';\n            dropdownRef.current.style.width = '';\n            dropdownRef.current.style.top = '';\n            dropdownRef.current.style.bottom = '';\n            dropdownRef.current.style.left = '';\n            dropdownRef.current.classList.remove(styles['dropdown-drop-left']);\n            dropdownRef.current.classList.remove(styles['dropdown-drop-right']);\n            dropdownRef.current.classList.remove(styles['dropdown-drop-up']);\n            if (scrollable) {\n                dropdownRef.current.classList.add(styles.nowrap);\n            }\n            var position_1 = interior\n                ? getInteriorDropdownPosition(triggerRef.current, dropdownRef.current, expandToViewport)\n                : getDropdownPosition(triggerRef.current, dropdownRef.current, expandToViewport, minWidth, preferCenter);\n            var triggerBox = triggerRef.current.getBoundingClientRect();\n            setDropdownPosition(position_1, triggerBox, dropdownRef.current, verticalContainerRef.current);\n            if (scrollable) {\n                dropdownRef.current.classList.remove(styles.nowrap);\n            }\n        }\n    }, [open, dropdownRef, triggerRef, verticalContainerRef, interior, stretchWidth]);\n    useEffect(function () {\n        if (!open) {\n            return;\n        }\n        var clickListener = function (e) {\n            var _a;\n            if (!((_a = dropdownRef.current) === null || _a === void 0 ? void 0 : _a.contains(e.target))) {\n                fireNonCancelableEvent(onDropdownClose);\n            }\n        };\n        var timeout = setTimeout(function () {\n            window.addEventListener('click', clickListener);\n        }, 0);\n        return function () {\n            clearTimeout(timeout);\n            window.removeEventListener('click', clickListener);\n        };\n    }, [open, onDropdownClose]);\n    useLayoutEffect(function () {\n        if (!expandToViewport || !open) {\n            return;\n        }\n        var updateDropdownPosition = function () {\n            if (triggerRef.current && dropdownRef.current && verticalContainerRef.current) {\n                var triggerRect = triggerRef.current.getBoundingClientRect();\n                var target = dropdownRef.current;\n                if (fixedPosition.current) {\n                    if (fixedPosition.current.dropUp) {\n                        dropdownRef.current.style.bottom = \"calc(100% - \" + triggerRect.top + \"px)\";\n                    }\n                    else {\n                        target.style.top = triggerRect.bottom + \"px\";\n                    }\n                    if (fixedPosition.current.dropLeft) {\n                        target.style.left = \"calc(\" + triggerRect.right + \"px - \" + fixedPosition.current.width + \")\";\n                    }\n                    else {\n                        target.style.left = triggerRect.left + \"px\";\n                    }\n                }\n            }\n        };\n        updateDropdownPosition();\n        window.addEventListener('scroll', updateDropdownPosition, true);\n        window.addEventListener('resize', updateDropdownPosition, true);\n        return function () {\n            window.removeEventListener('scroll', updateDropdownPosition, true);\n            window.removeEventListener('resize', updateDropdownPosition, true);\n        };\n    }, [open, expandToViewport]);\n    return (React.createElement(\"div\", { className: clsx(styles.root, interior && styles.interior, stretchTriggerHeight && styles['stretch-trigger-height']) },\n        React.createElement(\"div\", { className: clsx(stretchTriggerHeight && styles['stretch-trigger-height']), ref: triggerRef }, trigger),\n        React.createElement(DropdownContainer, { renderWithPortal: expandToViewport && !interior, id: dropdownId, open: open },\n            React.createElement(Transition, { \"in\": open !== null && open !== void 0 ? open : false, exit: false }, function (state, ref) {\n                var _a;\n                return (React.createElement(\"div\", { className: clsx(styles.dropdown, dropdownClasses, (_a = {},\n                        _a[styles.open] = open,\n                        _a[styles['with-limited-width']] = !stretchWidth,\n                        _a[styles['hide-upper-border']] = stretchWidth,\n                        _a[styles.interior] = interior,\n                        _a[styles['is-empty']] = !header && !hasContent,\n                        _a[styles.refresh] = isRefresh,\n                        _a[styles['use-portal']] = expandToViewport && !interior,\n                        _a)), ref: mergeRefs([dropdownRef, ref]), \"data-open\": open, \"data-animating\": state !== 'exited', onMouseDown: onMouseDown },\n                    React.createElement(\"div\", { className: clsx(styles['dropdown-content-wrapper'], isRefresh && styles.refresh) },\n                        React.createElement(\"div\", { className: styles['ie11-wrapper'] },\n                            React.createElement(\"div\", { ref: verticalContainerRef, className: styles['dropdown-content'] },\n                                React.createElement(DropdownContextProvider, { position: position },\n                                    header,\n                                    children,\n                                    footer))))));\n            }))));\n};\nvar isInteriorPosition = function (position) { return position.bottom !== undefined; };\nexport default Dropdown;\n"]},"metadata":{},"sourceType":"module"}