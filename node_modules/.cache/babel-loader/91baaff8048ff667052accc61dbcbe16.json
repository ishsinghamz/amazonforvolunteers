{"ast":null,"code":"import { __assign, __rest } from \"tslib\";\nimport clsx from 'clsx';\nimport React, { useCallback, useRef, useState } from 'react';\nimport { getWeekStartByLocale } from 'weekstart';\nimport styles from './styles.css.js';\nimport Calendar from './calendar';\nimport { normalizeLocale } from './calendar/utils/locales';\nimport { getDateLabel } from './calendar/utils/intl';\nimport { displayToIso, formatDate, isoToDisplay, memoizedDate } from './calendar/utils/date';\nimport { KeyCode } from '../internal/keycode';\nimport { fireNonCancelableEvent } from '../internal/events';\nimport Dropdown from '../internal/components/dropdown';\nimport DateInput from '../internal/components/date-input';\nimport { getBaseProps } from '../internal/base-component';\nimport { applyDisplayName } from '../internal/utils/apply-display-name.js';\nimport checkControlled from '../internal/hooks/check-controlled';\nimport { useFocusTracker } from '../internal/hooks/use-focus-tracker.js';\nimport useForwardFocus from '../internal/hooks/forward-focus';\nimport { usePrevious } from '../internal/hooks/use-previous';\nimport { InternalButton } from '../button/internal';\nimport useBaseComponent from '../internal/hooks/use-base-component';\nimport { useUniqueId } from '../internal/hooks/use-unique-id';\nimport mergeRefs from 'react-merge-refs';\nvar DatePicker = React.forwardRef(function (_a, ref) {\n  var _b = _a.locale,\n      locale = _b === void 0 ? '' : _b,\n      startOfWeek = _a.startOfWeek,\n      isDateEnabled = _a.isDateEnabled,\n      nextMonthAriaLabel = _a.nextMonthAriaLabel,\n      previousMonthAriaLabel = _a.previousMonthAriaLabel,\n      todayAriaLabel = _a.todayAriaLabel,\n      _c = _a.placeholder,\n      placeholder = _c === void 0 ? '' : _c,\n      _d = _a.value,\n      value = _d === void 0 ? '' : _d,\n      _e = _a.readOnly,\n      readOnly = _e === void 0 ? false : _e,\n      _f = _a.disabled,\n      disabled = _f === void 0 ? false : _f,\n      onBlur = _a.onBlur,\n      _g = _a.autoFocus,\n      autoFocus = _g === void 0 ? false : _g,\n      onChange = _a.onChange,\n      onFocus = _a.onFocus,\n      name = _a.name,\n      ariaLabel = _a.ariaLabel,\n      ariaRequired = _a.ariaRequired,\n      ariaLabelledby = _a.ariaLabelledby,\n      ariaDescribedby = _a.ariaDescribedby,\n      controlId = _a.controlId,\n      invalid = _a.invalid,\n      openCalendarAriaLabel = _a.openCalendarAriaLabel,\n      expandToViewport = _a.expandToViewport,\n      rest = __rest(_a, [\"locale\", \"startOfWeek\", \"isDateEnabled\", \"nextMonthAriaLabel\", \"previousMonthAriaLabel\", \"todayAriaLabel\", \"placeholder\", \"value\", \"readOnly\", \"disabled\", \"onBlur\", \"autoFocus\", \"onChange\", \"onFocus\", \"name\", \"ariaLabel\", \"ariaRequired\", \"ariaLabelledby\", \"ariaDescribedby\", \"controlId\", \"invalid\", \"openCalendarAriaLabel\", \"expandToViewport\"]);\n\n  var __internalRootRef = useBaseComponent('DatePicker').__internalRootRef;\n\n  var baseProps = getBaseProps(rest);\n\n  var _h = useState(false),\n      isDropDownOpen = _h[0],\n      setIsDropDownOpen = _h[1];\n\n  var _j = useState(false),\n      calendarHasFocus = _j[0],\n      setCalendarHasFocus = _j[1];\n\n  var normalizedLocale = normalizeLocale('DatePicker', locale !== null && locale !== void 0 ? locale : '');\n  var normalizedStartOfWeek = typeof startOfWeek === 'number' ? startOfWeek : getWeekStartByLocale(normalizedLocale);\n  var defaultSelectedDate = value.length >= 10 ? value : null;\n\n  var _k = useState(defaultSelectedDate),\n      selectedDate = _k[0],\n      setSelectedDate = _k[1];\n\n  var defaultDisplayedDate = value.length >= 10 ? value : formatDate(new Date());\n\n  var _l = useState(defaultDisplayedDate),\n      displayedDate = _l[0],\n      setDisplayedDate = _l[1];\n\n  var _m = useState(null),\n      focusedDate = _m[0],\n      setFocusedDate = _m[1];\n\n  var internalInputRef = useRef(null);\n  var buttonRef = useRef(null);\n  useForwardFocus(ref, internalInputRef);\n  var rootRef = useRef(null);\n  var dropdownId = useUniqueId('calender');\n  useFocusTracker({\n    rootRef: rootRef,\n    onBlur: onBlur,\n    onFocus: onFocus,\n    viewportId: expandToViewport ? dropdownId : ''\n  });\n\n  var onChangeMonthHandler = function (newMonth) {\n    setDisplayedDate(formatDate(newMonth));\n    setFocusedDate(null);\n  };\n\n  var onSelectDateHandler = function (_a) {\n    var _b;\n\n    var date = _a.date;\n    var formattedDate = formatDate(date);\n    (_b = buttonRef.current) === null || _b === void 0 ? void 0 : _b.focus();\n    setIsDropDownOpen(false);\n    setSelectedDate(formattedDate);\n    setDisplayedDate(formattedDate);\n    setCalendarHasFocus(false);\n    setFocusedDate(null);\n    fireNonCancelableEvent(onChange, {\n      value: formattedDate\n    });\n  };\n\n  var onDateFocusHandler = function (_a) {\n    var date = _a.date;\n\n    if (date) {\n      var value_1 = formatDate(date);\n      setFocusedDate(value_1);\n    }\n  };\n\n  var onDropdownCloseHandler = useCallback(function () {\n    setDisplayedDate(defaultDisplayedDate);\n    setCalendarHasFocus(false);\n    setIsDropDownOpen(false);\n  }, [defaultDisplayedDate]);\n\n  var onButtonClickHandler = function () {\n    if (!isDropDownOpen) {\n      setIsDropDownOpen(true);\n      setCalendarHasFocus(true);\n    }\n  };\n\n  var onWrapperKeyDownHandler = function (event) {\n    var _a;\n\n    if (event.keyCode === KeyCode.escape && isDropDownOpen) {\n      (_a = buttonRef.current) === null || _a === void 0 ? void 0 : _a.focus();\n      setIsDropDownOpen(false);\n    }\n  };\n\n  var onInputChangeHandler = function (event) {\n    var isoDateString = displayToIso(event.detail.value);\n    fireNonCancelableEvent(onChange, {\n      value: isoDateString\n    });\n  };\n\n  var onInputBlurHandler = function () {\n    if (!calendarHasFocus) {\n      setDisplayedDate(defaultDisplayedDate);\n      setIsDropDownOpen(false);\n    }\n  };\n\n  var prevValue = usePrevious(value);\n\n  if (prevValue !== value) {\n    if (value === '' && selectedDate !== value) {\n      setSelectedDate(value);\n    }\n\n    if (value.length >= 4 && displayedDate !== value) {\n      setDisplayedDate(value);\n    }\n\n    if (value.length >= 10 && selectedDate !== value) {\n      setSelectedDate(value);\n    }\n  }\n\n  var DateInputElement = React.createElement(\"div\", {\n    className: styles['date-picker-trigger']\n  }, React.createElement(\"div\", {\n    className: styles['date-picker-input']\n  }, React.createElement(DateInput, {\n    name: name,\n    invalid: invalid,\n    controlId: controlId,\n    ariaLabelledby: ariaLabelledby,\n    ariaDescribedby: ariaDescribedby,\n    ariaLabel: ariaLabel,\n    ariaRequired: ariaRequired,\n    value: isoToDisplay(value),\n    autoComplete: false,\n    disableBrowserAutocorrect: true,\n    disableAutocompleteOnBlur: calendarHasFocus,\n    disabled: disabled,\n    readOnly: readOnly,\n    onChange: onInputChangeHandler,\n    onBlur: onInputBlurHandler,\n    placeholder: placeholder,\n    ref: internalInputRef,\n    autoFocus: autoFocus\n  })), React.createElement(\"div\", null, React.createElement(InternalButton, {\n    iconName: \"calendar\",\n    className: styles['open-calendar-button'],\n    onClick: onButtonClickHandler,\n    ref: buttonRef,\n    ariaLabel: openCalendarAriaLabel && openCalendarAriaLabel(getDateLabel(normalizedLocale, value.length === 10 ? memoizedDate('value', value) : null)),\n    disabled: disabled || readOnly,\n    formAction: \"none\"\n  })));\n  baseProps.className = clsx(baseProps.className, styles.root, styles['date-picker-container']);\n\n  if (readOnly || disabled) {\n    return React.createElement(\"div\", __assign({}, baseProps), DateInputElement);\n  }\n\n  checkControlled('DatePicker', 'value', value, 'onChange', onChange);\n\n  var handleMouseDown = function (event) {\n    event.preventDefault();\n  };\n\n  return React.createElement(\"div\", __assign({}, baseProps, {\n    ref: mergeRefs([rootRef, __internalRootRef]),\n    onKeyDown: onWrapperKeyDownHandler\n  }), React.createElement(Dropdown, {\n    stretchWidth: true,\n    stretchHeight: true,\n    open: isDropDownOpen,\n    onDropdownClose: onDropdownCloseHandler,\n    onMouseDown: handleMouseDown,\n    trigger: DateInputElement,\n    expandToViewport: expandToViewport,\n    scrollable: false,\n    dropdownId: dropdownId\n  }, isDropDownOpen && React.createElement(Calendar, {\n    selectedDate: memoizedDate('value', selectedDate),\n    focusedDate: memoizedDate('focused', focusedDate),\n    displayedDate: memoizedDate('displayed', displayedDate),\n    locale: normalizedLocale,\n    startOfWeek: normalizedStartOfWeek,\n    isDateEnabled: isDateEnabled ? isDateEnabled : function () {\n      return true;\n    },\n    calendarHasFocus: calendarHasFocus,\n    nextMonthLabel: nextMonthAriaLabel,\n    previousMonthLabel: previousMonthAriaLabel,\n    todayAriaLabel: todayAriaLabel,\n    onChangeMonth: onChangeMonthHandler,\n    onSelectDate: onSelectDateHandler,\n    onFocusDate: onDateFocusHandler\n  })));\n});\napplyDisplayName(DatePicker, 'DatePicker');\nexport default DatePicker;","map":{"version":3,"sources":["/Users/isingheg/Desktop/projects/test-react-amplify/node_modules/@awsui/components-react/date-picker/index.js"],"names":["__assign","__rest","clsx","React","useCallback","useRef","useState","getWeekStartByLocale","styles","Calendar","normalizeLocale","getDateLabel","displayToIso","formatDate","isoToDisplay","memoizedDate","KeyCode","fireNonCancelableEvent","Dropdown","DateInput","getBaseProps","applyDisplayName","checkControlled","useFocusTracker","useForwardFocus","usePrevious","InternalButton","useBaseComponent","useUniqueId","mergeRefs","DatePicker","forwardRef","_a","ref","_b","locale","startOfWeek","isDateEnabled","nextMonthAriaLabel","previousMonthAriaLabel","todayAriaLabel","_c","placeholder","_d","value","_e","readOnly","_f","disabled","onBlur","_g","autoFocus","onChange","onFocus","name","ariaLabel","ariaRequired","ariaLabelledby","ariaDescribedby","controlId","invalid","openCalendarAriaLabel","expandToViewport","rest","__internalRootRef","baseProps","_h","isDropDownOpen","setIsDropDownOpen","_j","calendarHasFocus","setCalendarHasFocus","normalizedLocale","normalizedStartOfWeek","defaultSelectedDate","length","_k","selectedDate","setSelectedDate","defaultDisplayedDate","Date","_l","displayedDate","setDisplayedDate","_m","focusedDate","setFocusedDate","internalInputRef","buttonRef","rootRef","dropdownId","viewportId","onChangeMonthHandler","newMonth","onSelectDateHandler","date","formattedDate","current","focus","onDateFocusHandler","value_1","onDropdownCloseHandler","onButtonClickHandler","onWrapperKeyDownHandler","event","keyCode","escape","onInputChangeHandler","isoDateString","detail","onInputBlurHandler","prevValue","DateInputElement","createElement","className","autoComplete","disableBrowserAutocorrect","disableAutocompleteOnBlur","iconName","onClick","formAction","root","handleMouseDown","preventDefault","onKeyDown","stretchWidth","stretchHeight","open","onDropdownClose","onMouseDown","trigger","scrollable","nextMonthLabel","previousMonthLabel","onChangeMonth","onSelectDate","onFocusDate"],"mappings":"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","sourcesContent":["import { __assign, __rest } from \"tslib\";\nimport clsx from 'clsx';\nimport React, { useCallback, useRef, useState } from 'react';\nimport { getWeekStartByLocale } from 'weekstart';\nimport styles from './styles.css.js';\nimport Calendar from './calendar';\nimport { normalizeLocale } from './calendar/utils/locales';\nimport { getDateLabel } from './calendar/utils/intl';\nimport { displayToIso, formatDate, isoToDisplay, memoizedDate } from './calendar/utils/date';\nimport { KeyCode } from '../internal/keycode';\nimport { fireNonCancelableEvent } from '../internal/events';\nimport Dropdown from '../internal/components/dropdown';\nimport DateInput from '../internal/components/date-input';\nimport { getBaseProps } from '../internal/base-component';\nimport { applyDisplayName } from '../internal/utils/apply-display-name.js';\nimport checkControlled from '../internal/hooks/check-controlled';\nimport { useFocusTracker } from '../internal/hooks/use-focus-tracker.js';\nimport useForwardFocus from '../internal/hooks/forward-focus';\nimport { usePrevious } from '../internal/hooks/use-previous';\nimport { InternalButton } from '../button/internal';\nimport useBaseComponent from '../internal/hooks/use-base-component';\nimport { useUniqueId } from '../internal/hooks/use-unique-id';\nimport mergeRefs from 'react-merge-refs';\nvar DatePicker = React.forwardRef(function (_a, ref) {\n    var _b = _a.locale, locale = _b === void 0 ? '' : _b, startOfWeek = _a.startOfWeek, isDateEnabled = _a.isDateEnabled, nextMonthAriaLabel = _a.nextMonthAriaLabel, previousMonthAriaLabel = _a.previousMonthAriaLabel, todayAriaLabel = _a.todayAriaLabel, _c = _a.placeholder, placeholder = _c === void 0 ? '' : _c, _d = _a.value, value = _d === void 0 ? '' : _d, _e = _a.readOnly, readOnly = _e === void 0 ? false : _e, _f = _a.disabled, disabled = _f === void 0 ? false : _f, onBlur = _a.onBlur, _g = _a.autoFocus, autoFocus = _g === void 0 ? false : _g, onChange = _a.onChange, onFocus = _a.onFocus, name = _a.name, ariaLabel = _a.ariaLabel, ariaRequired = _a.ariaRequired, ariaLabelledby = _a.ariaLabelledby, ariaDescribedby = _a.ariaDescribedby, controlId = _a.controlId, invalid = _a.invalid, openCalendarAriaLabel = _a.openCalendarAriaLabel, expandToViewport = _a.expandToViewport, rest = __rest(_a, [\"locale\", \"startOfWeek\", \"isDateEnabled\", \"nextMonthAriaLabel\", \"previousMonthAriaLabel\", \"todayAriaLabel\", \"placeholder\", \"value\", \"readOnly\", \"disabled\", \"onBlur\", \"autoFocus\", \"onChange\", \"onFocus\", \"name\", \"ariaLabel\", \"ariaRequired\", \"ariaLabelledby\", \"ariaDescribedby\", \"controlId\", \"invalid\", \"openCalendarAriaLabel\", \"expandToViewport\"]);\n    var __internalRootRef = useBaseComponent('DatePicker').__internalRootRef;\n    var baseProps = getBaseProps(rest);\n    var _h = useState(false), isDropDownOpen = _h[0], setIsDropDownOpen = _h[1];\n    var _j = useState(false), calendarHasFocus = _j[0], setCalendarHasFocus = _j[1];\n    var normalizedLocale = normalizeLocale('DatePicker', locale !== null && locale !== void 0 ? locale : '');\n    var normalizedStartOfWeek = (typeof startOfWeek === 'number' ? startOfWeek : getWeekStartByLocale(normalizedLocale));\n    var defaultSelectedDate = value.length >= 10 ? value : null;\n    var _k = useState(defaultSelectedDate), selectedDate = _k[0], setSelectedDate = _k[1];\n    var defaultDisplayedDate = value.length >= 10 ? value : formatDate(new Date());\n    var _l = useState(defaultDisplayedDate), displayedDate = _l[0], setDisplayedDate = _l[1];\n    var _m = useState(null), focusedDate = _m[0], setFocusedDate = _m[1];\n    var internalInputRef = useRef(null);\n    var buttonRef = useRef(null);\n    useForwardFocus(ref, internalInputRef);\n    var rootRef = useRef(null);\n    var dropdownId = useUniqueId('calender');\n    useFocusTracker({ rootRef: rootRef, onBlur: onBlur, onFocus: onFocus, viewportId: expandToViewport ? dropdownId : '' });\n    var onChangeMonthHandler = function (newMonth) {\n        setDisplayedDate(formatDate(newMonth));\n        setFocusedDate(null);\n    };\n    var onSelectDateHandler = function (_a) {\n        var _b;\n        var date = _a.date;\n        var formattedDate = formatDate(date);\n        (_b = buttonRef.current) === null || _b === void 0 ? void 0 : _b.focus();\n        setIsDropDownOpen(false);\n        setSelectedDate(formattedDate);\n        setDisplayedDate(formattedDate);\n        setCalendarHasFocus(false);\n        setFocusedDate(null);\n        fireNonCancelableEvent(onChange, { value: formattedDate });\n    };\n    var onDateFocusHandler = function (_a) {\n        var date = _a.date;\n        if (date) {\n            var value_1 = formatDate(date);\n            setFocusedDate(value_1);\n        }\n    };\n    var onDropdownCloseHandler = useCallback(function () {\n        setDisplayedDate(defaultDisplayedDate);\n        setCalendarHasFocus(false);\n        setIsDropDownOpen(false);\n    }, [defaultDisplayedDate]);\n    var onButtonClickHandler = function () {\n        if (!isDropDownOpen) {\n            setIsDropDownOpen(true);\n            setCalendarHasFocus(true);\n        }\n    };\n    var onWrapperKeyDownHandler = function (event) {\n        var _a;\n        if (event.keyCode === KeyCode.escape && isDropDownOpen) {\n            (_a = buttonRef.current) === null || _a === void 0 ? void 0 : _a.focus();\n            setIsDropDownOpen(false);\n        }\n    };\n    var onInputChangeHandler = function (event) {\n        var isoDateString = displayToIso(event.detail.value);\n        fireNonCancelableEvent(onChange, { value: isoDateString });\n    };\n    var onInputBlurHandler = function () {\n        if (!calendarHasFocus) {\n            setDisplayedDate(defaultDisplayedDate);\n            setIsDropDownOpen(false);\n        }\n    };\n    var prevValue = usePrevious(value);\n    if (prevValue !== value) {\n        if (value === '' && selectedDate !== value) {\n            setSelectedDate(value);\n        }\n        if (value.length >= 4 && displayedDate !== value) {\n            setDisplayedDate(value);\n        }\n        if (value.length >= 10 && selectedDate !== value) {\n            setSelectedDate(value);\n        }\n    }\n    var DateInputElement = (React.createElement(\"div\", { className: styles['date-picker-trigger'] },\n        React.createElement(\"div\", { className: styles['date-picker-input'] },\n            React.createElement(DateInput, { name: name, invalid: invalid, controlId: controlId, ariaLabelledby: ariaLabelledby, ariaDescribedby: ariaDescribedby, ariaLabel: ariaLabel, ariaRequired: ariaRequired, value: isoToDisplay(value), autoComplete: false, disableBrowserAutocorrect: true, disableAutocompleteOnBlur: calendarHasFocus, disabled: disabled, readOnly: readOnly, onChange: onInputChangeHandler, onBlur: onInputBlurHandler, placeholder: placeholder, ref: internalInputRef, autoFocus: autoFocus })),\n        React.createElement(\"div\", null,\n            React.createElement(InternalButton, { iconName: \"calendar\", className: styles['open-calendar-button'], onClick: onButtonClickHandler, ref: buttonRef, ariaLabel: openCalendarAriaLabel &&\n                    openCalendarAriaLabel(getDateLabel(normalizedLocale, value.length === 10 ? memoizedDate('value', value) : null)), disabled: disabled || readOnly, formAction: \"none\" }))));\n    baseProps.className = clsx(baseProps.className, styles.root, styles['date-picker-container']);\n    if (readOnly || disabled) {\n        return React.createElement(\"div\", __assign({}, baseProps), DateInputElement);\n    }\n    checkControlled('DatePicker', 'value', value, 'onChange', onChange);\n    var handleMouseDown = function (event) {\n        event.preventDefault();\n    };\n    return (React.createElement(\"div\", __assign({}, baseProps, { ref: mergeRefs([rootRef, __internalRootRef]), onKeyDown: onWrapperKeyDownHandler }),\n        React.createElement(Dropdown, { stretchWidth: true, stretchHeight: true, open: isDropDownOpen, onDropdownClose: onDropdownCloseHandler, onMouseDown: handleMouseDown, trigger: DateInputElement, expandToViewport: expandToViewport, scrollable: false, dropdownId: dropdownId }, isDropDownOpen && (React.createElement(Calendar, { selectedDate: memoizedDate('value', selectedDate), focusedDate: memoizedDate('focused', focusedDate), displayedDate: memoizedDate('displayed', displayedDate), locale: normalizedLocale, startOfWeek: normalizedStartOfWeek, isDateEnabled: isDateEnabled ? isDateEnabled : function () { return true; }, calendarHasFocus: calendarHasFocus, nextMonthLabel: nextMonthAriaLabel, previousMonthLabel: previousMonthAriaLabel, todayAriaLabel: todayAriaLabel, onChangeMonth: onChangeMonthHandler, onSelectDate: onSelectDateHandler, onFocusDate: onDateFocusHandler })))));\n});\napplyDisplayName(DatePicker, 'DatePicker');\nexport default DatePicker;\n"]},"metadata":{},"sourceType":"module"}