{"ast":null,"code":"import { __assign, __rest, __spreadArray } from \"tslib\";\nimport { useCallback, useMemo } from 'react';\nimport { filterOptions } from './utils/utils';\nimport { KeyCode } from '../internal/keycode';\nimport { generateTestIndexes } from '../internal/components/options-list/utils/test-indexes';\nvar parentMap = new WeakMap();\nexport var getParentGroup = function (item) {\n  return parentMap.get(item);\n};\nexport var useAutosuggestItems = function (options) {\n  if (options === void 0) {\n    options = [];\n  }\n\n  return useMemo(function () {\n    return createItems(options);\n  }, [options]);\n};\n\nfunction createItems(options) {\n  var items = [];\n\n  for (var _i = 0, options_1 = options; _i < options_1.length; _i++) {\n    var option = options_1[_i];\n\n    if (isGroup(option)) {\n      items.push.apply(items, flattenGroup(option));\n    } else {\n      items.push(option);\n    }\n  }\n\n  return items;\n}\n\nfunction isGroup(optionOrGroup) {\n  return 'options' in optionOrGroup;\n}\n\nfunction flattenGroup(group) {\n  var options = group.options,\n      rest = __rest(group, [\"options\"]);\n\n  var hasOnlyDisabledChildren = options.every(function (option) {\n    return option.disabled;\n  });\n\n  var parent = __assign(__assign({}, rest), {\n    type: 'parent',\n    disabled: rest.disabled || hasOnlyDisabledChildren\n  });\n\n  var children = options.map(function (option) {\n    return __assign(__assign({}, option), {\n      type: 'child',\n      disabled: option.disabled || parent.disabled\n    });\n  });\n  children.forEach(function (child) {\n    return parentMap.set(child, group);\n  });\n  return [parent].concat(children);\n}\n\nexport var useFilteredItems = function (autosuggestItems, value, filterText, filteringType, showAll, __hideEnteredTextLabel) {\n  return useMemo(function () {\n    var filteredItems = filteringType === 'auto' && !showAll ? filterOptions(autosuggestItems, filterText) : __spreadArray([], autosuggestItems, true);\n\n    if (value && !__hideEnteredTextLabel) {\n      filteredItems.unshift({\n        value: value,\n        type: 'use-entered'\n      });\n    }\n\n    generateTestIndexes(filteredItems, getParentGroup);\n    return filteredItems;\n  }, [autosuggestItems, value, filterText, filteringType, showAll, __hideEnteredTextLabel]);\n};\nexport var useSelectVisibleOption = function (filteredItems, selectOption, isInteractive) {\n  return useCallback(function (index) {\n    var option = filteredItems[index];\n\n    if (option && isInteractive(option)) {\n      selectOption(option);\n    }\n  }, [filteredItems, selectOption, isInteractive]);\n};\nexport var useHighlightVisibleOption = function (filteredItems, setHighlightedIndex, isInteractive) {\n  return useCallback(function (index) {\n    var option = filteredItems[index];\n\n    if (option && isInteractive(option)) {\n      setHighlightedIndex(index);\n    }\n  }, [filteredItems, setHighlightedIndex, isInteractive]);\n};\nexport var useKeyboardHandler = function (moveHighlight, openDropdown, selectHighlighted, usingMouse, open, onKeyDown) {\n  return useCallback(function (e) {\n    switch (e.detail.keyCode) {\n      case KeyCode.down:\n        {\n          moveHighlight(1);\n          openDropdown();\n          usingMouse.current = false;\n          e.preventDefault();\n          break;\n        }\n\n      case KeyCode.up:\n        {\n          moveHighlight(-1);\n          openDropdown();\n          usingMouse.current = false;\n          e.preventDefault();\n          break;\n        }\n\n      case KeyCode.enter:\n        {\n          if (open) {\n            selectHighlighted();\n            e.preventDefault();\n          }\n\n          onKeyDown && onKeyDown(e);\n          break;\n        }\n\n      default:\n        {\n          onKeyDown && onKeyDown(e);\n        }\n    }\n  }, [moveHighlight, selectHighlighted, onKeyDown, usingMouse, open, openDropdown]);\n};","map":{"version":3,"sources":["/Users/isingheg/Desktop/projects/amazonforvolunteers-ui/node_modules/@awsui/components-react/autosuggest/controller.js"],"names":["__assign","__rest","__spreadArray","useCallback","useMemo","filterOptions","KeyCode","generateTestIndexes","parentMap","WeakMap","getParentGroup","item","get","useAutosuggestItems","options","createItems","items","_i","options_1","length","option","isGroup","push","apply","flattenGroup","optionOrGroup","group","rest","hasOnlyDisabledChildren","every","disabled","parent","type","children","map","forEach","child","set","concat","useFilteredItems","autosuggestItems","value","filterText","filteringType","showAll","__hideEnteredTextLabel","filteredItems","unshift","useSelectVisibleOption","selectOption","isInteractive","index","useHighlightVisibleOption","setHighlightedIndex","useKeyboardHandler","moveHighlight","openDropdown","selectHighlighted","usingMouse","open","onKeyDown","e","detail","keyCode","down","current","preventDefault","up","enter"],"mappings":"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","sourcesContent":["import { __assign, __rest, __spreadArray } from \"tslib\";\nimport { useCallback, useMemo } from 'react';\nimport { filterOptions } from './utils/utils';\nimport { KeyCode } from '../internal/keycode';\nimport { generateTestIndexes } from '../internal/components/options-list/utils/test-indexes';\nvar parentMap = new WeakMap();\nexport var getParentGroup = function (item) { return parentMap.get(item); };\nexport var useAutosuggestItems = function (options) {\n    if (options === void 0) { options = []; }\n    return useMemo(function () { return createItems(options); }, [options]);\n};\nfunction createItems(options) {\n    var items = [];\n    for (var _i = 0, options_1 = options; _i < options_1.length; _i++) {\n        var option = options_1[_i];\n        if (isGroup(option)) {\n            items.push.apply(items, flattenGroup(option));\n        }\n        else {\n            items.push(option);\n        }\n    }\n    return items;\n}\nfunction isGroup(optionOrGroup) {\n    return 'options' in optionOrGroup;\n}\nfunction flattenGroup(group) {\n    var options = group.options, rest = __rest(group, [\"options\"]);\n    var hasOnlyDisabledChildren = options.every(function (option) { return option.disabled; });\n    var parent = __assign(__assign({}, rest), { type: 'parent', disabled: rest.disabled || hasOnlyDisabledChildren });\n    var children = options.map(function (option) { return (__assign(__assign({}, option), { type: 'child', disabled: option.disabled || parent.disabled })); });\n    children.forEach(function (child) { return parentMap.set(child, group); });\n    return [parent].concat(children);\n}\nexport var useFilteredItems = function (autosuggestItems, value, filterText, filteringType, showAll, __hideEnteredTextLabel) {\n    return useMemo(function () {\n        var filteredItems = filteringType === 'auto' && !showAll ? filterOptions(autosuggestItems, filterText) : __spreadArray([], autosuggestItems, true);\n        if (value && !__hideEnteredTextLabel) {\n            filteredItems.unshift({ value: value, type: 'use-entered' });\n        }\n        generateTestIndexes(filteredItems, getParentGroup);\n        return filteredItems;\n    }, [autosuggestItems, value, filterText, filteringType, showAll, __hideEnteredTextLabel]);\n};\nexport var useSelectVisibleOption = function (filteredItems, selectOption, isInteractive) {\n    return useCallback(function (index) {\n        var option = filteredItems[index];\n        if (option && isInteractive(option)) {\n            selectOption(option);\n        }\n    }, [filteredItems, selectOption, isInteractive]);\n};\nexport var useHighlightVisibleOption = function (filteredItems, setHighlightedIndex, isInteractive) {\n    return useCallback(function (index) {\n        var option = filteredItems[index];\n        if (option && isInteractive(option)) {\n            setHighlightedIndex(index);\n        }\n    }, [filteredItems, setHighlightedIndex, isInteractive]);\n};\nexport var useKeyboardHandler = function (moveHighlight, openDropdown, selectHighlighted, usingMouse, open, onKeyDown) {\n    return useCallback(function (e) {\n        switch (e.detail.keyCode) {\n            case KeyCode.down: {\n                moveHighlight(1);\n                openDropdown();\n                usingMouse.current = false;\n                e.preventDefault();\n                break;\n            }\n            case KeyCode.up: {\n                moveHighlight(-1);\n                openDropdown();\n                usingMouse.current = false;\n                e.preventDefault();\n                break;\n            }\n            case KeyCode.enter: {\n                if (open) {\n                    selectHighlighted();\n                    e.preventDefault();\n                }\n                onKeyDown && onKeyDown(e);\n                break;\n            }\n            default: {\n                onKeyDown && onKeyDown(e);\n            }\n        }\n    }, [moveHighlight, selectHighlighted, onKeyDown, usingMouse, open, openDropdown]);\n};\n"]},"metadata":{},"sourceType":"module"}