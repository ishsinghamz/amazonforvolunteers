{"ast":null,"code":"import { __assign, __rest } from \"tslib\";\nimport clsx from 'clsx';\nimport React, { useCallback, useEffect, useRef, useState } from 'react';\nimport { useAutosuggestItems, useFilteredItems, useKeyboardHandler, useSelectVisibleOption, useHighlightVisibleOption } from './controller';\nimport { useDropdownA11yProps } from './hooks/a11y';\nimport VirtualList from './virtual-list';\nimport PlainList from './plain-list';\nimport Dropdown from '../internal/components/dropdown';\nimport { useDropdownStatus } from '../internal/components/dropdown-status';\nimport DropdownFooter from '../internal/components/dropdown-footer';\nimport { useFormFieldContext } from '../internal/context/form-field-context';\nimport { getBaseProps } from '../internal/base-component';\nimport { useUniqueId } from '../internal/hooks/use-unique-id';\nimport useForwardFocus from '../internal/hooks/forward-focus';\nimport { fireNonCancelableEvent } from '../internal/events';\nimport { createHighlightedOptionHook } from '../internal/components/options-list/utils/use-highlight-option';\nimport InternalInput from '../input/internal';\nimport styles from './styles.css.js';\nimport { checkOptionValueField } from '../select/utils/check-option-value-field';\nimport checkControlled from '../internal/hooks/check-controlled';\nimport { fireCancelableEvent } from '../internal/events/index';\n\nvar isInteractive = function (option) {\n  return !!option && !option.disabled && option.type !== 'parent';\n};\n\nvar useHighlightedOption = createHighlightedOptionHook({\n  isInteractive: isInteractive\n});\n\nvar createMouseEventHandler = function (handler, usingMouse) {\n  return function (itemIndex) {\n    usingMouse.current = true;\n\n    if (itemIndex > -1) {\n      handler(itemIndex);\n    }\n  };\n};\n\nvar useLoadMoreItems = function (onLoadItems) {\n  var lastFilteringText = useRef(null);\n  return useCallback(function (firstPage, samePage, filteringText) {\n    if (samePage || !firstPage || filteringText === undefined || lastFilteringText.current !== filteringText) {\n      if (filteringText !== undefined) {\n        lastFilteringText.current = filteringText;\n      }\n\n      if (lastFilteringText.current !== null && onLoadItems) {\n        fireNonCancelableEvent(onLoadItems, {\n          filteringText: lastFilteringText.current,\n          firstPage: firstPage,\n          samePage: samePage\n        });\n      }\n    }\n  }, [onLoadItems]);\n};\n\nvar InternalAutosuggest = React.forwardRef(function (props, ref) {\n  var value = props.value,\n      onChange = props.onChange,\n      onBlur = props.onBlur,\n      onFocus = props.onFocus,\n      onKeyUp = props.onKeyUp,\n      onLoadItems = props.onLoadItems,\n      options = props.options,\n      _a = props.filteringType,\n      filteringType = _a === void 0 ? 'auto' : _a,\n      _b = props.statusType,\n      statusType = _b === void 0 ? 'finished' : _b,\n      placeholder = props.placeholder,\n      name = props.name,\n      disabled = props.disabled,\n      _c = props.disableBrowserAutocorrect,\n      disableBrowserAutocorrect = _c === void 0 ? false : _c,\n      autoFocus = props.autoFocus,\n      readOnly = props.readOnly,\n      ariaLabel = props.ariaLabel,\n      ariaRequired = props.ariaRequired,\n      enteredTextLabel = props.enteredTextLabel,\n      onKeyDown = props.onKeyDown,\n      virtualScroll = props.virtualScroll,\n      expandToViewport = props.expandToViewport,\n      onSelect = props.onSelect,\n      __dropdownWidth = props.__dropdownWidth,\n      __onOptionClick = props.__onOptionClick,\n      __disableShowAll = props.__disableShowAll,\n      __hideEnteredTextOption = props.__hideEnteredTextOption,\n      __onOpen = props.__onOpen,\n      __internalRootRef = props.__internalRootRef,\n      rest = __rest(props, [\"value\", \"onChange\", \"onBlur\", \"onFocus\", \"onKeyUp\", \"onLoadItems\", \"options\", \"filteringType\", \"statusType\", \"placeholder\", \"name\", \"disabled\", \"disableBrowserAutocorrect\", \"autoFocus\", \"readOnly\", \"ariaLabel\", \"ariaRequired\", \"enteredTextLabel\", \"onKeyDown\", \"virtualScroll\", \"expandToViewport\", \"onSelect\", \"__dropdownWidth\", \"__onOptionClick\", \"__disableShowAll\", \"__hideEnteredTextOption\", \"__onOpen\", \"__internalRootRef\"]);\n\n  var filterText = rest.__filterText;\n  filterText = filterText === undefined ? value : filterText;\n  checkControlled('Autosuggest', 'value', value, 'onChange', onChange);\n  checkOptionValueField('Autosuggest', 'options', options);\n  var usingMouse = useRef(true);\n\n  var _d = useState(false),\n      showAll = _d[0],\n      setShowAll = _d[1];\n\n  var _e = useState(false),\n      open = _e[0],\n      setOpen = _e[1];\n\n  var autosuggestItems = useAutosuggestItems(options);\n  var filteredItems = useFilteredItems(autosuggestItems, value, filterText, filteringType, showAll, __hideEnteredTextOption);\n\n  var openDropdown = function () {\n    return !readOnly && setOpen(true);\n  };\n\n  var scrollToIndex = useRef(null);\n\n  var _f = useHighlightedOption(filteredItems),\n      highlightedOption = _f.highlightedOption,\n      highlightedIndex = _f.highlightedIndex,\n      moveHighlight = _f.moveHighlight,\n      resetHighlight = _f.resetHighlight,\n      setHighlightedIndex = _f.setHighlightedIndex;\n\n  var closeDropdown = useCallback(function () {\n    setOpen(false);\n    resetHighlight();\n  }, [setOpen, resetHighlight]);\n  var handleBlur = useCallback(function (e) {\n    closeDropdown();\n    onBlur && onBlur(e);\n  }, [closeDropdown, onBlur]);\n\n  var selectOption = function (option) {\n    var value = option.value || '';\n    fireNonCancelableEvent(onChange, {\n      value: value\n    });\n    var selectedCancelled = fireCancelableEvent(__onOptionClick, option);\n\n    if (!selectedCancelled) {\n      closeDropdown();\n    } else {\n      resetHighlight();\n    }\n\n    fireNonCancelableEvent(onSelect, {\n      value: value\n    });\n  };\n\n  var selectHighlighted = function () {\n    if (highlightedOption) {\n      selectOption(highlightedOption);\n    } else {\n      closeDropdown();\n    }\n  };\n\n  var fireLoadMore = useLoadMoreItems(onLoadItems);\n  var handleDelayedInput = useCallback(function (_a) {\n    var detail = _a.detail;\n    fireLoadMore(true, false, detail.value);\n  }, [fireLoadMore]);\n\n  var handleInputChange = function (e) {\n    openDropdown();\n    setShowAll(false);\n    resetHighlight();\n    onChange && onChange(e);\n  };\n\n  var highlightVisibleOption = useHighlightVisibleOption(filteredItems, setHighlightedIndex, isInteractive);\n  var selectVisibleOption = useSelectVisibleOption(filteredItems, selectOption, isInteractive);\n  var handleMouseUp = createMouseEventHandler(selectVisibleOption, usingMouse);\n  var handleMouseMove = createMouseEventHandler(highlightVisibleOption, usingMouse);\n  var handleKeyDown = useKeyboardHandler(moveHighlight, openDropdown, selectHighlighted, usingMouse, open, onKeyDown);\n  var handleLoadMore = useCallback(function () {\n    options && options.length && statusType === 'pending' && fireLoadMore(false, false);\n  }, [fireLoadMore, options, statusType]);\n  var handleRecoveryClick = useCallback(function () {\n    return fireLoadMore(false, true);\n  }, [fireLoadMore]);\n  var formFieldContext = useFormFieldContext(rest);\n  var baseProps = getBaseProps(rest);\n  var inputRef = useRef(null);\n  useForwardFocus(ref, inputRef);\n  var dropdownId = useUniqueId('dropdown');\n  var listId = useUniqueId('list');\n  var expanded = open && filteredItems.length > 1;\n\n  var _g = useDropdownA11yProps(listId, expanded, ariaLabel, highlightedOption),\n      inputA11yProps = _g[0],\n      highlightedA11yProps = _g[1];\n\n  var nativeAttributes = __assign({\n    name: name,\n    placeholder: placeholder,\n    autoFocus: autoFocus,\n    onClick: openDropdown\n  }, inputA11yProps);\n\n  var handleFocus = function (e) {\n    !__disableShowAll && setShowAll(true);\n    var openPrevented = fireCancelableEvent(__onOpen, null);\n\n    if (!openPrevented) {\n      openDropdown();\n      fireLoadMore(true, false, '');\n    }\n\n    onFocus && onFocus(e);\n  };\n\n  useEffect(function () {\n    var _a;\n\n    (_a = scrollToIndex.current) === null || _a === void 0 ? void 0 : _a.call(scrollToIndex, highlightedIndex);\n  }, [highlightedIndex]);\n  var isEmpty = !value && !filteredItems.length;\n  var dropdownStatus = useDropdownStatus(__assign(__assign({}, props), {\n    isEmpty: isEmpty,\n    onRecoveryClick: handleRecoveryClick\n  }));\n  var ListComponent = virtualScroll ? VirtualList : PlainList;\n\n  var handleMouseDown = function (event) {\n    event.preventDefault();\n  };\n\n  return React.createElement(\"div\", __assign({}, baseProps, {\n    className: clsx(styles.root, baseProps.className),\n    ref: __internalRootRef\n  }), React.createElement(Dropdown, {\n    minWidth: __dropdownWidth,\n    stretchWidth: !__dropdownWidth,\n    trigger: React.createElement(InternalInput, __assign({\n      type: \"search\",\n      value: value,\n      onChange: handleInputChange,\n      __onDelayedInput: handleDelayedInput,\n      onFocus: handleFocus,\n      onBlur: handleBlur,\n      onKeyDown: handleKeyDown,\n      onKeyUp: onKeyUp,\n      disabled: disabled,\n      disableBrowserAutocorrect: disableBrowserAutocorrect,\n      readOnly: readOnly,\n      ariaRequired: ariaRequired,\n      ref: inputRef,\n      autoComplete: false,\n      __nativeAttributes: nativeAttributes\n    }, formFieldContext)),\n    onMouseDown: handleMouseDown,\n    open: open,\n    dropdownId: dropdownId,\n    footer: dropdownStatus.isSticky ? React.createElement(DropdownFooter, {\n      content: dropdownStatus.content,\n      hasItems: filteredItems.length >= 1\n    }) : null,\n    expandToViewport: expandToViewport,\n    hasContent: filteredItems.length >= 1 || dropdownStatus.content !== null\n  }, open && React.createElement(ListComponent, {\n    listBottom: !dropdownStatus.isSticky ? React.createElement(DropdownFooter, {\n      content: dropdownStatus.content\n    }) : null,\n    handleLoadMore: handleLoadMore,\n    filteredItems: filteredItems,\n    highlightText: filterText,\n    usingMouse: usingMouse,\n    highlightedOption: highlightedOption,\n    enteredTextLabel: enteredTextLabel,\n    ref: scrollToIndex,\n    highlightedA11yProps: highlightedA11yProps,\n    hasDropdownStatus: dropdownStatus.content !== null,\n    menuProps: {\n      id: listId,\n      onMouseUp: handleMouseUp,\n      onMouseMove: handleMouseMove\n    }\n  })));\n});\nexport default InternalAutosuggest;","map":{"version":3,"sources":["/Users/isingheg/Desktop/projects/test-react-amplify/node_modules/@awsui/components-react/autosuggest/internal.js"],"names":["__assign","__rest","clsx","React","useCallback","useEffect","useRef","useState","useAutosuggestItems","useFilteredItems","useKeyboardHandler","useSelectVisibleOption","useHighlightVisibleOption","useDropdownA11yProps","VirtualList","PlainList","Dropdown","useDropdownStatus","DropdownFooter","useFormFieldContext","getBaseProps","useUniqueId","useForwardFocus","fireNonCancelableEvent","createHighlightedOptionHook","InternalInput","styles","checkOptionValueField","checkControlled","fireCancelableEvent","isInteractive","option","disabled","type","useHighlightedOption","createMouseEventHandler","handler","usingMouse","itemIndex","current","useLoadMoreItems","onLoadItems","lastFilteringText","firstPage","samePage","filteringText","undefined","InternalAutosuggest","forwardRef","props","ref","value","onChange","onBlur","onFocus","onKeyUp","options","_a","filteringType","_b","statusType","placeholder","name","_c","disableBrowserAutocorrect","autoFocus","readOnly","ariaLabel","ariaRequired","enteredTextLabel","onKeyDown","virtualScroll","expandToViewport","onSelect","__dropdownWidth","__onOptionClick","__disableShowAll","__hideEnteredTextOption","__onOpen","__internalRootRef","rest","filterText","__filterText","_d","showAll","setShowAll","_e","open","setOpen","autosuggestItems","filteredItems","openDropdown","scrollToIndex","_f","highlightedOption","highlightedIndex","moveHighlight","resetHighlight","setHighlightedIndex","closeDropdown","handleBlur","e","selectOption","selectedCancelled","selectHighlighted","fireLoadMore","handleDelayedInput","detail","handleInputChange","highlightVisibleOption","selectVisibleOption","handleMouseUp","handleMouseMove","handleKeyDown","handleLoadMore","length","handleRecoveryClick","formFieldContext","baseProps","inputRef","dropdownId","listId","expanded","_g","inputA11yProps","highlightedA11yProps","nativeAttributes","onClick","handleFocus","openPrevented","call","isEmpty","dropdownStatus","onRecoveryClick","ListComponent","handleMouseDown","event","preventDefault","createElement","className","root","minWidth","stretchWidth","trigger","__onDelayedInput","autoComplete","__nativeAttributes","onMouseDown","footer","isSticky","content","hasItems","hasContent","listBottom","highlightText","hasDropdownStatus","menuProps","id","onMouseUp","onMouseMove"],"mappings":"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","sourcesContent":["import { __assign, __rest } from \"tslib\";\nimport clsx from 'clsx';\nimport React, { useCallback, useEffect, useRef, useState } from 'react';\nimport { useAutosuggestItems, useFilteredItems, useKeyboardHandler, useSelectVisibleOption, useHighlightVisibleOption, } from './controller';\nimport { useDropdownA11yProps } from './hooks/a11y';\nimport VirtualList from './virtual-list';\nimport PlainList from './plain-list';\nimport Dropdown from '../internal/components/dropdown';\nimport { useDropdownStatus } from '../internal/components/dropdown-status';\nimport DropdownFooter from '../internal/components/dropdown-footer';\nimport { useFormFieldContext } from '../internal/context/form-field-context';\nimport { getBaseProps } from '../internal/base-component';\nimport { useUniqueId } from '../internal/hooks/use-unique-id';\nimport useForwardFocus from '../internal/hooks/forward-focus';\nimport { fireNonCancelableEvent } from '../internal/events';\nimport { createHighlightedOptionHook } from '../internal/components/options-list/utils/use-highlight-option';\nimport InternalInput from '../input/internal';\nimport styles from './styles.css.js';\nimport { checkOptionValueField } from '../select/utils/check-option-value-field';\nimport checkControlled from '../internal/hooks/check-controlled';\nimport { fireCancelableEvent } from '../internal/events/index';\nvar isInteractive = function (option) {\n    return !!option && !option.disabled && option.type !== 'parent';\n};\nvar useHighlightedOption = createHighlightedOptionHook({ isInteractive: isInteractive });\nvar createMouseEventHandler = function (handler, usingMouse) { return function (itemIndex) {\n    usingMouse.current = true;\n    if (itemIndex > -1) {\n        handler(itemIndex);\n    }\n}; };\nvar useLoadMoreItems = function (onLoadItems) {\n    var lastFilteringText = useRef(null);\n    return useCallback(function (firstPage, samePage, filteringText) {\n        if (samePage || !firstPage || filteringText === undefined || lastFilteringText.current !== filteringText) {\n            if (filteringText !== undefined) {\n                lastFilteringText.current = filteringText;\n            }\n            if (lastFilteringText.current !== null && onLoadItems) {\n                fireNonCancelableEvent(onLoadItems, { filteringText: lastFilteringText.current, firstPage: firstPage, samePage: samePage });\n            }\n        }\n    }, [onLoadItems]);\n};\nvar InternalAutosuggest = React.forwardRef(function (props, ref) {\n    var value = props.value, onChange = props.onChange, onBlur = props.onBlur, onFocus = props.onFocus, onKeyUp = props.onKeyUp, onLoadItems = props.onLoadItems, options = props.options, _a = props.filteringType, filteringType = _a === void 0 ? 'auto' : _a, _b = props.statusType, statusType = _b === void 0 ? 'finished' : _b, placeholder = props.placeholder, name = props.name, disabled = props.disabled, _c = props.disableBrowserAutocorrect, disableBrowserAutocorrect = _c === void 0 ? false : _c, autoFocus = props.autoFocus, readOnly = props.readOnly, ariaLabel = props.ariaLabel, ariaRequired = props.ariaRequired, enteredTextLabel = props.enteredTextLabel, onKeyDown = props.onKeyDown, virtualScroll = props.virtualScroll, expandToViewport = props.expandToViewport, onSelect = props.onSelect, __dropdownWidth = props.__dropdownWidth, __onOptionClick = props.__onOptionClick, __disableShowAll = props.__disableShowAll, __hideEnteredTextOption = props.__hideEnteredTextOption, __onOpen = props.__onOpen, __internalRootRef = props.__internalRootRef, rest = __rest(props, [\"value\", \"onChange\", \"onBlur\", \"onFocus\", \"onKeyUp\", \"onLoadItems\", \"options\", \"filteringType\", \"statusType\", \"placeholder\", \"name\", \"disabled\", \"disableBrowserAutocorrect\", \"autoFocus\", \"readOnly\", \"ariaLabel\", \"ariaRequired\", \"enteredTextLabel\", \"onKeyDown\", \"virtualScroll\", \"expandToViewport\", \"onSelect\", \"__dropdownWidth\", \"__onOptionClick\", \"__disableShowAll\", \"__hideEnteredTextOption\", \"__onOpen\", \"__internalRootRef\"]);\n    var filterText = rest.__filterText;\n    filterText = filterText === undefined ? value : filterText;\n    checkControlled('Autosuggest', 'value', value, 'onChange', onChange);\n    checkOptionValueField('Autosuggest', 'options', options);\n    var usingMouse = useRef(true);\n    var _d = useState(false), showAll = _d[0], setShowAll = _d[1];\n    var _e = useState(false), open = _e[0], setOpen = _e[1];\n    var autosuggestItems = useAutosuggestItems(options);\n    var filteredItems = useFilteredItems(autosuggestItems, value, filterText, filteringType, showAll, __hideEnteredTextOption);\n    var openDropdown = function () { return !readOnly && setOpen(true); };\n    var scrollToIndex = useRef(null);\n    var _f = useHighlightedOption(filteredItems), highlightedOption = _f.highlightedOption, highlightedIndex = _f.highlightedIndex, moveHighlight = _f.moveHighlight, resetHighlight = _f.resetHighlight, setHighlightedIndex = _f.setHighlightedIndex;\n    var closeDropdown = useCallback(function () {\n        setOpen(false);\n        resetHighlight();\n    }, [setOpen, resetHighlight]);\n    var handleBlur = useCallback(function (e) {\n        closeDropdown();\n        onBlur && onBlur(e);\n    }, [closeDropdown, onBlur]);\n    var selectOption = function (option) {\n        var value = option.value || '';\n        fireNonCancelableEvent(onChange, { value: value });\n        var selectedCancelled = fireCancelableEvent(__onOptionClick, option);\n        if (!selectedCancelled) {\n            closeDropdown();\n        }\n        else {\n            resetHighlight();\n        }\n        fireNonCancelableEvent(onSelect, { value: value });\n    };\n    var selectHighlighted = function () {\n        if (highlightedOption) {\n            selectOption(highlightedOption);\n        }\n        else {\n            closeDropdown();\n        }\n    };\n    var fireLoadMore = useLoadMoreItems(onLoadItems);\n    var handleDelayedInput = useCallback(function (_a) {\n        var detail = _a.detail;\n        fireLoadMore(true, false, detail.value);\n    }, [fireLoadMore]);\n    var handleInputChange = function (e) {\n        openDropdown();\n        setShowAll(false);\n        resetHighlight();\n        onChange && onChange(e);\n    };\n    var highlightVisibleOption = useHighlightVisibleOption(filteredItems, setHighlightedIndex, isInteractive);\n    var selectVisibleOption = useSelectVisibleOption(filteredItems, selectOption, isInteractive);\n    var handleMouseUp = createMouseEventHandler(selectVisibleOption, usingMouse);\n    var handleMouseMove = createMouseEventHandler(highlightVisibleOption, usingMouse);\n    var handleKeyDown = useKeyboardHandler(moveHighlight, openDropdown, selectHighlighted, usingMouse, open, onKeyDown);\n    var handleLoadMore = useCallback(function () {\n        options && options.length && statusType === 'pending' && fireLoadMore(false, false);\n    }, [fireLoadMore, options, statusType]);\n    var handleRecoveryClick = useCallback(function () { return fireLoadMore(false, true); }, [fireLoadMore]);\n    var formFieldContext = useFormFieldContext(rest);\n    var baseProps = getBaseProps(rest);\n    var inputRef = useRef(null);\n    useForwardFocus(ref, inputRef);\n    var dropdownId = useUniqueId('dropdown');\n    var listId = useUniqueId('list');\n    var expanded = open && filteredItems.length > 1;\n    var _g = useDropdownA11yProps(listId, expanded, ariaLabel, highlightedOption), inputA11yProps = _g[0], highlightedA11yProps = _g[1];\n    var nativeAttributes = __assign({ name: name, placeholder: placeholder, autoFocus: autoFocus, onClick: openDropdown }, inputA11yProps);\n    var handleFocus = function (e) {\n        !__disableShowAll && setShowAll(true);\n        var openPrevented = fireCancelableEvent(__onOpen, null);\n        if (!openPrevented) {\n            openDropdown();\n            fireLoadMore(true, false, '');\n        }\n        onFocus && onFocus(e);\n    };\n    useEffect(function () {\n        var _a;\n        (_a = scrollToIndex.current) === null || _a === void 0 ? void 0 : _a.call(scrollToIndex, highlightedIndex);\n    }, [highlightedIndex]);\n    var isEmpty = !value && !filteredItems.length;\n    var dropdownStatus = useDropdownStatus(__assign(__assign({}, props), { isEmpty: isEmpty, onRecoveryClick: handleRecoveryClick }));\n    var ListComponent = virtualScroll ? VirtualList : PlainList;\n    var handleMouseDown = function (event) {\n        event.preventDefault();\n    };\n    return (React.createElement(\"div\", __assign({}, baseProps, { className: clsx(styles.root, baseProps.className), ref: __internalRootRef }),\n        React.createElement(Dropdown, { minWidth: __dropdownWidth, stretchWidth: !__dropdownWidth, trigger: React.createElement(InternalInput, __assign({ type: \"search\", value: value, onChange: handleInputChange, __onDelayedInput: handleDelayedInput, onFocus: handleFocus, onBlur: handleBlur, onKeyDown: handleKeyDown, onKeyUp: onKeyUp, disabled: disabled, disableBrowserAutocorrect: disableBrowserAutocorrect, readOnly: readOnly, ariaRequired: ariaRequired, ref: inputRef, autoComplete: false, __nativeAttributes: nativeAttributes }, formFieldContext)), onMouseDown: handleMouseDown, open: open, dropdownId: dropdownId, footer: dropdownStatus.isSticky ? (React.createElement(DropdownFooter, { content: dropdownStatus.content, hasItems: filteredItems.length >= 1 })) : null, expandToViewport: expandToViewport, hasContent: filteredItems.length >= 1 || dropdownStatus.content !== null }, open && (React.createElement(ListComponent, { listBottom: !dropdownStatus.isSticky ? React.createElement(DropdownFooter, { content: dropdownStatus.content }) : null, handleLoadMore: handleLoadMore, filteredItems: filteredItems, highlightText: filterText, usingMouse: usingMouse, highlightedOption: highlightedOption, enteredTextLabel: enteredTextLabel, ref: scrollToIndex, highlightedA11yProps: highlightedA11yProps, hasDropdownStatus: dropdownStatus.content !== null, menuProps: {\n                id: listId,\n                onMouseUp: handleMouseUp,\n                onMouseMove: handleMouseMove\n            } })))));\n});\nexport default InternalAutosuggest;\n"]},"metadata":{},"sourceType":"module"}