{"ast":null,"code":"import { __assign, __rest } from \"tslib\";\nimport React, { createContext, useLayoutEffect, useRef, useState } from 'react';\n\nfunction getContextFromElement(element, contextKey) {\n  return element[contextKey];\n}\n\nfunction setContextToElement(element, contextKey, contextValue) {\n  element[contextKey] = contextValue;\n  var event = document.createEvent('CustomEvent');\n  event.initCustomEvent(contextKey, false, false, null);\n  element.dispatchEvent(event);\n}\n\nfunction findupContext(contextKey, element) {\n  var currentElement = element;\n\n  while (currentElement) {\n    if (getContextFromElement(currentElement, contextKey) !== undefined) {\n      return currentElement;\n    }\n\n    currentElement = currentElement.parentElement;\n  }\n\n  return null;\n}\n\nexport function createDomContext(name, defaultValue) {\n  var context = createContext(defaultValue);\n  var contextKey = \"__awsui_context_\" + name;\n  var ReactProvider = context.Provider;\n\n  function RootProvider(_a) {\n    var value = _a.value,\n        rest = __rest(_a, [\"value\"]);\n\n    var ref = useRef(null);\n    useLayoutEffect(function () {\n      if (ref.current) {\n        setContextToElement(ref.current, contextKey, value);\n      }\n    }, [value]);\n    return React.createElement(ReactProvider, {\n      value: value\n    }, React.createElement(\"div\", __assign({\n      ref: ref\n    }, rest)));\n  }\n\n  function IntermediateProvider(_a) {\n    var children = _a.children,\n        parentElement = _a.parentElement;\n\n    var _b = useState(undefined),\n        discoveredValue = _b[0],\n        setDiscoveredValue = _b[1];\n\n    useLayoutEffect(function () {\n      var providerElement = findupContext(contextKey, parentElement);\n\n      if (!providerElement) {\n        setDiscoveredValue(null);\n      } else {\n        setDiscoveredValue(getContextFromElement(providerElement, contextKey));\n\n        var changeListener_1 = function () {\n          var newValue = getContextFromElement(providerElement, contextKey);\n          setDiscoveredValue(newValue);\n        };\n\n        providerElement.addEventListener(contextKey, changeListener_1);\n        return function () {\n          return providerElement.removeEventListener(contextKey, changeListener_1);\n        };\n      }\n    }, [parentElement]);\n\n    if (discoveredValue === undefined) {\n      return null;\n    }\n\n    if (discoveredValue === null) {\n      return React.createElement(React.Fragment, null, children);\n    }\n\n    return React.createElement(ReactProvider, {\n      value: discoveredValue\n    }, children);\n  }\n\n  return {\n    context: context,\n    RootProvider: RootProvider,\n    IntermediateProvider: IntermediateProvider\n  };\n}","map":{"version":3,"sources":["/Users/isingheg/Desktop/projects/test-react-amplify/node_modules/@awsui/components-react/internal/hooks/dom-context/index.js"],"names":["__assign","__rest","React","createContext","useLayoutEffect","useRef","useState","getContextFromElement","element","contextKey","setContextToElement","contextValue","event","document","createEvent","initCustomEvent","dispatchEvent","findupContext","currentElement","undefined","parentElement","createDomContext","name","defaultValue","context","ReactProvider","Provider","RootProvider","_a","value","rest","ref","current","createElement","IntermediateProvider","children","_b","discoveredValue","setDiscoveredValue","providerElement","changeListener_1","newValue","addEventListener","removeEventListener","Fragment"],"mappings":"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","sourcesContent":["import { __assign, __rest } from \"tslib\";\nimport React, { createContext, useLayoutEffect, useRef, useState } from 'react';\nfunction getContextFromElement(element, contextKey) {\n    return element[contextKey];\n}\nfunction setContextToElement(element, contextKey, contextValue) {\n    element[contextKey] = contextValue;\n    var event = document.createEvent('CustomEvent');\n    event.initCustomEvent(contextKey, false, false, null);\n    element.dispatchEvent(event);\n}\nfunction findupContext(contextKey, element) {\n    var currentElement = element;\n    while (currentElement) {\n        if (getContextFromElement(currentElement, contextKey) !== undefined) {\n            return currentElement;\n        }\n        currentElement = currentElement.parentElement;\n    }\n    return null;\n}\nexport function createDomContext(name, defaultValue) {\n    var context = createContext(defaultValue);\n    var contextKey = \"__awsui_context_\" + name;\n    var ReactProvider = context.Provider;\n    function RootProvider(_a) {\n        var value = _a.value, rest = __rest(_a, [\"value\"]);\n        var ref = useRef(null);\n        useLayoutEffect(function () {\n            if (ref.current) {\n                setContextToElement(ref.current, contextKey, value);\n            }\n        }, [value]);\n        return (React.createElement(ReactProvider, { value: value },\n            React.createElement(\"div\", __assign({ ref: ref }, rest))));\n    }\n    function IntermediateProvider(_a) {\n        var children = _a.children, parentElement = _a.parentElement;\n        var _b = useState(undefined), discoveredValue = _b[0], setDiscoveredValue = _b[1];\n        useLayoutEffect(function () {\n            var providerElement = findupContext(contextKey, parentElement);\n            if (!providerElement) {\n                setDiscoveredValue(null);\n            }\n            else {\n                setDiscoveredValue(getContextFromElement(providerElement, contextKey));\n                var changeListener_1 = function () {\n                    var newValue = getContextFromElement(providerElement, contextKey);\n                    setDiscoveredValue(newValue);\n                };\n                providerElement.addEventListener(contextKey, changeListener_1);\n                return function () { return providerElement.removeEventListener(contextKey, changeListener_1); };\n            }\n        }, [parentElement]);\n        if (discoveredValue === undefined) {\n            return null;\n        }\n        if (discoveredValue === null) {\n            return React.createElement(React.Fragment, null, children);\n        }\n        return React.createElement(ReactProvider, { value: discoveredValue }, children);\n    }\n    return { context: context, RootProvider: RootProvider, IntermediateProvider: IntermediateProvider };\n}\n"]},"metadata":{},"sourceType":"module"}