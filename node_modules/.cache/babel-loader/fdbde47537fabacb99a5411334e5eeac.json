{"ast":null,"code":"import { useEffect, useState } from 'react';\nimport { unstable_batchedUpdates } from 'react-dom';\nexport function createSingletonHandler(factory) {\n  var listeners = [];\n\n  var callback = function (value) {\n    unstable_batchedUpdates(function () {\n      for (var _i = 0, listeners_1 = listeners; _i < listeners_1.length; _i++) {\n        var listener = listeners_1[_i];\n        listener(value);\n      }\n    });\n  };\n\n  var cleanup;\n  return function useSingleton(listener) {\n    useEffect(function () {\n      if (listeners.length === 0) {\n        cleanup = factory(callback);\n      }\n\n      listeners.push(listener);\n      return function () {\n        listeners.splice(listeners.indexOf(listener), 1);\n\n        if (listeners.length === 0) {\n          cleanup();\n          cleanup = undefined;\n        }\n      };\n    }, []);\n  };\n}\nexport function createSingletonState(_a) {\n  var factory = _a.factory,\n      initialState = _a.initialState;\n  var useSingleton = createSingletonHandler(factory);\n  var value = initialState;\n  return function useSingletonState() {\n    var _a = useState(value),\n        state = _a[0],\n        setState = _a[1];\n\n    useSingleton(function (newValue) {\n      value = newValue;\n      setState(newValue);\n    });\n    return state;\n  };\n}","map":{"version":3,"sources":["/Users/isingheg/Desktop/projects/test-react-amplify/node_modules/@awsui/components-react/internal/hooks/use-singleton-handler/index.js"],"names":["useEffect","useState","unstable_batchedUpdates","createSingletonHandler","factory","listeners","callback","value","_i","listeners_1","length","listener","cleanup","useSingleton","push","splice","indexOf","undefined","createSingletonState","_a","initialState","useSingletonState","state","setState","newValue"],"mappings":"AAAA,SAASA,SAAT,EAAoBC,QAApB,QAAoC,OAApC;AACA,SAASC,uBAAT,QAAwC,WAAxC;AACA,OAAO,SAASC,sBAAT,CAAgCC,OAAhC,EAAyC;AAC5C,MAAIC,SAAS,GAAG,EAAhB;;AACA,MAAIC,QAAQ,GAAG,UAAUC,KAAV,EAAiB;AAC5BL,IAAAA,uBAAuB,CAAC,YAAY;AAChC,WAAK,IAAIM,EAAE,GAAG,CAAT,EAAYC,WAAW,GAAGJ,SAA/B,EAA0CG,EAAE,GAAGC,WAAW,CAACC,MAA3D,EAAmEF,EAAE,EAArE,EAAyE;AACrE,YAAIG,QAAQ,GAAGF,WAAW,CAACD,EAAD,CAA1B;AACAG,QAAAA,QAAQ,CAACJ,KAAD,CAAR;AACH;AACJ,KALsB,CAAvB;AAMH,GAPD;;AAQA,MAAIK,OAAJ;AACA,SAAO,SAASC,YAAT,CAAsBF,QAAtB,EAAgC;AACnCX,IAAAA,SAAS,CAAC,YAAY;AAClB,UAAIK,SAAS,CAACK,MAAV,KAAqB,CAAzB,EAA4B;AACxBE,QAAAA,OAAO,GAAGR,OAAO,CAACE,QAAD,CAAjB;AACH;;AACDD,MAAAA,SAAS,CAACS,IAAV,CAAeH,QAAf;AACA,aAAO,YAAY;AACfN,QAAAA,SAAS,CAACU,MAAV,CAAiBV,SAAS,CAACW,OAAV,CAAkBL,QAAlB,CAAjB,EAA8C,CAA9C;;AACA,YAAIN,SAAS,CAACK,MAAV,KAAqB,CAAzB,EAA4B;AACxBE,UAAAA,OAAO;AACPA,UAAAA,OAAO,GAAGK,SAAV;AACH;AACJ,OAND;AAOH,KAZQ,EAYN,EAZM,CAAT;AAaH,GAdD;AAeH;AACD,OAAO,SAASC,oBAAT,CAA8BC,EAA9B,EAAkC;AACrC,MAAIf,OAAO,GAAGe,EAAE,CAACf,OAAjB;AAAA,MAA0BgB,YAAY,GAAGD,EAAE,CAACC,YAA5C;AACA,MAAIP,YAAY,GAAGV,sBAAsB,CAACC,OAAD,CAAzC;AACA,MAAIG,KAAK,GAAGa,YAAZ;AACA,SAAO,SAASC,iBAAT,GAA6B;AAChC,QAAIF,EAAE,GAAGlB,QAAQ,CAACM,KAAD,CAAjB;AAAA,QAA0Be,KAAK,GAAGH,EAAE,CAAC,CAAD,CAApC;AAAA,QAAyCI,QAAQ,GAAGJ,EAAE,CAAC,CAAD,CAAtD;;AACAN,IAAAA,YAAY,CAAC,UAAUW,QAAV,EAAoB;AAC7BjB,MAAAA,KAAK,GAAGiB,QAAR;AACAD,MAAAA,QAAQ,CAACC,QAAD,CAAR;AACH,KAHW,CAAZ;AAIA,WAAOF,KAAP;AACH,GAPD;AAQH","sourcesContent":["import { useEffect, useState } from 'react';\nimport { unstable_batchedUpdates } from 'react-dom';\nexport function createSingletonHandler(factory) {\n    var listeners = [];\n    var callback = function (value) {\n        unstable_batchedUpdates(function () {\n            for (var _i = 0, listeners_1 = listeners; _i < listeners_1.length; _i++) {\n                var listener = listeners_1[_i];\n                listener(value);\n            }\n        });\n    };\n    var cleanup;\n    return function useSingleton(listener) {\n        useEffect(function () {\n            if (listeners.length === 0) {\n                cleanup = factory(callback);\n            }\n            listeners.push(listener);\n            return function () {\n                listeners.splice(listeners.indexOf(listener), 1);\n                if (listeners.length === 0) {\n                    cleanup();\n                    cleanup = undefined;\n                }\n            };\n        }, []);\n    };\n}\nexport function createSingletonState(_a) {\n    var factory = _a.factory, initialState = _a.initialState;\n    var useSingleton = createSingletonHandler(factory);\n    var value = initialState;\n    return function useSingletonState() {\n        var _a = useState(value), state = _a[0], setState = _a[1];\n        useSingleton(function (newValue) {\n            value = newValue;\n            setState(newValue);\n        });\n        return state;\n    };\n}\n"]},"metadata":{},"sourceType":"module"}