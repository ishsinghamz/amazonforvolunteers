import { __assign, __rest } from "tslib";
import clsx from 'clsx';
import React, { useRef } from 'react';
import { StickyHeaderContext, useStickyHeader } from './use-sticky-header';
import { getBaseProps } from '../internal/base-component';
import styles from './styles.css.js';
import DarkRibbon from '../internal/components/dark-ribbon';
import mergeRefs from 'react-merge-refs';
import { useVisualRefresh } from '../internal/hooks/use-visual-mode';
export default function InternalContainer(_a) {
    var _b, _c, _d;
    var header = _a.header, footer = _a.footer, children = _a.children, _e = _a.variant, variant = _e === void 0 ? 'default' : _e, _f = _a.disableHeaderPaddings, disableHeaderPaddings = _f === void 0 ? false : _f, _g = _a.disableContentPaddings, disableContentPaddings = _g === void 0 ? false : _g, __stickyOffset = _a.__stickyOffset, _h = _a.__stickyHeader, __stickyHeader = _h === void 0 ? false : _h, _j = _a.__internalRootRef, __internalRootRef = _j === void 0 ? null : _j, _k = _a.__disableHeaderDivider, __disableHeaderDivider = _k === void 0 ? false : _k, _l = _a.__disableFooterDivider, __disableFooterDivider = _l === void 0 ? false : _l, _m = _a.__disableFooterPaddings, __disableFooterPaddings = _m === void 0 ? false : _m, restProps = __rest(_a, ["header", "footer", "children", "variant", "disableHeaderPaddings", "disableContentPaddings", "__stickyOffset", "__stickyHeader", "__internalRootRef", "__disableHeaderDivider", "__disableFooterDivider", "__disableFooterPaddings"]);
    var baseProps = getBaseProps(restProps);
    var rootRef = useRef(null);
    var headerRef = useRef(null);
    var isRefresh = useVisualRefresh(rootRef);
    var hasDynamicHeight = isRefresh && variant === 'full-page';
    var _o = useStickyHeader(rootRef, headerRef, __stickyHeader, __stickyOffset), isSticky = _o.isSticky, isStuck = _o.isStuck, stickyStyles = _o.stickyStyles;
    return (React.createElement("div", __assign({}, baseProps, { className: clsx(baseProps.className, styles.root, styles["variant-" + variant]), ref: mergeRefs([rootRef, __internalRootRef]) }),
        header && (React.createElement(StickyHeaderContext.Provider, { value: { isStuck: isStuck } },
            React.createElement("div", __assign({ className: clsx(styles.header, (_b = {},
                    _b[styles['header-sticky-disabled']] = __stickyHeader && !isSticky,
                    _b[styles['header-sticky-enabled']] = isSticky,
                    _b[styles['header-dynamic-height']] = hasDynamicHeight,
                    _b[styles['header-stuck']] = isStuck,
                    _b[styles['with-paddings']] = !disableHeaderPaddings,
                    _b[styles['with-divider']] = !__disableHeaderDivider,
                    _b)) }, stickyStyles, { ref: headerRef }),
                React.createElement(DarkRibbon, { isRefresh: isRefresh, hasPlainStyling: variant !== 'full-page' }, header)))),
        React.createElement("div", { className: clsx(styles.content, (_c = {},
                _c[styles['with-paddings']] = !disableContentPaddings,
                _c)) }, children),
        footer && (React.createElement("div", { className: clsx(styles.footer, (_d = {},
                _d[styles['with-divider']] = !__disableFooterDivider,
                _d[styles['with-paddings']] = !__disableFooterPaddings,
                _d)) }, footer))));
}
