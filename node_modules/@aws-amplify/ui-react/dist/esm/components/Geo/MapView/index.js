import{__rest as o,__awaiter as e}from"../../../node_modules/tslib/tslib.es6.js";import{jsx as i}from"react/jsx-runtime";import{Amplify as t,Auth as r}from"aws-amplify";import l from"maplibre-gl";import{AmplifyMapLibreRequest as m}from"maplibre-gl-js-amplify";import{useState as a,useMemo as s,useEffect as n}from"react";import p from"react-map-gl";const c=c=>{var f,{mapLib:u,mapStyle:v,style:d}=c,g=o(c,["mapLib","mapStyle","style"]);const b=t.configure(),[y,j]=a(),_=s((()=>Object.assign({height:"100vh",position:"relative",width:"100vw"},d)),[d]);return n((()=>{e(void 0,void 0,void 0,(function*(){var o;const e=yield r.currentUserCredentials();if(e){const i=null===(o=b.geo)||void 0===o?void 0:o.amazon_location_service.region,{transformRequest:t}=new m(e,i);j((()=>t))}}))}),[]),y?i(p,Object.assign({},g,{mapLib:null!=u?u:l,mapStyle:null!=v?v:null===(f=b.geo)||void 0===f?void 0:f.amazon_location_service.maps.default,style:_,transformRequest:y})):null};export{c as MapView};
