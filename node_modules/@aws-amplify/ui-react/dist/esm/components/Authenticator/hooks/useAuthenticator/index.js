import{jsx as e}from"react/jsx-runtime";import*as t from"react";import{getSendEventAliases as r,getServiceContextFacade as s,createAuthenticatorMachine as o,listenToAuthHub as n}from"@aws-amplify/ui";import{useSelector as i,useInterpret as c}from"@xstate/react";import u from"lodash/isEmpty";import{areArrayValuesEqual as a}from"../../../../helpers/utils.js";const m=t.createContext({}),p=({children:r})=>{const s=t.useContext(m),i={service:c(o)},a=u(s)?i:s,{service:{send:p}}=a;return t.useEffect((()=>n(p)),[]),e(m.Provider,Object.assign({value:a},{children:r}))},f=e=>{const{service:o}=t.useContext(m);if(!o)return console.error("No `Authenticator.Provider` was found above where `useAuthenticator` hook is. Please ensure you wrap your App with `Authenticator.Provider` like so: https://ui.docs.amplify.aws/components/authenticator#useauthenticator-hook"),null;const n=o.send,c=t.useMemo((()=>r(n)),[o]),u=e=>Object.assign(Object.assign({},c),s(e)),p=t.useRef(),f=i(o,(e=>e),((t,r)=>{if(!e)return!1;const s=p.current,o=u(r);if(p.current=o,!s)return!1;const n=e(s),i=e(o);return a(n,i)}));return Object.assign(Object.assign({},u(f)),{_state:f,_send:n})};export{m as AuthenticatorContext,p as Provider,f as useAuthenticator};
